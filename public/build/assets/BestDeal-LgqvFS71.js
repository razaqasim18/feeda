import{q as E,u as P,d as o,k as S,l as N,c as t,o as e,f as b,a as _,m as d,t as y,S as g,F as w,r as x,b as p}from"./app-Dejn29Q7.js";import{_ as A}from"./ProductCard-CVM_N0Xk.js";const D={class:"main-container pt-8 pb-12"},F={key:0,class:"text-slate-800 text-lg lg:text-3xl font-bold"},H={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 items-stretch mt-6"},M={key:0,class:"col-span-full flex justify-center py-4"},V={key:1,class:"col-span-full text-center py-4 text-slate-800"},$={key:2,class:"col-span-full text-center py-4 text-slate-800"},j={key:2,class:"mt-4 md:mt-8 grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 gap-3 md:gap-6 items-start"},R={__name:"BestDeal",setup(q){const k=E(),L=P(),m=o(1),h=o(12),l=o([]),r=o(!0),n=o(!1),u=o(!1);S(()=>{f(),window.addEventListener("scroll",v)}),N(()=>{window.removeEventListener("scroll",v)});let i=!1;const v=()=>{if(i||n.value||u.value)return;const a=window.innerHeight+window.scrollY,s=document.documentElement.offsetHeight;a>s-200&&(i=!0,B(),setTimeout(()=>{i=!1},500))},B=()=>{m.value+=1,f(!0)},f=async(a=!1)=>{try{a?n.value=!0:r.value=!0;const s=await axios.get("/products",{params:{page:m.value,per_page:h.value,sort_type:"top_selling"},headers:{"Accept-Language":L.locale||"en",Authorization:k.token}});a?l.value=[...l.value,...s.data.data.products]:l.value=s.data.data.products,s.data.data.products.length<h.value&&(u.value=!0)}catch(s){console.error("Error fetching products:",s)}finally{r.value=!1,n.value=!1}};return(a,s)=>(e(),t("div",D,[r.value?(e(),b(g,{key:1,class:"w-48 sm:w-60 md:w-72 lg:w-96 h-12 rounded-lg"})):(e(),t("div",F,y(a.$t("Best Deal")),1)),_("div",H,[(e(!0),t(w,null,x(l.value,c=>(e(),t("div",{key:c.id,class:"w-full"},[p(A,{product:c},null,8,["product"])]))),128)),n.value?(e(),t("div",M,[p(g,{class:"w-full h-[220px] sm:h-[330px]"})])):d("",!0),u.value&&l.value.length>0?(e(),t("div",V)):d("",!0),l.value.length===0&&!r.value?(e(),t("div",$,y(a.$t("No Products Found")),1)):d("",!0)]),r.value?(e(),t("div",j,[(e(),t(w,null,x(6,c=>_("div",{key:c},[p(g,{class:"w-full h-[220px] sm:h-[330px]"})])),64))])):d("",!0)]))}};export{R as default};
