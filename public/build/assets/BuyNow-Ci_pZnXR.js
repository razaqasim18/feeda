import{_ as A,p as z,z as I,u as V,q as T,E as J,d as g,k as W,s as D,c as h,o as u,a as e,b as y,t as s,g as c,B as w,C as L,x as j,n as Q,f as Z,m as P,U as ee,h as te,V as se,K as ae,F as G,r as H,e as oe,w as U,W as ne,H as B,X as le}from"./app-CTBXvSfy.js";import{_ as re}from"./OrderConfirmModal-BdXeR0YX.js";import{r as ie}from"./TrashIcon-B_nTSy3k.js";import{_ as de}from"./CheckoutShippingAddress-1Mcb4JtC.js";import{r as ce}from"./HomeIcon-B7aaz5qe.js";import"./AddressForm-CJMsu7xg.js";import"./AddressFormModal-DHQsdEK1.js";const ue={class:"p-6 bg-white rounded-2xl border border-slate-200"},me={class:"text-slate-950 text-xl font-medium leading-7"},pe={class:"my-4 flex justify-between gap-4"},he={class:"text-slate-950 text-base font-normal leading-normal"},_e={class:"text-slate-950 text-base font-normal leading-normal"},ve={class:"my-4 flex justify-between gap-4"},fe={class:"text-red-500 text-base font-normal leading-normal"},ye={class:"text-slate-950 text-base font-normal leading-normal"},ge={class:"my-4 flex justify-between gap-4"},be={class:"text-slate-950 text-base font-normal leading-normal"},xe={class:"text-slate-950 text-base font-normal leading-normal"},we={class:"my-4 flex justify-between gap-4"},$e={class:"text-slate-950 text-base font-normal leading-normal"},ke={class:"text-slate-950 text-base font-normal leading-normal"},Ce={class:"my-4 flex justify-between gap-4"},Pe={class:"text-slate-950 text-base font-normal leading-normal"},Ne={class:"text-slate-950 text-base font-normal leading-normal"},Se={class:"my-4 flex justify-between gap-4"},Me={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Be={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},De={class:"p-4 mt-6 bg-slate-100 rounded-xl"},je={class:"text-black text-base font-normal leading-normal"},Ie={class:"relative mt-2"},Ve=["placeholder"],Te={class:"absolute top-1/2 -translate-y-1/2 left-3"},Oe={key:1,class:"px-6 py-4 w-full mt-4 bg-primary-200 rounded-[10px] text-primary text-base font-semibold flex items-center justify-center gap-2",disabled:""},Ue={__name:"BuyNowCheckoutOrderSummary",props:{note:String,paymentMethod:String},setup(N){const b=new z,o=I(),d=V(),x=T(),i=J(),m=g(!1);let t=g(0);console.log("initial "+t);const r=g(""),_=N,a=g({total_amount:0,delivery_charge:0,coupon_discount:0,payable_amount:0,order_tax_amount:0});W(()=>{r.value=o.coupon_code,o.isLoadingCart||l()}),D(()=>o.isLoadingCart,()=>{o.isLoadingCart||l()});const l=()=>{axios.post("/cart/checkout",{shop_ids:[o.buyNowShopId],is_buy_now:!0,coupon_code:r.value},{headers:{Authorization:x.token}}).then(n=>{a.value=n.data.data.checkout,o.buyNowProduct=n.data.data.checkout_items[0],m.value=n.data.data.apply_coupon,m.value&&r.value.length>0?(i.success(n.data.message,{position:d.langDirection==="rtl"?"bottom-right":"bottom-left"}),o.coupon_code=r.value,console.log("before "+t),t=n.data.data.checkout.is_birthday_coupon,console.log("after "+t)):!m.value&&r.value.length>0&&(i.error(n.data.message,{position:d.langDirection==="rtl"?"bottom-right":"bottom-left"}),o.coupon_code="")}).catch(n=>{i.error(n.response.data.message,{position:d.langDirection==="rtl"?"bottom-right":"bottom-left"})})},S=()=>{r.value.length>0&&l()},p=()=>{r.value="",m.value=!1,o.coupon_code="",l()},M={component:ae,props:{title:"Order Placed",message:"Your order has been placed successfully."}},$=g(!1),E=()=>{if(!o.address){i.error("Please select shipping address");return}if(_.paymentMethod==null){i.error("Please select payment method",{position:d.langDirection==="rtl"?"bottom-right":"bottom-left"});return}o.buyNowProduct?($.value=!0,axios.post("/place-order",{isbirthdayCoupon:t,shop_ids:[o.buyNowShopId],address_id:o.address.id,payment_method:_.paymentMethod,coupon_code:r.value,note:_.note,is_buy_now:!0},{headers:{Authorization:x.token}}).then(n=>{$.value=!1,i(M,{type:"default",hideProgressBar:!0,icon:!1,position:d.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),a.value.total_amount=0,a.value.delivery_charge=0,a.value.coupon_discount=0,a.value.payable_amount=0,o.buyNowProduct=null,o.coupon_code="";let v=n.data.data.order_payment_url;if(v!=null){F(v);return}else o.showOrderConfirmModal=!0}).catch(()=>{$.value=!1})):i.error("Please select at least one product",{position:d.langDirection==="rtl"?"bottom-right":"bottom-left"})},F=n=>{let v=700,k=700,R=screen.width/2-v/2,X=screen.height/2-k/2,q="popup,resizable,height="+k+",width="+v+",top="+X+",left="+R,f=window.open(n,null,q);f.title="Payment Window Screen - Make Payment",f.onload=()=>{f.title="Payment Window Screen - Make Payment"},f.focus();var C=setInterval(K,1e3);function K(){try{if(f.closed||!f){clearInterval(C),f.close(),o.orderPaymentCancelModal=!0,i.error("Payment Canceled",{position:d.langDirection==="rtl"?"bottom-right":"bottom-left"}),b.push({name:"home"});return}var O=f.location.pathname.replace(/\/order\/\d+/,"");if(O=="/payment/cancel"){clearInterval(C),setTimeout(()=>{f.close(),o.orderPaymentCancelModal=!0,i.error("Sorry! Payment Canceled",{position:d.langDirection==="rtl"?"bottom-right":"bottom-left"}),b.push({name:"home"})},8e3);return}if(O=="/payment/success"){f.close(),clearInterval(C),o.showOrderConfirmModal=!0;return}}catch{}}setTimeout(()=>{clearInterval(C),f.close()},18e4)};return(n,v)=>(u(),h("div",null,[e("div",ue,[e("div",me,s(n.$t("Order Summary")),1),e("div",pe,[e("div",he,s(n.$t("Subtotal")),1),e("div",_e,s(c(d).showCurrency(a.value.total_amount)),1)]),e("div",ve,[e("div",fe,s(n.$t("Discount")),1),e("div",ye," -"+s(c(d).showCurrency(a.value.coupon_discount)),1)]),v[1]||(v[1]=e("div",{class:"w-full h-[0px] border-t border-dashed border-slate-400"},null,-1)),e("div",ge,[e("div",be,s(n.$t("Subtotal After Discount")),1),e("div",xe,s(c(d).showCurrency((a.value.total_amount-a.value.coupon_discount).toFixed(2))),1)]),e("div",we,[e("div",$e,s(n.$t("Shipping Charge")),1),e("div",ke,s(c(d).showCurrency(a.value.delivery_charge)),1)]),e("div",Ce,[e("div",Pe,s(n.$t("Vat & Tax")),1),e("div",Ne,s(c(d).showCurrency(a.value.order_tax_amount)),1)]),v[2]||(v[2]=e("div",{class:"w-full h-[0px] border border-slate-500"},null,-1)),e("div",Se,[e("div",Me,s(n.$t("Total Payable")),1),e("div",Be,s(c(d).showCurrency(a.value.payable_amount)),1)]),e("div",De,[e("div",je,s(n.$t("Have a coupon"))+"? ",1),e("div",Ie,[w(e("input",{type:"text","onUpdate:modelValue":v[0]||(v[0]=k=>r.value=k),class:j(["formInputCoupon pr-14 p-3",m.value?"text-green-500 pl-10":""]),placeholder:n.$t("Enter coupon code")},null,10,Ve),[[L,r.value]]),m.value?(u(),h("button",{key:1,class:"bg-slate-100 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:p},[y(c(ie),{class:"w-6 h-6 text-red-500"})])):(u(),h("button",{key:0,class:"bg-slate-700 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:S},[y(c(Q),{class:"w-6 h-6 text-white"})])),e("span",Te,[m.value?(u(),Z(c(ee),{key:0,class:"w-6 h-6 text-green-500"})):P("",!0)])])])]),$.value?(u(),h("button",Oe,[te(s(n.$t("Processing"))+" ",1),y(se)])):(u(),h("button",{key:0,class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:E},s(n.$t("Place Order")),1)),y(re)]))}},Ae=A(Ue,[["__scopeId","data-v-2366978b"]]),ze={class:"space-y-4 mt-3 transition duration-300"},We={class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},Le={key:0,class:"text-slate-950 text-base font-medium leading-normal"},Ge={class:"space-y-2 divide-y divide-slate-200"},He={class:"w-[72px] h-[95px]"},Ee=["src"],Fe={class:"flex flex-col gap-1 w-full"},Re={class:"text-primary text-xs font-normal leading-none"},Xe={class:"text-slate-950 text-base font-normal leading-normal"},qe={class:"flex flex-wrap justify-between items-center gap-3"},Ke={class:"flex items-center gap-1"},Ye={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},Je={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},Qe={class:"text-slate-800 text-base font-normal leading-normal"},Ze={__name:"BuyNowCheckoutProduct",setup(N){T();const b=V(),o=I();return(d,x)=>{var i,m;return u(),h("div",ze,[e("div",We,[c(b).multiVendor?(u(),h("div",Le,s((i=c(o).buyNowProduct)==null?void 0:i.shop_name),1)):P("",!0),e("div",Ge,[(u(!0),h(G,null,H((m=c(o).buyNowProduct)==null?void 0:m.products,t=>{var r,_;return u(),h("div",{key:t.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[e("div",He,[e("img",{src:t.thumbnail,class:"w-full h-full object-contain"},null,8,Ee)]),e("div",Fe,[e("div",Re,s(t==null?void 0:t.brand),1),e("div",Xe,s(t==null?void 0:t.name),1),e("div",qe,[e("div",Ke,[e("div",Ye,s((r=t==null?void 0:t.size)==null?void 0:r.name),1),e("div",Je,s((_=t==null?void 0:t.color)==null?void 0:_.name),1)]),e("div",Qe," 1 X "+s(c(b).showCurrency((t==null?void 0:t.discount_price)>0?t==null?void 0:t.discount_price:t==null?void 0:t.price)),1)])])])}),128))])])])}}},et={class:"main-container"},tt={class:"flex items-center gap-2 overflow-hidden pt-4"},st={class:"grow w-full overflow-hidden"},at={class:"space-x-1 text-slate-600 text-sm font-normal truncate"},ot={class:"grid grid-cols-1 xl:grid-cols-3 my-3 gap-8"},nt={class:"col-span-1 xl:col-span-2"},lt={class:"flex gap-2 justify-between items-center"},rt={class:"text-slate-950 text-lg sm:text-3xl font-medium leading-10"},it={class:"text-primary-600 text-lg font-medium leading-normal tracking-tight"},dt={key:0},ct={class:"mt-6"},ut={class:"mb-1"},mt={class:"text-slate-950 text-xl font-medium leading-7"},pt={class:"text-slate-500 text-lg font-normal leading-7 tracking-tight"},ht=["placeholder"],_t={class:"p-6 mt-4 bg-white rounded-2xl border border-slate-200"},vt={class:"text-slate-950 text-xl font-medium leading-7"},ft={class:"mt-4 flex flex-wrap gap-4"},yt={for:"cash",class:"flex items-center gap-4 xl:min-w-80"},gt={class:"text-slate-500 text-base font-normal leading-normal"},bt={for:"card",class:"flex items-center gap-4 xl:min-w-80"},xt={class:"text-slate-500 text-base font-normal leading-normal"},wt={key:0,class:"mt-5 border-t border-slate-200"},$t={class:"text-slate-600 pt-2 block text-md font-medium leading-7"},kt={class:"mt-3 flex flex-wrap gap-4"},Ct=["for"],Pt=["id","value"],Nt={class:""},St=["src"],Mt={__name:"BuyNow",setup(N){const b=new z,o=T(),d=V(),x=I(),i=g(!0),m=g(""),t=g("cash"),r=g(null),_=g(null);return W(()=>{window.scrollTo(0,0),x.coupon_code="",r.value=t.value,o.user||b.push({name:"home"})}),D(t,()=>{t.value==="card"?r.value=_.value:r.value=t.value}),D(_,()=>{t.value==="card"&&(r.value=_.value)}),(a,l)=>{const S=oe("router-link");return u(),h("div",et,[e("div",tt,[y(S,{to:"/",class:"w-6 h-6"},{default:U(()=>[y(c(ce),{class:"w-5 h-5 text-slate-600"})]),_:1}),e("div",st,[e("div",at,[e("span",null,s(a.$t("Home")),1),l[5]||(l[5]=e("span",null,"/",-1)),e("span",null,s(a.$t("Cart")),1),l[6]||(l[6]=e("span",null,"/",-1)),e("span",null,s(a.$t("Checkout")),1)])])]),e("div",ot,[e("div",nt,[e("div",{class:j(["py-4 border-b tran",i.value?"border-primary":"border-slate-200"])},[e("div",lt,[e("div",rt,s(a.$t("Checkout")),1),e("div",{class:"flex items-center gap-2 cursor-pointer",onClick:l[0]||(l[0]=p=>i.value=!i.value)},[e("div",it," ("+s(c(x).buyNowProduct?1:0)+" "+s(a.$t("items"))+") ",1),y(c(ne),{class:j(["w-5 h-5 text-primary-600 transition duration-300",i.value?"rotate-180":""])},null,8,["class"])])]),i.value?(u(),h("div",dt,[y(Ze)])):P("",!0)],2),y(de),e("div",ct,[e("div",ut,[e("span",mt,s(a.$t("Note")),1),e("span",pt," ("+s(a.$t("Optional"))+") ",1)]),w(e("textarea",{"onUpdate:modelValue":l[1]||(l[1]=p=>m.value=p),rows:"3",class:"form-input",placeholder:a.$t("Write your note here")+"..."},null,8,ht),[[L,m.value]])]),e("div",_t,[e("div",vt,s(a.$t("Payment Method")),1),e("div",ft,[e("label",yt,[w(e("input",{"onUpdate:modelValue":l[2]||(l[2]=p=>t.value=p),id:"cash",name:"payment",type:"radio",class:"radioBtn2",value:"cash",checked:""},null,512),[[B,t.value]]),l[7]||(l[7]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/money-2.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",gt,s(a.$t("Cash on delivery")),1)]),e("label",bt,[w(e("input",{"onUpdate:modelValue":l[3]||(l[3]=p=>t.value=p),id:"card",name:"payment",type:"radio",class:"radioBtn2",value:"card"},null,512),[[B,t.value]]),l[8]||(l[8]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/card.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",xt,s(a.$t("Credit or Debit Card")),1)])]),y(le,{"leave-active-class":"transition ease-in duration-300","enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:U(()=>[t.value==="card"?(u(),h("div",wt,[e("span",$t,s(a.$t("Available Payment Gateways")),1),e("div",kt,[(u(!0),h(G,null,H(c(d).paymentGateways,p=>(u(),h("label",{key:p.id,for:p.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer"},[w(e("input",{"onUpdate:modelValue":l[4]||(l[4]=M=>_.value=M),id:p.name,name:"paymentGateway",type:"radio",class:"sr-only",value:p.name},null,8,Pt),[[B,_.value]]),e("div",Nt,[e("img",{src:p.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,St)])],8,Ct))),128))])])):P("",!0)]),_:1})])]),y(Ae,{note:m.value,paymentMethod:r.value},null,8,["note","paymentMethod"])])])}}},Ut=A(Mt,[["__scopeId","data-v-6293e1c1"]]);export{Ut as default};
