import{g as Ms}from"./_commonjsHelpers-BosuxZz1.js";import{c as F,o as X,a as L,_ as we,s as jt,t as N,x as vt,F as Tt,r as xt,E as Ds,u as Se,q as Ce,d as ht,k as _e,L as ve,m as _t,g as lt,B as Rs,C as $s,f as be,V as Hs,a2 as Bs,j as Ns,p as Xs,e as Gs,b as pt,a8 as js,w as Fs,h as Ws}from"./app-BaRC1mni.js";import{_ as Us}from"./AuthPageHeader-C7C7h8HX.js";function qs(h,t){return X(),F("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[L("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"})])}var Te={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(h,t){(function(r,o){h.exports=o()})(window,function(){return function(n){var r={};function o(l){if(r[l])return r[l].exports;var c=r[l]={i:l,l:!1,exports:{}};return n[l].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=n,o.c=r,o.d=function(l,c,d){o.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:d})},o.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},o.t=function(l,c){if(c&1&&(l=o(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var d=Object.create(null);if(o.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var g in l)o.d(d,g,(function(b){return l[b]}).bind(null,g));return d},o.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return o.d(c,"a",c),c},o.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},o.p="",o(o.s=2)}([function(n,r,o){var l=this&&this.__extends||function(){var T=function(v,y){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,E){I.__proto__=E}||function(I,E){for(var A in E)E.hasOwnProperty(A)&&(I[A]=E[A])},T(v,y)};return function(v,y){T(v,y);function I(){this.constructor=v}v.prototype=y===null?Object.create(y):(I.prototype=y.prototype,new I)}}();Object.defineProperty(r,"__esModule",{value:!0});var c=256,d=function(){function T(v){v===void 0&&(v="="),this._paddingCharacter=v}return T.prototype.encodedLength=function(v){return this._paddingCharacter?(v+2)/3*4|0:(v*8+5)/6|0},T.prototype.encode=function(v){for(var y="",I=0;I<v.length-2;I+=3){var E=v[I]<<16|v[I+1]<<8|v[I+2];y+=this._encodeByte(E>>>3*6&63),y+=this._encodeByte(E>>>2*6&63),y+=this._encodeByte(E>>>1*6&63),y+=this._encodeByte(E>>>0*6&63)}var A=v.length-I;if(A>0){var E=v[I]<<16|(A===2?v[I+1]<<8:0);y+=this._encodeByte(E>>>3*6&63),y+=this._encodeByte(E>>>2*6&63),A===2?y+=this._encodeByte(E>>>1*6&63):y+=this._paddingCharacter||"",y+=this._paddingCharacter||""}return y},T.prototype.maxDecodedLength=function(v){return this._paddingCharacter?v/4*3|0:(v*6+7)/8|0},T.prototype.decodedLength=function(v){return this.maxDecodedLength(v.length-this._getPaddingLength(v))},T.prototype.decode=function(v){if(v.length===0)return new Uint8Array(0);for(var y=this._getPaddingLength(v),I=v.length-y,E=new Uint8Array(this.maxDecodedLength(I)),A=0,B=0,Y=0,W=0,U=0,V=0,Z=0;B<I-4;B+=4)W=this._decodeChar(v.charCodeAt(B+0)),U=this._decodeChar(v.charCodeAt(B+1)),V=this._decodeChar(v.charCodeAt(B+2)),Z=this._decodeChar(v.charCodeAt(B+3)),E[A++]=W<<2|U>>>4,E[A++]=U<<4|V>>>2,E[A++]=V<<6|Z,Y|=W&c,Y|=U&c,Y|=V&c,Y|=Z&c;if(B<I-1&&(W=this._decodeChar(v.charCodeAt(B)),U=this._decodeChar(v.charCodeAt(B+1)),E[A++]=W<<2|U>>>4,Y|=W&c,Y|=U&c),B<I-2&&(V=this._decodeChar(v.charCodeAt(B+2)),E[A++]=U<<4|V>>>2,Y|=V&c),B<I-3&&(Z=this._decodeChar(v.charCodeAt(B+3)),E[A++]=V<<6|Z,Y|=Z&c),Y!==0)throw new Error("Base64Coder: incorrect characters for decoding");return E},T.prototype._encodeByte=function(v){var y=v;return y+=65,y+=25-v>>>8&6,y+=51-v>>>8&-75,y+=61-v>>>8&-15,y+=62-v>>>8&3,String.fromCharCode(y)},T.prototype._decodeChar=function(v){var y=c;return y+=(42-v&v-44)>>>8&-256+v-43+62,y+=(46-v&v-48)>>>8&-256+v-47+63,y+=(47-v&v-58)>>>8&-256+v-48+52,y+=(64-v&v-91)>>>8&-256+v-65+0,y+=(96-v&v-123)>>>8&-256+v-97+26,y},T.prototype._getPaddingLength=function(v){var y=0;if(this._paddingCharacter){for(var I=v.length-1;I>=0&&v[I]===this._paddingCharacter;I--)y++;if(v.length<4||y>2)throw new Error("Base64Coder: incorrect padding")}return y},T}();r.Coder=d;var g=new d;function b(T){return g.encode(T)}r.encode=b;function w(T){return g.decode(T)}r.decode=w;var m=function(T){l(v,T);function v(){return T!==null&&T.apply(this,arguments)||this}return v.prototype._encodeByte=function(y){var I=y;return I+=65,I+=25-y>>>8&6,I+=51-y>>>8&-75,I+=61-y>>>8&-13,I+=62-y>>>8&49,String.fromCharCode(I)},v.prototype._decodeChar=function(y){var I=c;return I+=(44-y&y-46)>>>8&-256+y-45+62,I+=(94-y&y-96)>>>8&-256+y-95+63,I+=(47-y&y-58)>>>8&-256+y-48+52,I+=(64-y&y-91)>>>8&-256+y-65+0,I+=(96-y&y-123)>>>8&-256+y-97+26,I},v}(d);r.URLSafeCoder=m;var f=new m;function C(T){return f.encode(T)}r.encodeURLSafe=C;function _(T){return f.decode(T)}r.decodeURLSafe=_,r.encodedLength=function(T){return g.encodedLength(T)},r.maxDecodedLength=function(T){return g.maxDecodedLength(T)},r.decodedLength=function(T){return g.decodedLength(T)}},function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0});var l="utf8: invalid string",c="utf8: invalid source encoding";function d(w){for(var m=new Uint8Array(g(w)),f=0,C=0;C<w.length;C++){var _=w.charCodeAt(C);_<128?m[f++]=_:_<2048?(m[f++]=192|_>>6,m[f++]=128|_&63):_<55296?(m[f++]=224|_>>12,m[f++]=128|_>>6&63,m[f++]=128|_&63):(C++,_=(_&1023)<<10,_|=w.charCodeAt(C)&1023,_+=65536,m[f++]=240|_>>18,m[f++]=128|_>>12&63,m[f++]=128|_>>6&63,m[f++]=128|_&63)}return m}r.encode=d;function g(w){for(var m=0,f=0;f<w.length;f++){var C=w.charCodeAt(f);if(C<128)m+=1;else if(C<2048)m+=2;else if(C<55296)m+=3;else if(C<=57343){if(f>=w.length-1)throw new Error(l);f++,m+=4}else throw new Error(l)}return m}r.encodedLength=g;function b(w){for(var m=[],f=0;f<w.length;f++){var C=w[f];if(C&128){var _=void 0;if(C<224){if(f>=w.length)throw new Error(c);var T=w[++f];if((T&192)!==128)throw new Error(c);C=(C&31)<<6|T&63,_=128}else if(C<240){if(f>=w.length-1)throw new Error(c);var T=w[++f],v=w[++f];if((T&192)!==128||(v&192)!==128)throw new Error(c);C=(C&15)<<12|(T&63)<<6|v&63,_=2048}else if(C<248){if(f>=w.length-2)throw new Error(c);var T=w[++f],v=w[++f],y=w[++f];if((T&192)!==128||(v&192)!==128||(y&192)!==128)throw new Error(c);C=(C&15)<<18|(T&63)<<12|(v&63)<<6|y&63,_=65536}else throw new Error(c);if(C<_||C>=55296&&C<=57343)throw new Error(c);if(C>=65536){if(C>1114111)throw new Error(c);C-=65536,m.push(String.fromCharCode(55296|C>>10)),C=56320|C&1023}}m.push(String.fromCharCode(C))}return m.join("")}r.decode=b},function(n,r,o){n.exports=o(3).default},function(n,r,o){o.r(r);class l{constructor(e,i){this.lastId=0,this.prefix=e,this.name=i}create(e){this.lastId++;var i=this.lastId,a=this.prefix+i,u=this.name+"["+i+"]",p=!1,S=function(){p||(e.apply(null,arguments),p=!0)};return this[i]=S,{number:i,id:a,name:u,callback:S}}remove(e){delete this[e.number]}}var c=new l("_pusher_script_","Pusher.ScriptReceivers"),d={VERSION:"8.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},g=d;class b{constructor(e){this.options=e,this.receivers=e.receivers||c,this.loading={}}load(e,i,a){var u=this;if(u.loading[e]&&u.loading[e].length>0)u.loading[e].push(a);else{u.loading[e]=[a];var p=P.createScriptRequest(u.getPath(e,i)),S=u.receivers.create(function(x){if(u.receivers.remove(S),u.loading[e]){var O=u.loading[e];delete u.loading[e];for(var z=function($){$||p.cleanup()},M=0;M<O.length;M++)O[M](x,z)}});p.send(S)}}getRoot(e){var i,a=P.getDocument().location.protocol;return e&&e.useTLS||a==="https:"?i=this.options.cdn_https:i=this.options.cdn_http,i.replace(/\/*$/,"")+"/"+this.options.version}getPath(e,i){return this.getRoot(i)+"/"+e+this.options.suffix+".js"}}var w=new l("_pusher_dependencies","Pusher.DependenciesReceivers"),m=new b({cdn_http:g.cdn_http,cdn_https:g.cdn_https,version:g.VERSION,suffix:g.dependency_suffix,receivers:w});const f={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var _={buildLogSuffix:function(s){const e="See:",i=f.urls[s];if(!i)return"";let a;return i.fullUrl?a=i.fullUrl:i.path&&(a=f.baseUrl+i.path),a?`${e} ${a}`:""}},T;(function(s){s.UserAuthentication="user-authentication",s.ChannelAuthorization="channel-authorization"})(T||(T={}));class v extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class y extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class I extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class E extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class A extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class B extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class Y extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class W extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class U extends Error{constructor(e,i){super(i),this.status=e,Object.setPrototypeOf(this,new.target.prototype)}}var Z=function(s,e,i,a,u){const p=P.createXHR();p.open("POST",i.endpoint,!0),p.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var S in i.headers)p.setRequestHeader(S,i.headers[S]);if(i.headersProvider!=null){let x=i.headersProvider();for(var S in x)p.setRequestHeader(S,x[S])}return p.onreadystatechange=function(){if(p.readyState===4)if(p.status===200){let x,O=!1;try{x=JSON.parse(p.responseText),O=!0}catch{u(new U(200,`JSON returned from ${a.toString()} endpoint was invalid, yet status code was 200. Data was: ${p.responseText}`),null)}O&&u(null,x)}else{let x="";switch(a){case T.UserAuthentication:x=_.buildLogSuffix("authenticationEndpoint");break;case T.ChannelAuthorization:x=`Clients must be authorized to join private or presence channels. ${_.buildLogSuffix("authorizationEndpoint")}`;break}u(new U(p.status,`Unable to retrieve auth string from ${a.toString()} endpoint - received status: ${p.status} from ${i.endpoint}. ${x}`),null)}},p.send(e),p};function st(s){return Oe(Ie(s))}var et=String.fromCharCode,ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ot=function(s){var e=s.charCodeAt(0);return e<128?s:e<2048?et(192|e>>>6)+et(128|e&63):et(224|e>>>12&15)+et(128|e>>>6&63)+et(128|e&63)},Ie=function(s){return s.replace(/[^\x00-\x7F]/g,Ot)},ke=function(s){var e=[0,2,1][s.length%3],i=s.charCodeAt(0)<<16|(s.length>1?s.charCodeAt(1):0)<<8|(s.length>2?s.charCodeAt(2):0),a=[ct.charAt(i>>>18),ct.charAt(i>>>12&63),e>=2?"=":ct.charAt(i>>>6&63),e>=1?"=":ct.charAt(i&63)];return a.join("")},Oe=window.btoa||function(s){return s.replace(/[\s\S]{1,3}/g,ke)};class Pe{constructor(e,i,a,u){this.clear=i,this.timer=e(()=>{this.timer&&(this.timer=u(this.timer))},a)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var Ft=Pe;function Le(s){window.clearTimeout(s)}function ze(s){window.clearInterval(s)}class nt extends Ft{constructor(e,i){super(setTimeout,Le,e,function(a){return i(),null})}}class Ee extends Ft{constructor(e,i){super(setInterval,ze,e,function(a){return i(),a})}}var Ae={now(){return Date.now?Date.now():new Date().valueOf()},defer(s){return new nt(0,s)},method(s,...e){var i=Array.prototype.slice.call(arguments,1);return function(a){return a[s].apply(a,i.concat(arguments))}}},j=Ae;function q(s,...e){for(var i=0;i<e.length;i++){var a=e[i];for(var u in a)a[u]&&a[u].constructor&&a[u].constructor===Object?s[u]=q(s[u]||{},a[u]):s[u]=a[u]}return s}function Me(){for(var s=["Pusher"],e=0;e<arguments.length;e++)typeof arguments[e]=="string"?s.push(arguments[e]):s.push(bt(arguments[e]));return s.join(" : ")}function Wt(s,e){var i=Array.prototype.indexOf;if(s===null)return-1;if(i&&s.indexOf===i)return s.indexOf(e);for(var a=0,u=s.length;a<u;a++)if(s[a]===e)return a;return-1}function J(s,e){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(s[i],i,s)}function Ut(s){var e=[];return J(s,function(i,a){e.push(a)}),e}function De(s){var e=[];return J(s,function(i){e.push(i)}),e}function dt(s,e,i){for(var a=0;a<s.length;a++)e.call(i||window,s[a],a,s)}function qt(s,e){for(var i=[],a=0;a<s.length;a++)i.push(e(s[a],a,s,i));return i}function Re(s,e){var i={};return J(s,function(a,u){i[u]=e(a)}),i}function Yt(s,e){e=e||function(u){return!!u};for(var i=[],a=0;a<s.length;a++)e(s[a],a,s,i)&&i.push(s[a]);return i}function Vt(s,e){var i={};return J(s,function(a,u){(e&&e(a,u,s,i)||a)&&(i[u]=a)}),i}function $e(s){var e=[];return J(s,function(i,a){e.push([a,i])}),e}function Zt(s,e){for(var i=0;i<s.length;i++)if(e(s[i],i,s))return!0;return!1}function He(s,e){for(var i=0;i<s.length;i++)if(!e(s[i],i,s))return!1;return!0}function Be(s){return Re(s,function(e){return typeof e=="object"&&(e=bt(e)),encodeURIComponent(st(e.toString()))})}function Ne(s){var e=Vt(s,function(a){return a!==void 0}),i=qt($e(Be(e)),j.method("join","=")).join("&");return i}function Xe(s){var e=[],i=[];return function a(u,p){var S,x,O;switch(typeof u){case"object":if(!u)return null;for(S=0;S<e.length;S+=1)if(e[S]===u)return{$ref:i[S]};if(e.push(u),i.push(p),Object.prototype.toString.apply(u)==="[object Array]")for(O=[],S=0;S<u.length;S+=1)O[S]=a(u[S],p+"["+S+"]");else{O={};for(x in u)Object.prototype.hasOwnProperty.call(u,x)&&(O[x]=a(u[x],p+"["+JSON.stringify(x)+"]"))}return O;case"number":case"string":case"boolean":return u}}(s,"$")}function bt(s){try{return JSON.stringify(s)}catch{return JSON.stringify(Xe(s))}}class Ge{constructor(){this.globalLog=e=>{window.console&&window.console.log&&window.console.log(e)}}debug(...e){this.log(this.globalLog,e)}warn(...e){this.log(this.globalLogWarn,e)}error(...e){this.log(this.globalLogError,e)}globalLogWarn(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)}globalLogError(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)}log(e,...i){var a=Me.apply(this,arguments);Bt.log?Bt.log(a):Bt.logToConsole&&e.bind(this)(a)}}var R=new Ge,je=function(s,e,i,a,u){(i.headers!==void 0||i.headersProvider!=null)&&R.warn(`To send headers with the ${a.toString()} request, you must use AJAX, rather than JSONP.`);var p=s.nextAuthCallbackID.toString();s.nextAuthCallbackID++;var S=s.getDocument(),x=S.createElement("script");s.auth_callbacks[p]=function(M){u(null,M)};var O="Pusher.auth_callbacks['"+p+"']";x.src=i.endpoint+"?callback="+encodeURIComponent(O)+"&"+e;var z=S.getElementsByTagName("head")[0]||S.documentElement;z.insertBefore(x,z.firstChild)},Fe=je;class We{constructor(e){this.src=e}send(e){var i=this,a="Error loading "+i.src;i.script=document.createElement("script"),i.script.id=e.id,i.script.src=i.src,i.script.type="text/javascript",i.script.charset="UTF-8",i.script.addEventListener?(i.script.onerror=function(){e.callback(a)},i.script.onload=function(){e.callback(null)}):i.script.onreadystatechange=function(){(i.script.readyState==="loaded"||i.script.readyState==="complete")&&e.callback(null)},i.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(i.errorScript=document.createElement("script"),i.errorScript.id=e.id+"_error",i.errorScript.text=e.name+"('"+a+"');",i.script.async=i.errorScript.async=!1):i.script.async=!0;var u=document.getElementsByTagName("head")[0];u.insertBefore(i.script,u.firstChild),i.errorScript&&u.insertBefore(i.errorScript,i.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class Ue{constructor(e,i){this.url=e,this.data=i}send(e){if(!this.request){var i=Ne(this.data),a=this.url+"/"+e.number+"?"+i;this.request=P.createScriptRequest(a),this.request.send(e)}}cleanup(){this.request&&this.request.cleanup()}}var qe=function(s,e){return function(i,a){var u="http"+(e?"s":"")+"://",p=u+(s.host||s.options.host)+s.options.path,S=P.createJSONPRequest(p,i),x=P.ScriptReceivers.create(function(O,z){c.remove(x),S.cleanup(),z&&z.host&&(s.host=z.host),a&&a(O,z)});S.send(x)}},Ye={name:"jsonp",getAgent:qe},Ve=Ye;function Pt(s,e,i){var a=s+(e.useTLS?"s":""),u=e.useTLS?e.hostTLS:e.hostNonTLS;return a+"://"+u+i}function Lt(s,e){var i="/app/"+s,a="?protocol="+g.PROTOCOL+"&client=js&version="+g.VERSION+(e?"&"+e:"");return i+a}var Ze={getInitial:function(s,e){var i=(e.httpPath||"")+Lt(s,"flash=false");return Pt("ws",e,i)}},Je={getInitial:function(s,e){var i=(e.httpPath||"/pusher")+Lt(s);return Pt("http",e,i)}},Ke={getInitial:function(s,e){return Pt("http",e,e.httpPath||"/pusher")},getPath:function(s,e){return Lt(s)}};class Qe{constructor(){this._callbacks={}}get(e){return this._callbacks[zt(e)]}add(e,i,a){var u=zt(e);this._callbacks[u]=this._callbacks[u]||[],this._callbacks[u].push({fn:i,context:a})}remove(e,i,a){if(!e&&!i&&!a){this._callbacks={};return}var u=e?[zt(e)]:Ut(this._callbacks);i||a?this.removeCallback(u,i,a):this.removeAllCallbacks(u)}removeCallback(e,i,a){dt(e,function(u){this._callbacks[u]=Yt(this._callbacks[u]||[],function(p){return i&&i!==p.fn||a&&a!==p.context}),this._callbacks[u].length===0&&delete this._callbacks[u]},this)}removeAllCallbacks(e){dt(e,function(i){delete this._callbacks[i]},this)}}function zt(s){return"_"+s}class K{constructor(e){this.callbacks=new Qe,this.global_callbacks=[],this.failThrough=e}bind(e,i,a){return this.callbacks.add(e,i,a),this}bind_global(e){return this.global_callbacks.push(e),this}unbind(e,i,a){return this.callbacks.remove(e,i,a),this}unbind_global(e){return e?(this.global_callbacks=Yt(this.global_callbacks||[],i=>i!==e),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(e,i,a){for(var u=0;u<this.global_callbacks.length;u++)this.global_callbacks[u](e,i);var p=this.callbacks.get(e),S=[];if(a?S.push(i,a):i&&S.push(i),p&&p.length>0)for(var u=0;u<p.length;u++)p[u].fn.apply(p[u].context||window,S);else this.failThrough&&this.failThrough(e,i);return this}}class ti extends K{constructor(e,i,a,u,p){super(),this.initialize=P.transportConnectionInitializer,this.hooks=e,this.name=i,this.priority=a,this.key=u,this.options=p,this.state="new",this.timeline=p.timeline,this.activityTimeout=p.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(i){return j.defer(()=>{this.onError(i),this.changeState("closed")}),!1}return this.bindListeners(),R.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(e){return this.state==="open"?(j.defer(()=>{this.socket&&this.socket.send(e)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))}onClose(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(e){this.emit("message",e)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=e=>{this.onError(e)},this.socket.onclose=e=>{this.onClose(e)},this.socket.onmessage=e=>{this.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(e,i){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:i})),this.emit(e,i)}buildTimelineMessage(e){return q({cid:this.id},e)}}class ut{constructor(e){this.hooks=e}isSupported(e){return this.hooks.isSupported(e)}createConnection(e,i,a,u){return new ti(this.hooks,e,i,a,u)}}var ei=new ut({urls:Ze,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!P.getWebSocketAPI()},isSupported:function(){return!!P.getWebSocketAPI()},getSocket:function(s){return P.createWebSocket(s)}}),Jt={urls:Je,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Kt=q({getSocket:function(s){return P.HTTPFactory.createStreamingSocket(s)}},Jt),Qt=q({getSocket:function(s){return P.HTTPFactory.createPollingSocket(s)}},Jt),te={isSupported:function(){return P.isXHRSupported()}},ii=new ut(q({},Kt,te)),si=new ut(q({},Qt,te)),ni={ws:ei,xhr_streaming:ii,xhr_polling:si},yt=ni,ri=new ut({file:"sockjs",urls:Ke,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(s,e){return new window.SockJS(s,null,{js_path:m.getPath("sockjs",{useTLS:e.useTLS}),ignore_null_origin:e.ignoreNullOrigin})},beforeOpen:function(s,e){s.send(JSON.stringify({path:e}))}}),ee={isSupported:function(s){var e=P.isXDRSupported(s.useTLS);return e}},oi=new ut(q({},Kt,ee)),ai=new ut(q({},Qt,ee));yt.xdr_streaming=oi,yt.xdr_polling=ai,yt.sockjs=ri;var li=yt;class hi extends K{constructor(){super();var e=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var ci=new hi;class ui{constructor(e,i,a){this.manager=e,this.transport=i,this.minPingDelay=a.minPingDelay,this.maxPingDelay=a.maxPingDelay,this.pingDelay=void 0}createConnection(e,i,a,u){u=q({},u,{activityTimeout:this.pingDelay});var p=this.transport.createConnection(e,i,a,u),S=null,x=function(){p.unbind("open",x),p.bind("closed",O),S=j.now()},O=z=>{if(p.unbind("closed",O),z.code===1002||z.code===1003)this.manager.reportDeath();else if(!z.wasClean&&S){var M=j.now()-S;M<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(M/2,this.minPingDelay))}};return p.bind("open",x),p}isSupported(e){return this.manager.isAlive()&&this.transport.isSupported(e)}}const ie={decodeMessage:function(s){try{var e=JSON.parse(s.data),i=e.data;if(typeof i=="string")try{i=JSON.parse(e.data)}catch{}var a={event:e.event,channel:e.channel,data:i};return e.user_id&&(a.user_id=e.user_id),a}catch(u){throw{type:"MessageParseError",error:u,data:s.data}}},encodeMessage:function(s){return JSON.stringify(s)},processHandshake:function(s){var e=ie.decodeMessage(s);if(e.event==="pusher:connection_established"){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:e.data.activity_timeout*1e3}}else{if(e.event==="pusher:error")return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"}},getCloseAction:function(s){return s.code<4e3?s.code>=1002&&s.code<=1004?"backoff":null:s.code===4e3?"tls_only":s.code<4100?"refused":s.code<4200?"backoff":s.code<4300?"retry":"refused"},getCloseError:function(s){return s.code!==1e3&&s.code!==1001?{type:"PusherError",data:{code:s.code,message:s.reason||s.message}}:null}};var rt=ie;class di extends K{constructor(e,i){super(),this.id=e,this.transport=i,this.activityTimeout=i.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(e){return this.transport.send(e)}send_event(e,i,a){var u={event:e,data:i};return a&&(u.channel=a),R.debug("Event sent",u),this.send(rt.encodeMessage(u))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var e={message:a=>{var u;try{u=rt.decodeMessage(a)}catch(p){this.emit("error",{type:"MessageParseError",error:p,data:a.data})}if(u!==void 0){switch(R.debug("Event recd",u),u.event){case"pusher:error":this.emit("error",{type:"PusherError",data:u.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",u)}},activity:()=>{this.emit("activity")},error:a=>{this.emit("error",a)},closed:a=>{i(),a&&a.code&&this.handleCloseEvent(a),this.transport=null,this.emit("closed")}},i=()=>{J(e,(a,u)=>{this.transport.unbind(u,a)})};J(e,(a,u)=>{this.transport.bind(u,a)})}handleCloseEvent(e){var i=rt.getCloseAction(e),a=rt.getCloseError(e);a&&this.emit("error",a),i&&this.emit(i,{action:i,error:a})}}class gi{constructor(e,i){this.transport=e,this.callback=i,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=e=>{this.unbindListeners();var i;try{i=rt.processHandshake(e)}catch(a){this.finish("error",{error:a}),this.transport.close();return}i.action==="connected"?this.finish("connected",{connection:new di(i.id,this.transport),activityTimeout:i.activityTimeout}):(this.finish(i.action,{error:i.error}),this.transport.close())},this.onClosed=e=>{this.unbindListeners();var i=rt.getCloseAction(e)||"backoff",a=rt.getCloseError(e);this.finish(i,{error:a})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(e,i){this.callback(q({transport:this.transport,action:e},i))}}class fi{constructor(e,i){this.timeline=e,this.options=i||{}}send(e,i){this.timeline.isEmpty()||this.timeline.send(P.TimelineTransport.getAgent(this,e),i)}}class Et extends K{constructor(e,i){super(function(a,u){R.debug("No callbacks on "+e+" for "+a)}),this.name=e,this.pusher=i,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(e,i){return i(null,{auth:""})}trigger(e,i){if(e.indexOf("client-")!==0)throw new v("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var a=_.buildLogSuffix("triggeringClientEvents");R.warn(`Client event triggered before channel 'subscription_succeeded' event . ${a}`)}return this.pusher.send_event(e,i,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(e){var i=e.event,a=e.data;if(i==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(e);else if(i==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(e);else if(i.indexOf("pusher_internal:")!==0){var u={};this.emit(i,a,u)}}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)}handleSubscriptionCountEvent(e){e.data.subscription_count&&(this.subscriptionCount=e.data.subscription_count),this.emit("pusher:subscription_count",e.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(e,i)=>{e?(this.subscriptionPending=!1,R.error(e.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:e.message},e instanceof U?{status:e.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:i.auth,channel_data:i.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class At extends Et{authorize(e,i){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:e},i)}}class pi{constructor(){this.reset()}get(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null}each(e){J(this.members,(i,a)=>{e(this.get(a))})}setMyID(e){this.myID=e}onSubscription(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)}addMember(e){return this.get(e.user_id)===null&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)}removeMember(e){var i=this.get(e.user_id);return i&&(delete this.members[e.user_id],this.count--),i}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var mi=function(s,e,i,a){function u(p){return p instanceof i?p:new i(function(S){S(p)})}return new(i||(i=Promise))(function(p,S){function x(M){try{z(a.next(M))}catch($){S($)}}function O(M){try{z(a.throw(M))}catch($){S($)}}function z(M){M.done?p(M.value):u(M.value).then(x,O)}z((a=a.apply(s,e||[])).next())})};class vi extends At{constructor(e,i){super(e,i),this.members=new pi}authorize(e,i){super.authorize(e,(a,u)=>mi(this,void 0,void 0,function*(){if(!a)if(u=u,u.channel_data!=null){var p=JSON.parse(u.channel_data);this.members.setMyID(p.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let S=_.buildLogSuffix("authorizationEndpoint");R.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${S}, or the user should be signed in.`),i("Invalid auth response");return}i(a,u)}))}handleEvent(e){var i=e.event;if(i.indexOf("pusher_internal:")===0)this.handleInternalEvent(e);else{var a=e.data,u={};e.user_id&&(u.user_id=e.user_id),this.emit(i,a,u)}}handleInternalEvent(e){var i=e.event,a=e.data;switch(i){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(e);break;case"pusher_internal:member_added":var u=this.members.addMember(a);this.emit("pusher:member_added",u);break;case"pusher_internal:member_removed":var p=this.members.removeMember(a);p&&this.emit("pusher:member_removed",p);break}}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var bi=o(1),Mt=o(0);class yi extends At{constructor(e,i,a){super(e,i),this.key=null,this.nacl=a}authorize(e,i){super.authorize(e,(a,u)=>{if(a){i(a,u);return}let p=u.shared_secret;if(!p){i(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Mt.decode)(p),delete u.shared_secret,i(null,u)})}trigger(e,i){throw new B("Client events are not currently supported for encrypted channels")}handleEvent(e){var i=e.event,a=e.data;if(i.indexOf("pusher_internal:")===0||i.indexOf("pusher:")===0){super.handleEvent(e);return}this.handleEncryptedEvent(i,a)}handleEncryptedEvent(e,i){if(!this.key){R.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!i.ciphertext||!i.nonce){R.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+i);return}let a=Object(Mt.decode)(i.ciphertext);if(a.length<this.nacl.secretbox.overheadLength){R.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${a.length}`);return}let u=Object(Mt.decode)(i.nonce);if(u.length<this.nacl.secretbox.nonceLength){R.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${u.length}`);return}let p=this.nacl.secretbox.open(a,u,this.key);if(p===null){R.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(S,x)=>{if(S){R.error(`Failed to make a request to the authEndpoint: ${x}. Unable to fetch new key, so dropping encrypted event`);return}if(p=this.nacl.secretbox.open(a,u,this.key),p===null){R.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(e,this.getDataToEmit(p))});return}this.emit(e,this.getDataToEmit(p))}getDataToEmit(e){let i=Object(bi.decode)(e);try{return JSON.parse(i)}catch{return i}}}class wi extends K{constructor(e,i){super(),this.state="initialized",this.connection=null,this.key=e,this.options=i,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var a=P.getNetwork();a.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),a.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(e){return this.connection?this.connection.send(e):!1}send_event(e,i,a){return this.connection?this.connection.send_event(e,i,a):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var e=(i,a)=>{i?this.runner=this.strategy.connect(0,e):a.action==="error"?(this.emit("error",{type:"HandshakeError",error:a.error}),this.timeline.error({handshakeError:a.error})):(this.abortConnecting(),this.handshakeCallbacks[a.action](a))};this.runner=this.strategy.connect(0,e)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var e=this.abandonConnection();e.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(e){this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new nt(e||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new nt(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new nt(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new nt(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(e){return q({},e,{message:i=>{this.resetActivityCheck(),this.emit("message",i)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:i=>{this.emit("error",i)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(e){return q({},e,{connected:i=>{this.activityTimeout=Math.min(this.options.activityTimeout,i.activityTimeout,i.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(i.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let e=i=>a=>{a.error&&this.emit("error",{type:"WebSocketError",error:a.error}),i(a)};return{tls_only:e(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:e(()=>{this.disconnect()}),backoff:e(()=>{this.retryIn(1e3)}),retry:e(()=>{this.retryIn(0)})}}setConnection(e){this.connection=e;for(var i in this.connectionCallbacks)this.connection.bind(i,this.connectionCallbacks[i]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var e in this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var i=this.connection;return this.connection=null,i}}updateState(e,i){var a=this.state;if(this.state=e,a!==e){var u=e;u==="connected"&&(u+=" with new socket ID "+i.socket_id),R.debug("State changed",a+" -> "+u),this.timeline.info({state:e,params:i}),this.emit("state_change",{previous:a,current:e}),this.emit(e,i)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class Si{constructor(){this.channels={}}add(e,i){return this.channels[e]||(this.channels[e]=Ci(e,i)),this.channels[e]}all(){return De(this.channels)}find(e){return this.channels[e]}remove(e){var i=this.channels[e];return delete this.channels[e],i}disconnect(){J(this.channels,function(e){e.disconnect()})}}function Ci(s,e){if(s.indexOf("private-encrypted-")===0){if(e.config.nacl)return Q.createEncryptedChannel(s,e,e.config.nacl);let i="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",a=_.buildLogSuffix("encryptedChannelSupport");throw new B(`${i}. ${a}`)}else{if(s.indexOf("private-")===0)return Q.createPrivateChannel(s,e);if(s.indexOf("presence-")===0)return Q.createPresenceChannel(s,e);if(s.indexOf("#")===0)throw new y('Cannot create a channel with name "'+s+'".');return Q.createChannel(s,e)}}var _i={createChannels(){return new Si},createConnectionManager(s,e){return new wi(s,e)},createChannel(s,e){return new Et(s,e)},createPrivateChannel(s,e){return new At(s,e)},createPresenceChannel(s,e){return new vi(s,e)},createEncryptedChannel(s,e,i){return new yi(s,e,i)},createTimelineSender(s,e){return new fi(s,e)},createHandshake(s,e){return new gi(s,e)},createAssistantToTheTransportManager(s,e,i){return new ui(s,e,i)}},Q=_i;class se{constructor(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}getAssistant(e){return Q.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class ot{constructor(e,i){this.strategies=e,this.loop=!!i.loop,this.failFast=!!i.failFast,this.timeout=i.timeout,this.timeoutLimit=i.timeoutLimit}isSupported(){return Zt(this.strategies,j.method("isSupported"))}connect(e,i){var a=this.strategies,u=0,p=this.timeout,S=null,x=(O,z)=>{z?i(null,z):(u=u+1,this.loop&&(u=u%a.length),u<a.length?(p&&(p=p*2,this.timeoutLimit&&(p=Math.min(p,this.timeoutLimit))),S=this.tryStrategy(a[u],e,{timeout:p,failFast:this.failFast},x)):i(!0))};return S=this.tryStrategy(a[u],e,{timeout:p,failFast:this.failFast},x),{abort:function(){S.abort()},forceMinPriority:function(O){e=O,S&&S.forceMinPriority(O)}}}tryStrategy(e,i,a,u){var p=null,S=null;return a.timeout>0&&(p=new nt(a.timeout,function(){S.abort(),u(!0)})),S=e.connect(i,function(x,O){x&&p&&p.isRunning()&&!a.failFast||(p&&p.ensureAborted(),u(x,O))}),{abort:function(){p&&p.ensureAborted(),S.abort()},forceMinPriority:function(x){S.forceMinPriority(x)}}}}class Dt{constructor(e){this.strategies=e}isSupported(){return Zt(this.strategies,j.method("isSupported"))}connect(e,i){return Ti(this.strategies,e,function(a,u){return function(p,S){if(u[a].error=p,p){xi(u)&&i(!0);return}dt(u,function(x){x.forceMinPriority(S.transport.priority)}),i(null,S)}})}}function Ti(s,e,i){var a=qt(s,function(u,p,S,x){return u.connect(e,i(p,x))});return{abort:function(){dt(a,Ii)},forceMinPriority:function(u){dt(a,function(p){p.forceMinPriority(u)})}}}function xi(s){return He(s,function(e){return!!e.error})}function Ii(s){!s.error&&!s.aborted&&(s.abort(),s.aborted=!0)}class ki{constructor(e,i,a){this.strategy=e,this.transports=i,this.ttl=a.ttl||1800*1e3,this.usingTLS=a.useTLS,this.timeline=a.timeline}isSupported(){return this.strategy.isSupported()}connect(e,i){var a=this.usingTLS,u=Oi(a),p=u&&u.cacheSkipCount?u.cacheSkipCount:0,S=[this.strategy];if(u&&u.timestamp+this.ttl>=j.now()){var x=this.transports[u.transport];x&&(["ws","wss"].includes(u.transport)||p>3?(this.timeline.info({cached:!0,transport:u.transport,latency:u.latency}),S.push(new ot([x],{timeout:u.latency*2+1e3,failFast:!0}))):p++)}var O=j.now(),z=S.pop().connect(e,function M($,Ct){$?(ne(a),S.length>0?(O=j.now(),z=S.pop().connect(e,M)):i($)):(Pi(a,Ct.transport.name,j.now()-O,p),i(null,Ct))});return{abort:function(){z.abort()},forceMinPriority:function(M){e=M,z&&z.forceMinPriority(M)}}}}function Rt(s){return"pusherTransport"+(s?"TLS":"NonTLS")}function Oi(s){var e=P.getLocalStorage();if(e)try{var i=e[Rt(s)];if(i)return JSON.parse(i)}catch{ne(s)}return null}function Pi(s,e,i,a){var u=P.getLocalStorage();if(u)try{u[Rt(s)]=bt({timestamp:j.now(),transport:e,latency:i,cacheSkipCount:a})}catch{}}function ne(s){var e=P.getLocalStorage();if(e)try{delete e[Rt(s)]}catch{}}class wt{constructor(e,{delay:i}){this.strategy=e,this.options={delay:i}}isSupported(){return this.strategy.isSupported()}connect(e,i){var a=this.strategy,u,p=new nt(this.options.delay,function(){u=a.connect(e,i)});return{abort:function(){p.ensureAborted(),u&&u.abort()},forceMinPriority:function(S){e=S,u&&u.forceMinPriority(S)}}}}class gt{constructor(e,i,a){this.test=e,this.trueBranch=i,this.falseBranch=a}isSupported(){var e=this.test()?this.trueBranch:this.falseBranch;return e.isSupported()}connect(e,i){var a=this.test()?this.trueBranch:this.falseBranch;return a.connect(e,i)}}class Li{constructor(e){this.strategy=e}isSupported(){return this.strategy.isSupported()}connect(e,i){var a=this.strategy.connect(e,function(u,p){p&&a.abort(),i(u,p)});return a}}function ft(s){return function(){return s.isSupported()}}var zi=function(s,e,i){var a={};function u(pe,Ls,zs,Es,As){var me=i(s,pe,Ls,zs,Es,As);return a[pe]=me,me}var p=Object.assign({},e,{hostNonTLS:s.wsHost+":"+s.wsPort,hostTLS:s.wsHost+":"+s.wssPort,httpPath:s.wsPath}),S=Object.assign({},p,{useTLS:!0}),x=Object.assign({},e,{hostNonTLS:s.httpHost+":"+s.httpPort,hostTLS:s.httpHost+":"+s.httpsPort,httpPath:s.httpPath}),O={loop:!0,timeout:15e3,timeoutLimit:6e4},z=new se({minPingDelay:1e4,maxPingDelay:s.activityTimeout}),M=new se({lives:2,minPingDelay:1e4,maxPingDelay:s.activityTimeout}),$=u("ws","ws",3,p,z),Ct=u("wss","ws",3,S,z),xs=u("sockjs","sockjs",1,x),he=u("xhr_streaming","xhr_streaming",1,x,M),Is=u("xdr_streaming","xdr_streaming",1,x,M),ce=u("xhr_polling","xhr_polling",1,x),ks=u("xdr_polling","xdr_polling",1,x),ue=new ot([$],O),Os=new ot([Ct],O),Ps=new ot([xs],O),de=new ot([new gt(ft(he),he,Is)],O),ge=new ot([new gt(ft(ce),ce,ks)],O),fe=new ot([new gt(ft(de),new Dt([de,new wt(ge,{delay:4e3})]),ge)],O),Nt=new gt(ft(fe),fe,Ps),Xt;return e.useTLS?Xt=new Dt([ue,new wt(Nt,{delay:2e3})]):Xt=new Dt([ue,new wt(Os,{delay:2e3}),new wt(Nt,{delay:5e3})]),new ki(new Li(new gt(ft($),Xt,Nt)),a,{ttl:18e5,timeline:e.timeline,useTLS:e.useTLS})},Ei=zi,Ai=function(){var s=this;s.timeline.info(s.buildTimelineMessage({transport:s.name+(s.options.useTLS?"s":"")})),s.hooks.isInitialized()?s.changeState("initialized"):s.hooks.file?(s.changeState("initializing"),m.load(s.hooks.file,{useTLS:s.options.useTLS},function(e,i){s.hooks.isInitialized()?(s.changeState("initialized"),i(!0)):(e&&s.onError(e),s.onClose(),i(!1))})):s.onClose()},Mi={getRequest:function(s){var e=new window.XDomainRequest;return e.ontimeout=function(){s.emit("error",new I),s.close()},e.onerror=function(i){s.emit("error",i),s.close()},e.onprogress=function(){e.responseText&&e.responseText.length>0&&s.onChunk(200,e.responseText)},e.onload=function(){e.responseText&&e.responseText.length>0&&s.onChunk(200,e.responseText),s.emit("finished",200),s.close()},e},abortRequest:function(s){s.ontimeout=s.onerror=s.onprogress=s.onload=null,s.abort()}},Di=Mi;const Ri=256*1024;class $i extends K{constructor(e,i,a){super(),this.hooks=e,this.method=i,this.url=a}start(e){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},P.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)}close(){this.unloader&&(P.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(e,i){for(;;){var a=this.advanceBuffer(i);if(a)this.emit("chunk",{status:e,data:a});else break}this.isBufferTooLong(i)&&this.emit("buffer_too_long")}advanceBuffer(e){var i=e.slice(this.position),a=i.indexOf(`
`);return a!==-1?(this.position+=a+1,i.slice(0,a)):null}isBufferTooLong(e){return this.position===e.length&&e.length>Ri}}var $t;(function(s){s[s.CONNECTING=0]="CONNECTING",s[s.OPEN=1]="OPEN",s[s.CLOSED=3]="CLOSED"})($t||($t={}));var at=$t,Hi=1;class Bi{constructor(e,i){this.hooks=e,this.session=oe(1e3)+"/"+ji(8),this.location=Ni(i),this.readyState=at.CONNECTING,this.openStream()}send(e){return this.sendRaw(JSON.stringify([e]))}ping(){this.hooks.sendHeartbeat(this)}close(e,i){this.onClose(e,i,!0)}sendRaw(e){if(this.readyState===at.OPEN)try{return P.createSocketRequest("POST",re(Xi(this.location,this.session))).start(e),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(e,i,a){this.closeStream(),this.readyState=at.CLOSED,this.onclose&&this.onclose({code:e,reason:i,wasClean:a})}onChunk(e){if(e.status===200){this.readyState===at.OPEN&&this.onActivity();var i,a=e.data.slice(0,1);switch(a){case"o":i=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(i);break;case"a":i=JSON.parse(e.data.slice(1)||"[]");for(var u=0;u<i.length;u++)this.onEvent(i[u]);break;case"m":i=JSON.parse(e.data.slice(1)||"null"),this.onEvent(i);break;case"h":this.hooks.onHeartbeat(this);break;case"c":i=JSON.parse(e.data.slice(1)||"[]"),this.onClose(i[0],i[1],!0);break}}}onOpen(e){this.readyState===at.CONNECTING?(e&&e.hostname&&(this.location.base=Gi(this.location.base,e.hostname)),this.readyState=at.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(e){this.readyState===at.OPEN&&this.onmessage&&this.onmessage({data:e})}onActivity(){this.onactivity&&this.onactivity()}onError(e){this.onerror&&this.onerror(e)}openStream(){this.stream=P.createSocketRequest("POST",re(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",e=>{this.onChunk(e)}),this.stream.bind("finished",e=>{this.hooks.onFinished(this,e)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(e){j.defer(()=>{this.onError(e),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function Ni(s){var e=/([^\?]*)\/*(\??.*)/.exec(s);return{base:e[1],queryString:e[2]}}function Xi(s,e){return s.base+"/"+e+"/xhr_send"}function re(s){var e=s.indexOf("?")===-1?"?":"&";return s+e+"t="+ +new Date+"&n="+Hi++}function Gi(s,e){var i=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(s);return i[1]+e+i[3]}function oe(s){return P.randomInt(s)}function ji(s){for(var e=[],i=0;i<s;i++)e.push(oe(32).toString(32));return e.join("")}var Fi=Bi,Wi={getReceiveURL:function(s,e){return s.base+"/"+e+"/xhr_streaming"+s.queryString},onHeartbeat:function(s){s.sendRaw("[]")},sendHeartbeat:function(s){s.sendRaw("[]")},onFinished:function(s,e){s.onClose(1006,"Connection interrupted ("+e+")",!1)}},Ui=Wi,qi={getReceiveURL:function(s,e){return s.base+"/"+e+"/xhr"+s.queryString},onHeartbeat:function(){},sendHeartbeat:function(s){s.sendRaw("[]")},onFinished:function(s,e){e===200?s.reconnect():s.onClose(1006,"Connection interrupted ("+e+")",!1)}},Yi=qi,Vi={getRequest:function(s){var e=P.getXHRAPI(),i=new e;return i.onreadystatechange=i.onprogress=function(){switch(i.readyState){case 3:i.responseText&&i.responseText.length>0&&s.onChunk(i.status,i.responseText);break;case 4:i.responseText&&i.responseText.length>0&&s.onChunk(i.status,i.responseText),s.emit("finished",i.status),s.close();break}},i},abortRequest:function(s){s.onreadystatechange=null,s.abort()}},Zi=Vi,Ji={createStreamingSocket(s){return this.createSocket(Ui,s)},createPollingSocket(s){return this.createSocket(Yi,s)},createSocket(s,e){return new Fi(s,e)},createXHR(s,e){return this.createRequest(Zi,s,e)},createRequest(s,e,i){return new $i(s,e,i)}},ae=Ji;ae.createXDR=function(s,e){return this.createRequest(Di,s,e)};var Ki=ae,Qi={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:c,DependenciesReceivers:w,getDefaultStrategy:Ei,Transports:li,transportConnectionInitializer:Ai,HTTPFactory:Ki,TimelineTransport:Ve,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(s){window.Pusher=s;var e=()=>{this.onDocumentBody(s.ready)};window.JSON?e():m.load("json2",{},e)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:Z,jsonp:Fe}},onDocumentBody(s){document.body?s():setTimeout(()=>{this.onDocumentBody(s)},0)},createJSONPRequest(s,e){return new Ue(s,e)},createScriptRequest(s){return new We(s)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var s=this.getXHRAPI();return new s},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return ci},createWebSocket(s){var e=this.getWebSocketAPI();return new e(s)},createSocketRequest(s,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(s,e);if(this.isXDRSupported(e.indexOf("https:")===0))return this.HTTPFactory.createXDR(s,e);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var s=this.getXHRAPI();return!!s&&new s().withCredentials!==void 0},isXDRSupported(s){var e=s?"https:":"http:",i=this.getProtocol();return!!window.XDomainRequest&&i===e},addUnloadListener(s){window.addEventListener!==void 0?window.addEventListener("unload",s,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",s)},removeUnloadListener(s){window.addEventListener!==void 0?window.removeEventListener("unload",s,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",s)},randomInt(s){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*s)}},P=Qi,Ht;(function(s){s[s.ERROR=3]="ERROR",s[s.INFO=6]="INFO",s[s.DEBUG=7]="DEBUG"})(Ht||(Ht={}));var St=Ht;class ts{constructor(e,i,a){this.key=e,this.session=i,this.events=[],this.options=a||{},this.sent=0,this.uniqueID=0}log(e,i){e<=this.options.level&&(this.events.push(q({},i,{timestamp:j.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(e){this.log(St.ERROR,e)}info(e){this.log(St.INFO,e)}debug(e){this.log(St.DEBUG,e)}isEmpty(){return this.events.length===0}send(e,i){var a=q({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(a,(u,p)=>{u||this.sent++,i&&i(u,p)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class es{constructor(e,i,a,u){this.name=e,this.priority=i,this.transport=a,this.options=u||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(e,i){if(this.isSupported()){if(this.priority<e)return le(new E,i)}else return le(new W,i);var a=!1,u=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),p=null,S=function(){u.unbind("initialized",S),u.connect()},x=function(){p=Q.createHandshake(u,function($){a=!0,M(),i(null,$)})},O=function($){M(),i($)},z=function(){M();var $;$=bt(u),i(new A($))},M=function(){u.unbind("initialized",S),u.unbind("open",x),u.unbind("error",O),u.unbind("closed",z)};return u.bind("initialized",S),u.bind("open",x),u.bind("error",O),u.bind("closed",z),u.initialize(),{abort:()=>{a||(M(),p?p.close():u.close())},forceMinPriority:$=>{a||this.priority<$&&(p?p.close():u.close())}}}}function le(s,e){return j.defer(function(){e(s)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:is}=P;var ss=function(s,e,i,a,u,p){var S=is[i];if(!S)throw new Y(i);var x=(!s.enabledTransports||Wt(s.enabledTransports,e)!==-1)&&(!s.disabledTransports||Wt(s.disabledTransports,e)===-1),O;return x?(u=Object.assign({ignoreNullOrigin:s.ignoreNullOrigin},u),O=new es(e,a,p?p.getAssistant(S):S,u)):O=ns,O},ns={isSupported:function(){return!1},connect:function(s,e){var i=j.defer(function(){e(new W)});return{abort:function(){i.ensureAborted()},forceMinPriority:function(){}}}};function rs(s){if(s==null)throw"You must pass an options object";if(s.cluster==null)throw"Options object must provide a cluster";"disableStats"in s&&R.warn("The disableStats option is deprecated in favor of enableStats")}const os=(s,e)=>{var i="socket_id="+encodeURIComponent(s.socketId);for(var a in e.params)i+="&"+encodeURIComponent(a)+"="+encodeURIComponent(e.params[a]);if(e.paramsProvider!=null){let u=e.paramsProvider();for(var a in u)i+="&"+encodeURIComponent(a)+"="+encodeURIComponent(u[a])}return i};var as=s=>{if(typeof P.getAuthorizers()[s.transport]>"u")throw`'${s.transport}' is not a recognized auth transport`;return(e,i)=>{const a=os(e,s);P.getAuthorizers()[s.transport](P,a,s,T.UserAuthentication,i)}};const ls=(s,e)=>{var i="socket_id="+encodeURIComponent(s.socketId);i+="&channel_name="+encodeURIComponent(s.channelName);for(var a in e.params)i+="&"+encodeURIComponent(a)+"="+encodeURIComponent(e.params[a]);if(e.paramsProvider!=null){let u=e.paramsProvider();for(var a in u)i+="&"+encodeURIComponent(a)+"="+encodeURIComponent(u[a])}return i};var hs=s=>{if(typeof P.getAuthorizers()[s.transport]>"u")throw`'${s.transport}' is not a recognized auth transport`;return(e,i)=>{const a=ls(e,s);P.getAuthorizers()[s.transport](P,a,s,T.ChannelAuthorization,i)}};const cs=(s,e,i)=>{const a={authTransport:e.transport,authEndpoint:e.endpoint,auth:{params:e.params,headers:e.headers}};return(u,p)=>{const S=s.channel(u.channelName);i(S,a).authorize(u.socketId,p)}};function us(s,e){let i={activityTimeout:s.activityTimeout||g.activityTimeout,cluster:s.cluster,httpPath:s.httpPath||g.httpPath,httpPort:s.httpPort||g.httpPort,httpsPort:s.httpsPort||g.httpsPort,pongTimeout:s.pongTimeout||g.pongTimeout,statsHost:s.statsHost||g.stats_host,unavailableTimeout:s.unavailableTimeout||g.unavailableTimeout,wsPath:s.wsPath||g.wsPath,wsPort:s.wsPort||g.wsPort,wssPort:s.wssPort||g.wssPort,enableStats:ms(s),httpHost:ds(s),useTLS:ps(s),wsHost:gs(s),userAuthenticator:vs(s),channelAuthorizer:ys(s,e)};return"disabledTransports"in s&&(i.disabledTransports=s.disabledTransports),"enabledTransports"in s&&(i.enabledTransports=s.enabledTransports),"ignoreNullOrigin"in s&&(i.ignoreNullOrigin=s.ignoreNullOrigin),"timelineParams"in s&&(i.timelineParams=s.timelineParams),"nacl"in s&&(i.nacl=s.nacl),i}function ds(s){return s.httpHost?s.httpHost:s.cluster?`sockjs-${s.cluster}.pusher.com`:g.httpHost}function gs(s){return s.wsHost?s.wsHost:fs(s.cluster)}function fs(s){return`ws-${s}.pusher.com`}function ps(s){return P.getProtocol()==="https:"?!0:s.forceTLS!==!1}function ms(s){return"enableStats"in s?s.enableStats:"disableStats"in s?!s.disableStats:!1}function vs(s){const e=Object.assign(Object.assign({},g.userAuthentication),s.userAuthentication);return"customHandler"in e&&e.customHandler!=null?e.customHandler:as(e)}function bs(s,e){let i;return"channelAuthorization"in s?i=Object.assign(Object.assign({},g.channelAuthorization),s.channelAuthorization):(i={transport:s.authTransport||g.authTransport,endpoint:s.authEndpoint||g.authEndpoint},"auth"in s&&("params"in s.auth&&(i.params=s.auth.params),"headers"in s.auth&&(i.headers=s.auth.headers)),"authorizer"in s&&(i.customHandler=cs(e,i,s.authorizer))),i}function ys(s,e){const i=bs(s,e);return"customHandler"in i&&i.customHandler!=null?i.customHandler:hs(i)}class ws extends K{constructor(e){super(function(i,a){R.debug(`No callbacks on watchlist events for ${i}`)}),this.pusher=e,this.bindWatchlistInternalEvent()}handleEvent(e){e.data.events.forEach(i=>{this.emit(i.name,i)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",e=>{var i=e.event;i==="pusher_internal:watchlist_events"&&this.handleEvent(e)})}}function Ss(){let s,e;return{promise:new Promise((a,u)=>{s=a,e=u}),resolve:s,reject:e}}var Cs=Ss;class _s extends K{constructor(e){super(function(i,a){R.debug("No callbacks on user for "+i)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(i,a)=>{if(i){R.warn(`Error during signin: ${i}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:a.auth,user_data:a.user_data})},this.pusher=e,this.pusher.connection.bind("state_change",({previous:i,current:a})=>{i!=="connected"&&a==="connected"&&this._signin(),i==="connected"&&a!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new ws(e),this.pusher.connection.bind("message",i=>{var a=i.event;a==="pusher:signin_success"&&this._onSigninSuccess(i.data),this.serverToUserChannel&&this.serverToUserChannel.name===i.channel&&this.serverToUserChannel.handleEvent(i)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(e){try{this.user_data=JSON.parse(e.user_data)}catch{R.error(`Failed parsing user data after signin: ${e.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){R.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const e=i=>{i.subscriptionPending&&i.subscriptionCancelled?i.reinstateSubscription():!i.subscriptionPending&&this.pusher.connection.state==="connected"&&i.subscribe()};this.serverToUserChannel=new Et(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((i,a)=>{i.indexOf("pusher_internal:")===0||i.indexOf("pusher:")===0||this.emit(i,a)}),e(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:e,resolve:i}=Cs();e.done=!1;const a=()=>{e.done=!0};e.then(a).catch(a),this.signinDonePromise=e,this._signinDoneResolve=i}}class G{static ready(){G.isReady=!0;for(var e=0,i=G.instances.length;e<i;e++)G.instances[e].connect()}static getClientFeatures(){return Ut(Vt({ws:P.Transports.ws},function(e){return e.isSupported({})}))}constructor(e,i){Ts(e),rs(i),this.key=e,this.config=us(i,this),this.channels=Q.createChannels(),this.global_emitter=new K,this.sessionID=P.randomInt(1e9),this.timeline=new ts(this.key,this.sessionID,{cluster:this.config.cluster,features:G.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:St.INFO,version:g.VERSION}),this.config.enableStats&&(this.timelineSender=Q.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+P.TimelineTransport.name}));var a=u=>P.getDefaultStrategy(this.config,u,ss);this.connection=Q.createConnectionManager(this.key,{getStrategy:a,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",u=>{var p=u.event,S=p.indexOf("pusher_internal:")===0;if(u.channel){var x=this.channel(u.channel);x&&x.handleEvent(u)}S||this.global_emitter.emit(u.event,u.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",u=>{R.warn(u)}),G.instances.push(this),this.timeline.info({instances:G.instances.length}),this.user=new _s(this),G.isReady&&this.connect()}channel(e){return this.channels.find(e)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),i=this.timelineSender;this.timelineSenderTimer=new Ee(6e4,function(){i.send(e)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(e,i,a){return this.global_emitter.bind(e,i,a),this}unbind(e,i,a){return this.global_emitter.unbind(e,i,a),this}bind_global(e){return this.global_emitter.bind_global(e),this}unbind_global(e){return this.global_emitter.unbind_global(e),this}unbind_all(e){return this.global_emitter.unbind_all(),this}subscribeAll(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)}subscribe(e){var i=this.channels.add(e,this);return i.subscriptionPending&&i.subscriptionCancelled?i.reinstateSubscription():!i.subscriptionPending&&this.connection.state==="connected"&&i.subscribe(),i}unsubscribe(e){var i=this.channels.find(e);i&&i.subscriptionPending?i.cancelSubscription():(i=this.channels.remove(e),i&&i.subscribed&&i.unsubscribe())}send_event(e,i,a){return this.connection.send_event(e,i,a)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}G.instances=[],G.isReady=!1,G.logToConsole=!1,G.Runtime=P,G.ScriptReceivers=P.ScriptReceivers,G.DependenciesReceivers=P.DependenciesReceivers,G.auth_callbacks=P.auth_callbacks;var Bt=r.default=G;function Ts(s){if(s==null)throw"You must pass your app key when you instantiate Pusher."}P.setup(G)}])})})(Te);var Ys=Te.exports;const Vs=Ms(Ys);/*!
 * lightgallery | 2.8.2 | November 28th 2024
 * http://www.lightgalleryjs.com/
 * Copyright (c) 2020 Sachin Neravath;
 * @license GPLv3
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var it=function(){return it=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},it.apply(this,arguments)};function Zs(){for(var h=0,t=0,n=arguments.length;t<n;t++)h+=arguments[t].length;for(var r=Array(h),o=0,t=0;t<n;t++)for(var l=arguments[t],c=0,d=l.length;c<d;c++,o++)r[o]=l[c];return r}var D={afterAppendSlide:"lgAfterAppendSlide",init:"lgInit",hasVideo:"lgHasVideo",containerResize:"lgContainerResize",updateSlides:"lgUpdateSlides",afterAppendSubHtml:"lgAfterAppendSubHtml",beforeOpen:"lgBeforeOpen",afterOpen:"lgAfterOpen",slideItemLoad:"lgSlideItemLoad",beforeSlide:"lgBeforeSlide",afterSlide:"lgAfterSlide",posterClick:"lgPosterClick",dragStart:"lgDragStart",dragMove:"lgDragMove",dragEnd:"lgDragEnd",beforeNextSlide:"lgBeforeNextSlide",beforePrevSlide:"lgBeforePrevSlide",beforeClose:"lgBeforeClose",afterClose:"lgAfterClose"},Js={mode:"lg-slide",easing:"ease",speed:400,licenseKey:"0000-0000-000-0000",height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:300,container:"",startAnimationDuration:400,zoomFromOrigin:!0,hideBarsDelay:0,showBarsAfter:1e4,slideDelay:0,supportLegacyBrowser:!0,allowMediaOverlap:!1,videoMaxSize:"1280-720",loadYouTubePoster:!0,defaultCaptionHeight:0,ariaLabelledby:"",ariaDescribedby:"",resetScrollPosition:!0,hideScrollbar:!1,closable:!0,swipeToClose:!0,closeOnTap:!0,showCloseIcon:!0,showMaximizeIcon:!1,loop:!0,escKey:!0,keyPress:!0,trapFocus:!0,controls:!0,slideEndAnimation:!0,hideControlOnEnd:!1,mousewheel:!1,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:2,numberOfSlideItemsInDom:10,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:0,iframeWidth:"100%",iframeHeight:"100%",iframeMaxWidth:"100%",iframeMaxHeight:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],extraProps:[],exThumbImage:"",isMobile:void 0,mobileSettings:{controls:!1,showCloseIcon:!1,download:!1},plugins:[],strings:{closeGallery:"Close gallery",toggleMaximize:"Toggle maximize",previousSlide:"Previous slide",nextSlide:"Next slide",download:"Download",playVideo:"Play video",mediaLoadingFailed:"Oops... Failed to load content..."}};function Ks(){(function(){if(typeof window.CustomEvent=="function")return!1;function h(t,n){n=n||{bubbles:!1,cancelable:!1,detail:null};var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),r}window.CustomEvent=h})(),function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector)}()}var xe=function(){function h(t){return this.cssVenderPrefixes=["TransitionDuration","TransitionTimingFunction","Transform","Transition"],this.selector=this._getSelector(t),this.firstElement=this._getFirstEl(),this}return h.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=Math.random()*16|0,r=t=="x"?n:n&3|8;return r.toString(16)})},h.prototype._getSelector=function(t,n){if(n===void 0&&(n=document),typeof t!="string")return t;n=n||document;var r=t.substring(0,1);return r==="#"?n.querySelector(t):n.querySelectorAll(t)},h.prototype._each=function(t){return this.selector?(this.selector.length!==void 0?[].forEach.call(this.selector,t):t(this.selector,0),this):this},h.prototype._setCssVendorPrefix=function(t,n,r){var o=n.replace(/-([a-z])/gi,function(l,c){return c.toUpperCase()});this.cssVenderPrefixes.indexOf(o)!==-1?(t.style[o.charAt(0).toLowerCase()+o.slice(1)]=r,t.style["webkit"+o]=r,t.style["moz"+o]=r,t.style["ms"+o]=r,t.style["o"+o]=r):t.style[o]=r},h.prototype._getFirstEl=function(){return this.selector&&this.selector.length!==void 0?this.selector[0]:this.selector},h.prototype.isEventMatched=function(t,n){var r=n.split(".");return t.split(".").filter(function(o){return o}).every(function(o){return r.indexOf(o)!==-1})},h.prototype.attr=function(t,n){return n===void 0?this.firstElement?this.firstElement.getAttribute(t):"":(this._each(function(r){r.setAttribute(t,n)}),this)},h.prototype.find=function(t){return k(this._getSelector(t,this.selector))},h.prototype.first=function(){return this.selector&&this.selector.length!==void 0?k(this.selector[0]):k(this.selector)},h.prototype.eq=function(t){return k(this.selector[t])},h.prototype.parent=function(){return k(this.selector.parentElement)},h.prototype.get=function(){return this._getFirstEl()},h.prototype.removeAttr=function(t){var n=t.split(" ");return this._each(function(r){n.forEach(function(o){return r.removeAttribute(o)})}),this},h.prototype.wrap=function(t){if(!this.firstElement)return this;var n=document.createElement("div");return n.className=t,this.firstElement.parentNode.insertBefore(n,this.firstElement),this.firstElement.parentNode.removeChild(this.firstElement),n.appendChild(this.firstElement),this},h.prototype.addClass=function(t){return t===void 0&&(t=""),this._each(function(n){t.split(" ").forEach(function(r){r&&n.classList.add(r)})}),this},h.prototype.removeClass=function(t){return this._each(function(n){t.split(" ").forEach(function(r){r&&n.classList.remove(r)})}),this},h.prototype.hasClass=function(t){return this.firstElement?this.firstElement.classList.contains(t):!1},h.prototype.hasAttribute=function(t){return this.firstElement?this.firstElement.hasAttribute(t):!1},h.prototype.toggleClass=function(t){return this.firstElement?(this.hasClass(t)?this.removeClass(t):this.addClass(t),this):this},h.prototype.css=function(t,n){var r=this;return this._each(function(o){r._setCssVendorPrefix(o,t,n)}),this},h.prototype.on=function(t,n){var r=this;return this.selector?(t.split(" ").forEach(function(o){Array.isArray(h.eventListeners[o])||(h.eventListeners[o]=[]),h.eventListeners[o].push(n),r.selector.addEventListener(o.split(".")[0],n)}),this):this},h.prototype.once=function(t,n){var r=this;return this.on(t,function(){r.off(t),n(t)}),this},h.prototype.off=function(t){var n=this;return this.selector?(Object.keys(h.eventListeners).forEach(function(r){n.isEventMatched(t,r)&&(h.eventListeners[r].forEach(function(o){n.selector.removeEventListener(r.split(".")[0],o)}),h.eventListeners[r]=[])}),this):this},h.prototype.trigger=function(t,n){if(!this.firstElement)return this;var r=new CustomEvent(t.split(".")[0],{detail:n||null});return this.firstElement.dispatchEvent(r),this},h.prototype.load=function(t){var n=this;return fetch(t).then(function(r){return r.text()}).then(function(r){n.selector.innerHTML=r}),this},h.prototype.html=function(t){return t===void 0?this.firstElement?this.firstElement.innerHTML:"":(this._each(function(n){n.innerHTML=t}),this)},h.prototype.append=function(t){return this._each(function(n){typeof t=="string"?n.insertAdjacentHTML("beforeend",t):n.appendChild(t)}),this},h.prototype.prepend=function(t){return this._each(function(n){typeof t=="string"?n.insertAdjacentHTML("afterbegin",t):t instanceof HTMLElement&&n.insertBefore(t.cloneNode(!0),n.firstChild)}),this},h.prototype.remove=function(){return this._each(function(t){t.parentNode.removeChild(t)}),this},h.prototype.empty=function(){return this._each(function(t){t.innerHTML=""}),this},h.prototype.scrollTop=function(t){return t!==void 0?(document.body.scrollTop=t,document.documentElement.scrollTop=t,this):window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},h.prototype.scrollLeft=function(t){return t!==void 0?(document.body.scrollLeft=t,document.documentElement.scrollLeft=t,this):window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},h.prototype.offset=function(){if(!this.firstElement)return{left:0,top:0};var t=this.firstElement.getBoundingClientRect(),n=k("body").style().marginLeft;return{left:t.left-parseFloat(n)+this.scrollLeft(),top:t.top+this.scrollTop()}},h.prototype.style=function(){return this.firstElement?this.firstElement.currentStyle||window.getComputedStyle(this.firstElement):{}},h.prototype.width=function(){var t=this.style();return this.firstElement.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)},h.prototype.height=function(){var t=this.style();return this.firstElement.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)},h.eventListeners={},h}();function k(h){return Ks(),new xe(h)}var Qs=["src","sources","subHtml","subHtmlUrl","html","video","poster","slideName","responsive","srcset","sizes","iframe","downloadUrl","download","width","facebookShareUrl","tweetText","iframeTitle","twitterShareUrl","pinterestShareUrl","pinterestText","fbHtml","disqusIdentifier","disqusUrl"];function tn(h){return h==="href"?"src":(h=h.replace("data-",""),h=h.charAt(0).toLowerCase()+h.slice(1),h=h.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()}),h)}var H={fetchCaptionFromUrl:function(h,t,n){fetch(h).then(function(r){return r.text()}).then(function(r){if(n==="append"){var o='<div class="lg-sub-html">'+r+"</div>";t.append(o)}else t.html(r)})},getSize:function(h,t,n,r){n===void 0&&(n=0);var o=k(h),l=o.attr("data-lg-size")||r;if(l){var c=l.split(",");if(c[1])for(var d=window.innerWidth,g=0;g<c.length;g++){var b=c[g],w=parseInt(b.split("-")[2],10);if(w>d){l=b;break}g===c.length-1&&(l=b)}var m=l.split("-"),f=parseInt(m[0],10),C=parseInt(m[1],10),_=t.width(),T=t.height()-n,v=Math.min(_,f),y=Math.min(T,C),I=Math.min(v/f,y/C);return{width:f*I,height:C*I}}},getTransform:function(h,t,n,r,o){if(o){var l=k(h).find("img").first();if(l.get()){var c=t.get().getBoundingClientRect(),d=c.width,g=t.height()-(n+r),b=l.width(),w=l.height(),m=l.style(),f=(d-b)/2-l.offset().left+(parseFloat(m.paddingLeft)||0)+(parseFloat(m.borderLeft)||0)+k(window).scrollLeft()+c.left,C=(g-w)/2-l.offset().top+(parseFloat(m.paddingTop)||0)+(parseFloat(m.borderTop)||0)+k(window).scrollTop()+n,_=b/o.width,T=w/o.height,v="translate3d("+(f*=-1)+"px, "+(C*=-1)+"px, 0) scale3d("+_+", "+T+", 1)";return v}}},getIframeMarkup:function(h,t,n,r,o,l){var c=l?'title="'+l+'"':"";return'<div class="lg-media-cont lg-has-iframe" style="width:'+h+"; max-width:"+n+"; height: "+t+"; max-height:"+r+`">
                    <iframe class="lg-object" frameborder="0" `+c+' src="'+o+`"  allowfullscreen="true"></iframe>
                </div>`},getImgMarkup:function(h,t,n,r,o,l){var c=r?'srcset="'+r+'"':"",d=o?'sizes="'+o+'"':"",g="<img "+n+" "+c+"  "+d+' class="lg-object lg-image" data-index="'+h+'" src="'+t+'" />',b="";if(l){var w=typeof l=="string"?JSON.parse(l):l;b=w.map(function(m){var f="";return Object.keys(m).forEach(function(C){f+=" "+C+'="'+m[C]+'"'}),"<source "+f+"></source>"})}return""+b+g},getResponsiveSrc:function(h){for(var t=[],n=[],r="",o=0;o<h.length;o++){var l=h[o].split(" ");l[0]===""&&l.splice(0,1),n.push(l[0]),t.push(l[1])}for(var c=window.innerWidth,d=0;d<t.length;d++)if(parseInt(t[d],10)>c){r=n[d];break}return r},isImageLoaded:function(h){return!(!h||!h.complete||h.naturalWidth===0)},getVideoPosterMarkup:function(h,t,n,r,o){var l="";o&&o.youtube?l="lg-has-youtube":o&&o.vimeo?l="lg-has-vimeo":l="lg-has-html5";var c=t;return typeof t!="string"&&(c=t.outerHTML),'<div class="lg-video-cont '+l+'" style="'+n+`">
                <div class="lg-video-play-button">
                <svg
                    viewBox="0 0 20 20"
                    preserveAspectRatio="xMidYMid"
                    focusable="false"
                    aria-labelledby="`+r+`"
                    role="img"
                    class="lg-video-play-icon"
                >
                    <title>`+r+`</title>
                    <polygon class="lg-video-play-icon-inner" points="1,0 20,10 1,20"></polygon>
                </svg>
                <svg class="lg-video-play-icon-bg" viewBox="0 0 50 50" focusable="false">
                    <circle cx="50%" cy="50%" r="20"></circle></svg>
                <svg class="lg-video-play-icon-circle" viewBox="0 0 50 50" focusable="false">
                    <circle cx="50%" cy="50%" r="20"></circle>
                </svg>
            </div>
            `+c+`
            <img class="lg-object lg-video-poster" src="`+h+`" />
        </div>`},getFocusableElements:function(h){var t=h.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'),n=[].filter.call(t,function(r){var o=window.getComputedStyle(r);return o.display!=="none"&&o.visibility!=="hidden"});return n},getDynamicOptions:function(h,t,n,r){var o=[],l=Zs(Qs,t);return[].forEach.call(h,function(c){for(var d={},g=0;g<c.attributes.length;g++){var b=c.attributes[g];if(b.specified){var w=tn(b.name),m="";l.indexOf(w)>-1&&(m=w),m&&(d[m]=b.value)}}var f=k(c),C=f.find("img").first().attr("alt"),_=f.attr("title"),T=r?f.attr(r):f.find("img").first().attr("src");d.thumb=T,n&&!d.subHtml&&(d.subHtml=_||C||""),d.alt=C||_||"",o.push(d)}),console.log(o,"dynamicElements"),o},isMobile:function(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)},isVideo:function(h,t,n){if(!h){if(t)return{html5:!0};console.error("lightGallery :- data-src is not provided on slide item "+(n+1)+". Please make sure the selector property is properly configured. More info - https://www.lightgalleryjs.com/demos/html-markup/");return}var r=h.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com|be-nocookie\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)([\&|?][\S]*)*/i),o=h.match(/\/\/(?:www\.)?(?:player\.)?vimeo.com\/(?:video\/)?([0-9a-z\-_]+)(.*)?/i),l=h.match(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/(medias|embed)\/([0-9a-z\-_]+)(.*)/);if(r)return{youtube:r};if(o)return{vimeo:o};if(l)return{wistia:l}}},ye=0,en=function(){function h(t,n){if(this.lgOpened=!1,this.index=0,this.plugins=[],this.lGalleryOn=!1,this.lgBusy=!1,this.currentItemsInDom=[],this.prevScrollTop=0,this.bodyPaddingRight=0,this.isDummyImageRemoved=!1,this.dragOrSwipeEnabled=!1,this.mediaContainerPosition={top:0,bottom:0},!t)return this;if(ye++,this.lgId=ye,this.el=t,this.LGel=k(t),this.generateSettings(n),this.buildModules(),this.settings.dynamic&&this.settings.dynamicEl!==void 0&&!Array.isArray(this.settings.dynamicEl))throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.galleryItems=this.getItems(),this.normalizeSettings(),this.init(),this.validateLicense(),this}return h.prototype.generateSettings=function(t){if(this.settings=it(it({},Js),t),this.settings.isMobile&&typeof this.settings.isMobile=="function"?this.settings.isMobile():H.isMobile()){var n=it(it({},this.settings.mobileSettings),this.settings.mobileSettings);this.settings=it(it({},this.settings),n)}},h.prototype.normalizeSettings=function(){if(this.settings.slideEndAnimation&&(this.settings.hideControlOnEnd=!1),this.settings.closable||(this.settings.swipeToClose=!1),this.zoomFromOrigin=this.settings.zoomFromOrigin,this.settings.dynamic&&(this.zoomFromOrigin=!1),this.settings.container){var t=this.settings.container;if(typeof t=="function")this.settings.container=t();else if(typeof t=="string"){var n=document.querySelector(t);this.settings.container=n??document.body}}else this.settings.container=document.body;this.settings.preload=Math.min(this.settings.preload,this.galleryItems.length)},h.prototype.init=function(){var t=this;this.addSlideVideoInfo(this.galleryItems),this.buildStructure(),this.LGel.trigger(D.init,{instance:this}),this.settings.keyPress&&this.keyPress(),setTimeout(function(){t.enableDrag(),t.enableSwipe(),t.triggerPosterClick()},50),this.arrow(),this.settings.mousewheel&&this.mousewheel(),this.settings.dynamic||this.openGalleryOnItemClick()},h.prototype.openGalleryOnItemClick=function(){for(var t=this,n=function(l){var c=r.items[l],d=k(c),g=xe.generateUUID();d.attr("data-lg-id",g).on("click.lgcustom-item-"+g,function(b){b.preventDefault();var w=t.settings.index||l;t.openGallery(w,c)})},r=this,o=0;o<this.items.length;o++)n(o)},h.prototype.buildModules=function(){var t=this;this.settings.plugins.forEach(function(n){t.plugins.push(new n(t,k))})},h.prototype.validateLicense=function(){this.settings.licenseKey?this.settings.licenseKey==="0000-0000-000-0000"&&console.warn("lightGallery: "+this.settings.licenseKey+" license key is not valid for production use"):console.error("Please provide a valid license key")},h.prototype.getSlideItem=function(t){return k(this.getSlideItemId(t))},h.prototype.getSlideItemId=function(t){return"#lg-item-"+this.lgId+"-"+t},h.prototype.getIdName=function(t){return t+"-"+this.lgId},h.prototype.getElementById=function(t){return k("#"+this.getIdName(t))},h.prototype.manageSingleSlideClassName=function(){this.galleryItems.length<2?this.outer.addClass("lg-single-item"):this.outer.removeClass("lg-single-item")},h.prototype.buildStructure=function(){var t=this,n=this.$container&&this.$container.get();if(!n){var r="",o="";this.settings.controls&&(r='<button type="button" id="'+this.getIdName("lg-prev")+'" aria-label="'+this.settings.strings.previousSlide+'" class="lg-prev lg-icon"> '+this.settings.prevHtml+` </button>
                <button type="button" id="`+this.getIdName("lg-next")+'" aria-label="'+this.settings.strings.nextSlide+'" class="lg-next lg-icon"> '+this.settings.nextHtml+" </button>"),this.settings.appendSubHtmlTo!==".lg-item"&&(o='<div class="lg-sub-html" role="status" aria-live="polite"></div>');var l="";this.settings.allowMediaOverlap&&(l+="lg-media-overlap ");var c=this.settings.ariaLabelledby?'aria-labelledby="'+this.settings.ariaLabelledby+'"':"",d=this.settings.ariaDescribedby?'aria-describedby="'+this.settings.ariaDescribedby+'"':"",g="lg-container "+this.settings.addClass+" "+(document.body!==this.settings.container?"lg-inline":""),b=this.settings.closable&&this.settings.showCloseIcon?'<button type="button" aria-label="'+this.settings.strings.closeGallery+'" id="'+this.getIdName("lg-close")+'" class="lg-close lg-icon"></button>':"",w=this.settings.showMaximizeIcon?'<button type="button" aria-label="'+this.settings.strings.toggleMaximize+'" id="'+this.getIdName("lg-maximize")+'" class="lg-maximize lg-icon"></button>':"",m=`
        <div class="`+g+'" id="'+this.getIdName("lg-container")+'" tabindex="-1" aria-modal="true" '+c+" "+d+` role="dialog"
        >
            <div id="`+this.getIdName("lg-backdrop")+`" class="lg-backdrop"></div>

            <div id="`+this.getIdName("lg-outer")+'" class="lg-outer lg-use-css3 lg-css3 lg-hide-items '+l+` ">

              <div id="`+this.getIdName("lg-content")+`" class="lg-content">
                <div id="`+this.getIdName("lg-inner")+`" class="lg-inner">
                </div>
                `+r+`
              </div>
                <div id="`+this.getIdName("lg-toolbar")+`" class="lg-toolbar lg-group">
                    `+w+`
                    `+b+`
                    </div>
                    `+(this.settings.appendSubHtmlTo===".lg-outer"?o:"")+`
                <div id="`+this.getIdName("lg-components")+`" class="lg-components">
                    `+(this.settings.appendSubHtmlTo===".lg-sub-html"?o:"")+`
                </div>
            </div>
        </div>
        `;k(this.settings.container).append(m),document.body!==this.settings.container&&k(this.settings.container).css("position","relative"),this.outer=this.getElementById("lg-outer"),this.$lgComponents=this.getElementById("lg-components"),this.$backdrop=this.getElementById("lg-backdrop"),this.$container=this.getElementById("lg-container"),this.$inner=this.getElementById("lg-inner"),this.$content=this.getElementById("lg-content"),this.$toolbar=this.getElementById("lg-toolbar"),this.$backdrop.css("transition-duration",this.settings.backdropDuration+"ms");var f=this.settings.mode+" ";this.manageSingleSlideClassName(),this.settings.enableDrag&&(f+="lg-grab "),this.outer.addClass(f),this.$inner.css("transition-timing-function",this.settings.easing),this.$inner.css("transition-duration",this.settings.speed+"ms"),this.settings.download&&this.$toolbar.append('<a id="'+this.getIdName("lg-download")+'" target="_blank" rel="noopener" aria-label="'+this.settings.strings.download+'" download class="lg-download lg-icon"></a>'),this.counter(),k(window).on("resize.lg.global"+this.lgId+" orientationchange.lg.global"+this.lgId,function(){t.refreshOnResize()}),this.hideBars(),this.manageCloseGallery(),this.toggleMaximize(),this.initModules()}},h.prototype.refreshOnResize=function(){if(this.lgOpened){var t=this.galleryItems[this.index],n=t.__slideVideoInfo;this.mediaContainerPosition=this.getMediaContainerPosition();var r=this.mediaContainerPosition,o=r.top,l=r.bottom;if(this.currentImageSize=H.getSize(this.items[this.index],this.outer,o+l,n&&this.settings.videoMaxSize),n&&this.resizeVideoSlide(this.index,this.currentImageSize),this.zoomFromOrigin&&!this.isDummyImageRemoved){var c=this.getDummyImgStyles(this.currentImageSize);this.outer.find(".lg-current .lg-dummy-img").first().attr("style",c)}this.LGel.trigger(D.containerResize)}},h.prototype.resizeVideoSlide=function(t,n){var r=this.getVideoContStyle(n),o=this.getSlideItem(t);o.find(".lg-video-cont").attr("style",r)},h.prototype.updateSlides=function(t,n){if(this.index>t.length-1&&(this.index=t.length-1),t.length===1&&(this.index=0),!t.length){this.closeGallery();return}var r=this.galleryItems[n].src;this.galleryItems=t,this.updateControls(),this.$inner.empty(),this.currentItemsInDom=[];var o=0;this.galleryItems.some(function(l,c){return l.src===r?(o=c,!0):!1}),this.currentItemsInDom=this.organizeSlideItems(o,-1),this.loadContent(o,!0),this.getSlideItem(o).addClass("lg-current"),this.index=o,this.updateCurrentCounter(o),this.LGel.trigger(D.updateSlides)},h.prototype.getItems=function(){if(this.items=[],this.settings.dynamic)return this.settings.dynamicEl||[];if(this.settings.selector==="this")this.items.push(this.el);else if(this.settings.selector)if(typeof this.settings.selector=="string")if(this.settings.selectWithin){var t=k(this.settings.selectWithin);this.items=t.find(this.settings.selector).get()}else this.items=this.el.querySelectorAll(this.settings.selector);else this.items=this.settings.selector;else this.items=this.el.children;return H.getDynamicOptions(this.items,this.settings.extraProps,this.settings.getCaptionFromTitleOrAlt,this.settings.exThumbImage)},h.prototype.shouldHideScrollbar=function(){return this.settings.hideScrollbar&&document.body===this.settings.container},h.prototype.hideScrollbar=function(){if(this.shouldHideScrollbar()){this.bodyPaddingRight=parseFloat(k("body").style().paddingRight);var t=document.documentElement.getBoundingClientRect(),n=window.innerWidth-t.width;k(document.body).css("padding-right",n+this.bodyPaddingRight+"px"),k(document.body).addClass("lg-overlay-open")}},h.prototype.resetScrollBar=function(){this.shouldHideScrollbar()&&(k(document.body).css("padding-right",this.bodyPaddingRight+"px"),k(document.body).removeClass("lg-overlay-open"))},h.prototype.openGallery=function(t,n){var r=this;if(t===void 0&&(t=this.settings.index),!this.lgOpened){this.lgOpened=!0,this.outer.removeClass("lg-hide-items"),this.hideScrollbar(),this.$container.addClass("lg-show");var o=this.getItemsToBeInsertedToDom(t,t);this.currentItemsInDom=o;var l="";o.forEach(function(f){l=l+('<div id="'+f+'" class="lg-item"></div>')}),this.$inner.append(l),this.addHtml(t);var c="";this.mediaContainerPosition=this.getMediaContainerPosition();var d=this.mediaContainerPosition,g=d.top,b=d.bottom;this.settings.allowMediaOverlap||this.setMediaContainerPosition(g,b);var w=this.galleryItems[t].__slideVideoInfo;this.zoomFromOrigin&&n&&(this.currentImageSize=H.getSize(n,this.outer,g+b,w&&this.settings.videoMaxSize),c=H.getTransform(n,this.outer,g,b,this.currentImageSize)),(!this.zoomFromOrigin||!c)&&(this.outer.addClass(this.settings.startClass),this.getSlideItem(t).removeClass("lg-complete"));var m=this.settings.zoomFromOrigin?100:this.settings.backdropDuration;setTimeout(function(){r.outer.addClass("lg-components-open")},m),this.index=t,this.LGel.trigger(D.beforeOpen),this.getSlideItem(t).addClass("lg-current"),this.lGalleryOn=!1,this.prevScrollTop=k(window).scrollTop(),setTimeout(function(){if(r.zoomFromOrigin&&c){var f=r.getSlideItem(t);f.css("transform",c),setTimeout(function(){f.addClass("lg-start-progress lg-start-end-progress").css("transition-duration",r.settings.startAnimationDuration+"ms"),r.outer.addClass("lg-zoom-from-image")}),setTimeout(function(){f.css("transform","translate3d(0, 0, 0)")},100)}setTimeout(function(){r.$backdrop.addClass("in"),r.$container.addClass("lg-show-in")},10),setTimeout(function(){r.settings.trapFocus&&document.body===r.settings.container&&r.trapFocus()},r.settings.backdropDuration+50),(!r.zoomFromOrigin||!c)&&setTimeout(function(){r.outer.addClass("lg-visible")},r.settings.backdropDuration),r.slide(t,!1,!1,!1),r.LGel.trigger(D.afterOpen)}),document.body===this.settings.container&&k("html").addClass("lg-on")}},h.prototype.getMediaContainerPosition=function(){if(this.settings.allowMediaOverlap)return{top:0,bottom:0};var t=this.$toolbar.get().clientHeight||0,n=this.outer.find(".lg-components .lg-sub-html").get(),r=this.settings.defaultCaptionHeight||n&&n.clientHeight||0,o=this.outer.find(".lg-thumb-outer").get(),l=o?o.clientHeight:0,c=l+r;return{top:t,bottom:c}},h.prototype.setMediaContainerPosition=function(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.$content.css("top",t+"px").css("bottom",n+"px")},h.prototype.hideBars=function(){var t=this;setTimeout(function(){t.outer.removeClass("lg-hide-items"),t.settings.hideBarsDelay>0&&(t.outer.on("mousemove.lg click.lg touchstart.lg",function(){t.outer.removeClass("lg-hide-items"),clearTimeout(t.hideBarTimeout),t.hideBarTimeout=setTimeout(function(){t.outer.addClass("lg-hide-items")},t.settings.hideBarsDelay)}),t.outer.trigger("mousemove.lg"))},this.settings.showBarsAfter)},h.prototype.initPictureFill=function(t){if(this.settings.supportLegacyBrowser)try{picturefill({elements:[t.get()]})}catch{console.warn("lightGallery :- If you want srcset or picture tag to be supported for older browser please include picturefil javascript library in your document.")}},h.prototype.counter=function(){if(this.settings.counter){var t=`<div class="lg-counter" role="status" aria-live="polite">
                <span id="`+this.getIdName("lg-counter-current")+'" class="lg-counter-current">'+(this.index+1)+` </span> /
                <span id="`+this.getIdName("lg-counter-all")+'" class="lg-counter-all">'+this.galleryItems.length+" </span></div>";this.outer.find(this.settings.appendCounterTo).append(t)}},h.prototype.addHtml=function(t){var n,r;if(this.galleryItems[t].subHtmlUrl?r=this.galleryItems[t].subHtmlUrl:n=this.galleryItems[t].subHtml,!r)if(n){var o=n.substring(0,1);(o==="."||o==="#")&&(this.settings.subHtmlSelectorRelative&&!this.settings.dynamic?n=k(this.items).eq(t).find(n).first().html():n=k(n).first().html())}else n="";if(this.settings.appendSubHtmlTo!==".lg-item")r?H.fetchCaptionFromUrl(r,this.outer.find(".lg-sub-html"),"replace"):this.outer.find(".lg-sub-html").html(n);else{var l=k(this.getSlideItemId(t));r?H.fetchCaptionFromUrl(r,l,"append"):l.append('<div class="lg-sub-html">'+n+"</div>")}typeof n<"u"&&n!==null&&(n===""?this.outer.find(this.settings.appendSubHtmlTo).addClass("lg-empty-html"):this.outer.find(this.settings.appendSubHtmlTo).removeClass("lg-empty-html")),this.LGel.trigger(D.afterAppendSubHtml,{index:t})},h.prototype.preload=function(t){for(var n=1;n<=this.settings.preload&&!(n>=this.galleryItems.length-t);n++)this.loadContent(t+n,!1);for(var r=1;r<=this.settings.preload&&!(t-r<0);r++)this.loadContent(t-r,!1)},h.prototype.getDummyImgStyles=function(t){return t?"width:"+t.width+`px;
                margin-left: -`+t.width/2+`px;
                margin-top: -`+t.height/2+`px;
                height:`+t.height+"px":""},h.prototype.getVideoContStyle=function(t){return t?"width:"+t.width+`px;
                height:`+t.height+"px":""},h.prototype.getDummyImageContent=function(t,n,r){var o;if(this.settings.dynamic||(o=k(this.items).eq(n)),o){var l=void 0;if(this.settings.exThumbImage?l=o.attr(this.settings.exThumbImage):l=o.find("img").first().attr("src"),!l)return"";var c=this.getDummyImgStyles(this.currentImageSize),d=document.createElement("img");return d.alt=r||"",d.src=l,d.className="lg-dummy-img",d.style.cssText=c,t.addClass("lg-first-slide"),this.outer.addClass("lg-first-slide-loading"),d}return""},h.prototype.setImgMarkup=function(t,n,r){var o=this.galleryItems[r],l=o.alt,c=o.srcset,d=o.sizes,g=o.sources,b="",w=l?'alt="'+l+'"':"";this.isFirstSlideWithZoomAnimation()?b=this.getDummyImageContent(n,r,w):b=H.getImgMarkup(r,t,w,c,d,g);var m=document.createElement("picture");m.className="lg-img-wrap",k(m).append(b),n.prepend(m)},h.prototype.onSlideObjectLoad=function(t,n,r,o){var l=t.find(".lg-object").first();H.isImageLoaded(l.get())||n?r():(l.on("load.lg error.lg",function(){r&&r()}),l.on("error.lg",function(){o&&o()}))},h.prototype.onLgObjectLoad=function(t,n,r,o,l,c){var d=this;this.onSlideObjectLoad(t,c,function(){d.triggerSlideItemLoad(t,n,r,o,l)},function(){t.addClass("lg-complete lg-complete_"),t.html('<span class="lg-error-msg">'+d.settings.strings.mediaLoadingFailed+"</span>")})},h.prototype.triggerSlideItemLoad=function(t,n,r,o,l){var c=this,d=this.galleryItems[n],g=l&&this.getSlideType(d)==="video"&&!d.poster?o:0;setTimeout(function(){t.addClass("lg-complete lg-complete_"),c.LGel.trigger(D.slideItemLoad,{index:n,delay:r||0,isFirstSlide:l})},g)},h.prototype.isFirstSlideWithZoomAnimation=function(){return!!(!this.lGalleryOn&&this.zoomFromOrigin&&this.currentImageSize)},h.prototype.addSlideVideoInfo=function(t){var n=this;t.forEach(function(r,o){r.__slideVideoInfo=H.isVideo(r.src,!!r.video,o),r.__slideVideoInfo&&n.settings.loadYouTubePoster&&!r.poster&&r.__slideVideoInfo.youtube&&(r.poster="//img.youtube.com/vi/"+r.__slideVideoInfo.youtube[1]+"/maxresdefault.jpg")})},h.prototype.loadContent=function(t,n){var r=this,o=this.galleryItems[t],l=k(this.getSlideItemId(t)),c=o.poster,d=o.srcset,g=o.sizes,b=o.sources,w=o.src,m=o.video,f=m&&typeof m=="string"?JSON.parse(m):m;if(o.responsive){var C=o.responsive.split(",");w=H.getResponsiveSrc(C)||w}var _=o.__slideVideoInfo,T="",v=!!o.iframe,y=!this.lGalleryOn,I=0;if(y&&(this.zoomFromOrigin&&this.currentImageSize?I=this.settings.startAnimationDuration+10:I=this.settings.backdropDuration+10),!l.hasClass("lg-loaded")){if(_){var E=this.mediaContainerPosition,A=E.top,B=E.bottom,Y=H.getSize(this.items[t],this.outer,A+B,_&&this.settings.videoMaxSize);T=this.getVideoContStyle(Y)}if(v){var W=H.getIframeMarkup(this.settings.iframeWidth,this.settings.iframeHeight,this.settings.iframeMaxWidth,this.settings.iframeMaxHeight,w,o.iframeTitle);l.prepend(W)}else if(c){var U="",V=y&&this.zoomFromOrigin&&this.currentImageSize;V&&(U=this.getDummyImageContent(l,t,""));var W=H.getVideoPosterMarkup(c,U||"",T,this.settings.strings.playVideo,_);l.prepend(W)}else if(_){var W='<div class="lg-video-cont " style="'+T+'"></div>';l.prepend(W)}else if(this.setImgMarkup(w,l,t),d||b){var Z=l.find(".lg-object");this.initPictureFill(Z)}(c||_)&&this.LGel.trigger(D.hasVideo,{index:t,src:w,html5Video:f,hasPoster:!!c}),this.LGel.trigger(D.afterAppendSlide,{index:t}),this.lGalleryOn&&this.settings.appendSubHtmlTo===".lg-item"&&this.addHtml(t)}var st=0;I&&!k(document.body).hasClass("lg-from-hash")&&(st=I),this.isFirstSlideWithZoomAnimation()&&(setTimeout(function(){l.removeClass("lg-start-end-progress lg-start-progress").removeAttr("style")},this.settings.startAnimationDuration+100),l.hasClass("lg-loaded")||setTimeout(function(){if(r.getSlideType(o)==="image"){var et=o.alt,ct=et?'alt="'+et+'"':"";if(l.find(".lg-img-wrap").append(H.getImgMarkup(t,w,ct,d,g,o.sources)),d||b){var Ot=l.find(".lg-object");r.initPictureFill(Ot)}}(r.getSlideType(o)==="image"||r.getSlideType(o)==="video"&&c)&&(r.onLgObjectLoad(l,t,I,st,!0,!1),r.onSlideObjectLoad(l,!!(_&&_.html5&&!c),function(){r.loadContentOnFirstSlideLoad(t,l,st)},function(){r.loadContentOnFirstSlideLoad(t,l,st)}))},this.settings.startAnimationDuration+100)),l.addClass("lg-loaded"),(!this.isFirstSlideWithZoomAnimation()||this.getSlideType(o)==="video"&&!c)&&this.onLgObjectLoad(l,t,I,st,y,!!(_&&_.html5&&!c)),(!this.zoomFromOrigin||!this.currentImageSize)&&l.hasClass("lg-complete_")&&!this.lGalleryOn&&setTimeout(function(){l.addClass("lg-complete")},this.settings.backdropDuration),this.lGalleryOn=!0,n===!0&&(l.hasClass("lg-complete_")?this.preload(t):l.find(".lg-object").first().on("load.lg error.lg",function(){r.preload(t)}))},h.prototype.loadContentOnFirstSlideLoad=function(t,n,r){var o=this;setTimeout(function(){n.find(".lg-dummy-img").remove(),n.removeClass("lg-first-slide"),o.outer.removeClass("lg-first-slide-loading"),o.isDummyImageRemoved=!0,o.preload(t)},r+300)},h.prototype.getItemsToBeInsertedToDom=function(t,n,r){var o=this;r===void 0&&(r=0);var l=[],c=Math.max(r,3);c=Math.min(c,this.galleryItems.length);var d="lg-item-"+this.lgId+"-"+n;if(this.galleryItems.length<=3)return this.galleryItems.forEach(function(w,m){l.push("lg-item-"+o.lgId+"-"+m)}),l;if(t<(this.galleryItems.length-1)/2){for(var g=t;g>t-c/2&&g>=0;g--)l.push("lg-item-"+this.lgId+"-"+g);for(var b=l.length,g=0;g<c-b;g++)l.push("lg-item-"+this.lgId+"-"+(t+g+1))}else{for(var g=t;g<=this.galleryItems.length-1&&g<t+c/2;g++)l.push("lg-item-"+this.lgId+"-"+g);for(var b=l.length,g=0;g<c-b;g++)l.push("lg-item-"+this.lgId+"-"+(t-g-1))}return this.settings.loop&&(t===this.galleryItems.length-1?l.push("lg-item-"+this.lgId+"-0"):t===0&&l.push("lg-item-"+this.lgId+"-"+(this.galleryItems.length-1))),l.indexOf(d)===-1&&l.push("lg-item-"+this.lgId+"-"+n),l},h.prototype.organizeSlideItems=function(t,n){var r=this,o=this.getItemsToBeInsertedToDom(t,n,this.settings.numberOfSlideItemsInDom);return o.forEach(function(l){r.currentItemsInDom.indexOf(l)===-1&&r.$inner.append('<div id="'+l+'" class="lg-item"></div>')}),this.currentItemsInDom.forEach(function(l){o.indexOf(l)===-1&&k("#"+l).remove()}),o},h.prototype.getPreviousSlideIndex=function(){var t=0;try{var n=this.outer.find(".lg-current").first().attr("id");t=parseInt(n.split("-")[3])||0}catch{t=0}return t},h.prototype.setDownloadValue=function(t){if(this.settings.download){var n=this.galleryItems[t],r=n.downloadUrl===!1||n.downloadUrl==="false";if(r)this.outer.addClass("lg-hide-download");else{var o=this.getElementById("lg-download");this.outer.removeClass("lg-hide-download"),o.attr("href",n.downloadUrl||n.src),n.download&&o.attr("download",n.download)}}},h.prototype.makeSlideAnimation=function(t,n,r){var o=this;this.lGalleryOn&&r.addClass("lg-slide-progress"),setTimeout(function(){o.outer.addClass("lg-no-trans"),o.outer.find(".lg-item").removeClass("lg-prev-slide lg-next-slide"),t==="prev"?(n.addClass("lg-prev-slide"),r.addClass("lg-next-slide")):(n.addClass("lg-next-slide"),r.addClass("lg-prev-slide")),setTimeout(function(){o.outer.find(".lg-item").removeClass("lg-current"),n.addClass("lg-current"),o.outer.removeClass("lg-no-trans")},50)},this.lGalleryOn?this.settings.slideDelay:0)},h.prototype.slide=function(t,n,r,o){var l=this,c=this.getPreviousSlideIndex();if(this.currentItemsInDom=this.organizeSlideItems(t,c),!(this.lGalleryOn&&c===t)){var d=this.galleryItems.length;if(!this.lgBusy){this.settings.counter&&this.updateCurrentCounter(t);var g=this.getSlideItem(t),b=this.getSlideItem(c),w=this.galleryItems[t],m=w.__slideVideoInfo;if(this.outer.attr("data-lg-slide-type",this.getSlideType(w)),this.setDownloadValue(t),m){var f=this.mediaContainerPosition,C=f.top,_=f.bottom,T=H.getSize(this.items[t],this.outer,C+_,m&&this.settings.videoMaxSize);this.resizeVideoSlide(t,T)}if(this.LGel.trigger(D.beforeSlide,{prevIndex:c,index:t,fromTouch:!!n,fromThumb:!!r}),this.lgBusy=!0,clearTimeout(this.hideBarTimeout),this.arrowDisable(t),o||(t<c?o="prev":t>c&&(o="next")),!n)this.makeSlideAnimation(o,g,b);else{this.outer.find(".lg-item").removeClass("lg-prev-slide lg-current lg-next-slide");var v=void 0,y=void 0;d>2?(v=t-1,y=t+1,(t===0&&c===d-1||t===d-1&&c===0)&&(y=0,v=d-1)):(v=0,y=1),o==="prev"?this.getSlideItem(y).addClass("lg-next-slide"):this.getSlideItem(v).addClass("lg-prev-slide"),g.addClass("lg-current")}this.lGalleryOn?setTimeout(function(){l.loadContent(t,!0),l.settings.appendSubHtmlTo!==".lg-item"&&l.addHtml(t)},this.settings.speed+50+(n?0:this.settings.slideDelay)):this.loadContent(t,!0),setTimeout(function(){l.lgBusy=!1,b.removeClass("lg-slide-progress"),l.LGel.trigger(D.afterSlide,{prevIndex:c,index:t,fromTouch:n,fromThumb:r})},(this.lGalleryOn?this.settings.speed+100:100)+(n?0:this.settings.slideDelay))}this.index=t}},h.prototype.updateCurrentCounter=function(t){this.getElementById("lg-counter-current").html(t+1+"")},h.prototype.updateCounterTotal=function(){this.getElementById("lg-counter-all").html(this.galleryItems.length+"")},h.prototype.getSlideType=function(t){return t.__slideVideoInfo?"video":t.iframe?"iframe":"image"},h.prototype.touchMove=function(t,n,r){var o=n.pageX-t.pageX,l=n.pageY-t.pageY,c=!1;if(this.swipeDirection?c=!0:Math.abs(o)>15?(this.swipeDirection="horizontal",c=!0):Math.abs(l)>15&&(this.swipeDirection="vertical",c=!0),!!c){var d=this.getSlideItem(this.index);if(this.swipeDirection==="horizontal"){r==null||r.preventDefault(),this.outer.addClass("lg-dragging"),this.setTranslate(d,o,0);var g=d.get().offsetWidth,b=g*15/100,w=b-Math.abs(o*10/100);this.setTranslate(this.outer.find(".lg-prev-slide").first(),-g+o-w,0),this.setTranslate(this.outer.find(".lg-next-slide").first(),g+o+w,0)}else if(this.swipeDirection==="vertical"&&this.settings.swipeToClose){r==null||r.preventDefault(),this.$container.addClass("lg-dragging-vertical");var m=1-Math.abs(l)/window.innerHeight;this.$backdrop.css("opacity",m);var f=1-Math.abs(l)/(window.innerWidth*2);this.setTranslate(d,0,l,f,f),Math.abs(l)>100&&this.outer.addClass("lg-hide-items").removeClass("lg-components-open")}}},h.prototype.touchEnd=function(t,n,r){var o=this,l;this.settings.mode!=="lg-slide"&&this.outer.addClass("lg-slide"),setTimeout(function(){o.$container.removeClass("lg-dragging-vertical"),o.outer.removeClass("lg-dragging lg-hide-items").addClass("lg-components-open");var c=!0;if(o.swipeDirection==="horizontal"){l=t.pageX-n.pageX;var d=Math.abs(t.pageX-n.pageX);l<0&&d>o.settings.swipeThreshold?(o.goToNextSlide(!0),c=!1):l>0&&d>o.settings.swipeThreshold&&(o.goToPrevSlide(!0),c=!1)}else if(o.swipeDirection==="vertical")if(l=Math.abs(t.pageY-n.pageY),o.settings.closable&&o.settings.swipeToClose&&l>100){o.closeGallery();return}else o.$backdrop.css("opacity",1);if(o.outer.find(".lg-item").removeAttr("style"),c&&Math.abs(t.pageX-n.pageX)<5){var g=k(r.target);o.isPosterElement(g)&&o.LGel.trigger(D.posterClick)}o.swipeDirection=void 0}),setTimeout(function(){!o.outer.hasClass("lg-dragging")&&o.settings.mode!=="lg-slide"&&o.outer.removeClass("lg-slide")},this.settings.speed+100)},h.prototype.enableSwipe=function(){var t=this,n={},r={},o=!1,l=!1;this.settings.enableSwipe&&(this.$inner.on("touchstart.lg",function(c){t.dragOrSwipeEnabled=!0;var d=t.getSlideItem(t.index);(k(c.target).hasClass("lg-item")||d.get().contains(c.target))&&!t.outer.hasClass("lg-zoomed")&&!t.lgBusy&&c.touches.length===1&&(l=!0,t.touchAction="swipe",t.manageSwipeClass(),n={pageX:c.touches[0].pageX,pageY:c.touches[0].pageY})}),this.$inner.on("touchmove.lg",function(c){l&&t.touchAction==="swipe"&&c.touches.length===1&&(r={pageX:c.touches[0].pageX,pageY:c.touches[0].pageY},t.touchMove(n,r,c),o=!0)}),this.$inner.on("touchend.lg",function(c){if(t.touchAction==="swipe"){if(o)o=!1,t.touchEnd(r,n,c);else if(l){var d=k(c.target);t.isPosterElement(d)&&t.LGel.trigger(D.posterClick)}t.touchAction=void 0,l=!1}}))},h.prototype.enableDrag=function(){var t=this,n={},r={},o=!1,l=!1;this.settings.enableDrag&&(this.outer.on("mousedown.lg",function(c){t.dragOrSwipeEnabled=!0;var d=t.getSlideItem(t.index);(k(c.target).hasClass("lg-item")||d.get().contains(c.target))&&!t.outer.hasClass("lg-zoomed")&&!t.lgBusy&&(c.preventDefault(),t.lgBusy||(t.manageSwipeClass(),n={pageX:c.pageX,pageY:c.pageY},o=!0,t.outer.get().scrollLeft+=1,t.outer.get().scrollLeft-=1,t.outer.removeClass("lg-grab").addClass("lg-grabbing"),t.LGel.trigger(D.dragStart)))}),k(window).on("mousemove.lg.global"+this.lgId,function(c){o&&t.lgOpened&&(l=!0,r={pageX:c.pageX,pageY:c.pageY},t.touchMove(n,r),t.LGel.trigger(D.dragMove))}),k(window).on("mouseup.lg.global"+this.lgId,function(c){if(t.lgOpened){var d=k(c.target);l?(l=!1,t.touchEnd(r,n,c),t.LGel.trigger(D.dragEnd)):t.isPosterElement(d)&&t.LGel.trigger(D.posterClick),o&&(o=!1,t.outer.removeClass("lg-grabbing").addClass("lg-grab"))}}))},h.prototype.triggerPosterClick=function(){var t=this;this.$inner.on("click.lg",function(n){!t.dragOrSwipeEnabled&&t.isPosterElement(k(n.target))&&t.LGel.trigger(D.posterClick)})},h.prototype.manageSwipeClass=function(){var t=this.index+1,n=this.index-1;this.settings.loop&&this.galleryItems.length>2&&(this.index===0?n=this.galleryItems.length-1:this.index===this.galleryItems.length-1&&(t=0)),this.outer.find(".lg-item").removeClass("lg-next-slide lg-prev-slide"),n>-1&&this.getSlideItem(n).addClass("lg-prev-slide"),this.getSlideItem(t).addClass("lg-next-slide")},h.prototype.goToNextSlide=function(t){var n=this,r=this.settings.loop;t&&this.galleryItems.length<3&&(r=!1),this.lgBusy||(this.index+1<this.galleryItems.length?(this.index++,this.LGel.trigger(D.beforeNextSlide,{index:this.index}),this.slide(this.index,!!t,!1,"next")):r?(this.index=0,this.LGel.trigger(D.beforeNextSlide,{index:this.index}),this.slide(this.index,!!t,!1,"next")):this.settings.slideEndAnimation&&!t&&(this.outer.addClass("lg-right-end"),setTimeout(function(){n.outer.removeClass("lg-right-end")},400)))},h.prototype.goToPrevSlide=function(t){var n=this,r=this.settings.loop;t&&this.galleryItems.length<3&&(r=!1),this.lgBusy||(this.index>0?(this.index--,this.LGel.trigger(D.beforePrevSlide,{index:this.index,fromTouch:t}),this.slide(this.index,!!t,!1,"prev")):r?(this.index=this.galleryItems.length-1,this.LGel.trigger(D.beforePrevSlide,{index:this.index,fromTouch:t}),this.slide(this.index,!!t,!1,"prev")):this.settings.slideEndAnimation&&!t&&(this.outer.addClass("lg-left-end"),setTimeout(function(){n.outer.removeClass("lg-left-end")},400)))},h.prototype.keyPress=function(){var t=this;k(window).on("keydown.lg.global"+this.lgId,function(n){t.lgOpened&&t.settings.escKey===!0&&n.keyCode===27&&(n.preventDefault(),t.settings.allowMediaOverlap&&t.outer.hasClass("lg-can-toggle")&&t.outer.hasClass("lg-components-open")?t.outer.removeClass("lg-components-open"):t.closeGallery()),t.lgOpened&&t.galleryItems.length>1&&(n.keyCode===37&&(n.preventDefault(),t.goToPrevSlide()),n.keyCode===39&&(n.preventDefault(),t.goToNextSlide()))})},h.prototype.arrow=function(){var t=this;this.getElementById("lg-prev").on("click.lg",function(){t.goToPrevSlide()}),this.getElementById("lg-next").on("click.lg",function(){t.goToNextSlide()})},h.prototype.arrowDisable=function(t){if(!this.settings.loop&&this.settings.hideControlOnEnd){var n=this.getElementById("lg-prev"),r=this.getElementById("lg-next");t+1===this.galleryItems.length?r.attr("disabled","disabled").addClass("disabled"):r.removeAttr("disabled").removeClass("disabled"),t===0?n.attr("disabled","disabled").addClass("disabled"):n.removeAttr("disabled").removeClass("disabled")}},h.prototype.setTranslate=function(t,n,r,o,l){o===void 0&&(o=1),l===void 0&&(l=1),t.css("transform","translate3d("+n+"px, "+r+"px, 0px) scale3d("+o+", "+l+", 1)")},h.prototype.mousewheel=function(){var t=this,n=0;this.outer.on("wheel.lg",function(r){if(!(!r.deltaY||t.galleryItems.length<2)){r.preventDefault();var o=new Date().getTime();o-n<1e3||(n=o,r.deltaY>0?t.goToNextSlide():r.deltaY<0&&t.goToPrevSlide())}})},h.prototype.isSlideElement=function(t){return t.hasClass("lg-outer")||t.hasClass("lg-item")||t.hasClass("lg-img-wrap")||t.hasClass("lg-img-rotate")},h.prototype.isPosterElement=function(t){var n=this.getSlideItem(this.index).find(".lg-video-play-button").get();return t.hasClass("lg-video-poster")||t.hasClass("lg-video-play-button")||n&&n.contains(t.get())},h.prototype.toggleMaximize=function(){var t=this;this.getElementById("lg-maximize").on("click.lg",function(){t.$container.toggleClass("lg-inline"),t.refreshOnResize()})},h.prototype.invalidateItems=function(){for(var t=0;t<this.items.length;t++){var n=this.items[t],r=k(n);r.off("click.lgcustom-item-"+r.attr("data-lg-id"))}},h.prototype.trapFocus=function(){var t=this;this.$container.get().focus({preventScroll:!0}),k(window).on("keydown.lg.global"+this.lgId,function(n){if(t.lgOpened){var r=n.key==="Tab"||n.keyCode===9;if(r){var o=H.getFocusableElements(t.$container.get()),l=o[0],c=o[o.length-1];n.shiftKey?document.activeElement===l&&(c.focus(),n.preventDefault()):document.activeElement===c&&(l.focus(),n.preventDefault())}}})},h.prototype.manageCloseGallery=function(){var t=this;if(this.settings.closable){var n=!1;this.getElementById("lg-close").on("click.lg",function(){t.closeGallery()}),this.settings.closeOnTap&&(this.outer.on("mousedown.lg",function(r){var o=k(r.target);t.isSlideElement(o)?n=!0:n=!1}),this.outer.on("mousemove.lg",function(){n=!1}),this.outer.on("mouseup.lg",function(r){var o=k(r.target);t.isSlideElement(o)&&n&&(t.outer.hasClass("lg-dragging")||t.closeGallery())}))}},h.prototype.closeGallery=function(t){var n=this;if(!this.lgOpened||!this.settings.closable&&!t)return 0;this.LGel.trigger(D.beforeClose),this.settings.resetScrollPosition&&!this.settings.hideScrollbar&&k(window).scrollTop(this.prevScrollTop);var r=this.items[this.index],o;if(this.zoomFromOrigin&&r){var l=this.mediaContainerPosition,c=l.top,d=l.bottom,g=this.galleryItems[this.index],b=g.__slideVideoInfo,w=g.poster,m=H.getSize(r,this.outer,c+d,b&&w&&this.settings.videoMaxSize);o=H.getTransform(r,this.outer,c,d,m)}this.zoomFromOrigin&&o?(this.outer.addClass("lg-closing lg-zoom-from-image"),this.getSlideItem(this.index).addClass("lg-start-end-progress").css("transition-duration",this.settings.startAnimationDuration+"ms").css("transform",o)):(this.outer.addClass("lg-hide-items"),this.outer.removeClass("lg-zoom-from-image")),this.destroyModules(),this.lGalleryOn=!1,this.isDummyImageRemoved=!1,this.zoomFromOrigin=this.settings.zoomFromOrigin,clearTimeout(this.hideBarTimeout),this.hideBarTimeout=!1,k("html").removeClass("lg-on"),this.outer.removeClass("lg-visible lg-components-open"),this.$backdrop.removeClass("in").css("opacity",0);var f=this.zoomFromOrigin&&o?Math.max(this.settings.startAnimationDuration,this.settings.backdropDuration):this.settings.backdropDuration;return this.$container.removeClass("lg-show-in"),setTimeout(function(){n.zoomFromOrigin&&o&&n.outer.removeClass("lg-zoom-from-image"),n.$container.removeClass("lg-show"),n.resetScrollBar(),n.$backdrop.removeAttr("style").css("transition-duration",n.settings.backdropDuration+"ms"),n.outer.removeClass("lg-closing "+n.settings.startClass),n.getSlideItem(n.index).removeClass("lg-start-end-progress"),n.$inner.empty(),n.lgOpened&&n.LGel.trigger(D.afterClose,{instance:n}),n.$container.get()&&n.$container.get().blur(),n.lgOpened=!1},f+100),f+100},h.prototype.initModules=function(){this.plugins.forEach(function(t){try{t.init()}catch{console.warn("lightGallery:- make sure lightGallery module is properly initiated")}})},h.prototype.destroyModules=function(t){this.plugins.forEach(function(n){try{t?n.destroy():n.closeGallery&&n.closeGallery()}catch{console.warn("lightGallery:- make sure lightGallery module is properly destroyed")}})},h.prototype.refresh=function(t){this.settings.dynamic||this.invalidateItems(),t?this.galleryItems=t:this.galleryItems=this.getItems(),this.updateControls(),this.openGalleryOnItemClick(),this.LGel.trigger(D.updateSlides)},h.prototype.updateControls=function(){this.addSlideVideoInfo(this.galleryItems),this.updateCounterTotal(),this.manageSingleSlideClassName()},h.prototype.destroyGallery=function(){this.destroyModules(!0),this.settings.dynamic||this.invalidateItems(),k(window).off(".lg.global"+this.lgId),this.LGel.off(".lg"),this.$container.remove()},h.prototype.destroy=function(){var t=this.closeGallery(!0);return t?setTimeout(this.destroyGallery.bind(this),t):this.destroyGallery(),t},h}();function sn(h,t){return new en(h,t)}/*!
 * lightgallery | 2.8.2 | November 28th 2024
 * http://www.lightgalleryjs.com/
 * Copyright (c) 2020 Sachin Neravath;
 * @license GPLv3
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var It=function(){return It=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},It.apply(this,arguments)},nn={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",alignThumbnails:"middle",thumbWidth:100,thumbHeight:"80px",thumbMargin:5,appendThumbnailsTo:".lg-components",toggleThumb:!1,enableThumbDrag:!0,enableThumbSwipe:!0,thumbnailSwipeThreshold:10,loadYouTubeThumbnail:!0,youTubeThumbSize:1,thumbnailPluginStrings:{toggleThumbnails:"Toggle thumbnails"}},mt={containerResize:"lgContainerResize",updateSlides:"lgUpdateSlides",beforeOpen:"lgBeforeOpen",beforeSlide:"lgBeforeSlide"},rn=function(){function h(t,n){return this.thumbOuterWidth=0,this.thumbTotalWidth=0,this.translateX=0,this.thumbClickable=!1,this.core=t,this.$LG=n,this}return h.prototype.init=function(){this.settings=It(It({},nn),this.core.settings),this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.galleryItems.length*(this.settings.thumbWidth+this.settings.thumbMargin),this.translateX=0,this.setAnimateThumbStyles(),this.core.settings.allowMediaOverlap||(this.settings.toggleThumb=!1),this.settings.thumbnail&&(this.build(),this.settings.animateThumb?(this.settings.enableThumbDrag&&this.enableThumbDrag(),this.settings.enableThumbSwipe&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toggleThumbBar(),this.thumbKeyPress())},h.prototype.build=function(){var t=this;this.setThumbMarkup(),this.manageActiveClassOnSlideChange(),this.$lgThumb.first().on("click.lg touchend.lg",function(n){var r=t.$LG(n.target);r.hasAttribute("data-lg-item-id")&&setTimeout(function(){if(t.thumbClickable&&!t.core.lgBusy){var o=parseInt(r.attr("data-lg-item-id"));t.core.slide(o,!1,!0,!1)}},50)}),this.core.LGel.on(mt.beforeSlide+".thumb",function(n){var r=n.detail.index;t.animateThumb(r)}),this.core.LGel.on(mt.beforeOpen+".thumb",function(){t.thumbOuterWidth=t.core.outer.get().offsetWidth}),this.core.LGel.on(mt.updateSlides+".thumb",function(){t.rebuildThumbnails()}),this.core.LGel.on(mt.containerResize+".thumb",function(){t.core.lgOpened&&setTimeout(function(){t.thumbOuterWidth=t.core.outer.get().offsetWidth,t.animateThumb(t.core.index),t.thumbOuterWidth=t.core.outer.get().offsetWidth},50)})},h.prototype.setThumbMarkup=function(){var t="lg-thumb-outer ";this.settings.alignThumbnails&&(t+="lg-thumb-align-"+this.settings.alignThumbnails);var n='<div class="'+t+`">
        <div class="lg-thumb lg-group">
        </div>
        </div>`;this.core.outer.addClass("lg-has-thumb"),this.settings.appendThumbnailsTo===".lg-components"?this.core.$lgComponents.append(n):this.core.outer.append(n),this.$thumbOuter=this.core.outer.find(".lg-thumb-outer").first(),this.$lgThumb=this.core.outer.find(".lg-thumb").first(),this.settings.animateThumb&&this.core.outer.find(".lg-thumb").css("transition-duration",this.core.settings.speed+"ms").css("width",this.thumbTotalWidth+"px").css("position","relative"),this.setThumbItemHtml(this.core.galleryItems)},h.prototype.enableThumbDrag=function(){var t=this,n={cords:{startX:0,endX:0},isMoved:!1,newTranslateX:0,startTime:new Date,endTime:new Date,touchMoveTime:0},r=!1;this.$thumbOuter.addClass("lg-grab"),this.core.outer.find(".lg-thumb").first().on("mousedown.lg.thumb",function(o){t.thumbTotalWidth>t.thumbOuterWidth&&(o.preventDefault(),n.cords.startX=o.pageX,n.startTime=new Date,t.thumbClickable=!1,r=!0,t.core.outer.get().scrollLeft+=1,t.core.outer.get().scrollLeft-=1,t.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))}),this.$LG(window).on("mousemove.lg.thumb.global"+this.core.lgId,function(o){t.core.lgOpened&&r&&(n.cords.endX=o.pageX,n=t.onThumbTouchMove(n))}),this.$LG(window).on("mouseup.lg.thumb.global"+this.core.lgId,function(){t.core.lgOpened&&(n.isMoved?n=t.onThumbTouchEnd(n):t.thumbClickable=!0,r&&(r=!1,t.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab")))})},h.prototype.enableThumbSwipe=function(){var t=this,n={cords:{startX:0,endX:0},isMoved:!1,newTranslateX:0,startTime:new Date,endTime:new Date,touchMoveTime:0};this.$lgThumb.on("touchstart.lg",function(r){t.thumbTotalWidth>t.thumbOuterWidth&&(r.preventDefault(),n.cords.startX=r.targetTouches[0].pageX,t.thumbClickable=!1,n.startTime=new Date)}),this.$lgThumb.on("touchmove.lg",function(r){t.thumbTotalWidth>t.thumbOuterWidth&&(r.preventDefault(),n.cords.endX=r.targetTouches[0].pageX,n=t.onThumbTouchMove(n))}),this.$lgThumb.on("touchend.lg",function(){n.isMoved?n=t.onThumbTouchEnd(n):t.thumbClickable=!0})},h.prototype.rebuildThumbnails=function(){var t=this;this.$thumbOuter.addClass("lg-rebuilding-thumbnails"),setTimeout(function(){t.thumbTotalWidth=t.core.galleryItems.length*(t.settings.thumbWidth+t.settings.thumbMargin),t.$lgThumb.css("width",t.thumbTotalWidth+"px"),t.$lgThumb.empty(),t.setThumbItemHtml(t.core.galleryItems),t.animateThumb(t.core.index)},50),setTimeout(function(){t.$thumbOuter.removeClass("lg-rebuilding-thumbnails")},200)},h.prototype.setTranslate=function(t){this.$lgThumb.css("transform","translate3d(-"+t+"px, 0px, 0px)")},h.prototype.getPossibleTransformX=function(t){return t>this.thumbTotalWidth-this.thumbOuterWidth&&(t=this.thumbTotalWidth-this.thumbOuterWidth),t<0&&(t=0),t},h.prototype.animateThumb=function(t){if(this.$lgThumb.css("transition-duration",this.core.settings.speed+"ms"),this.settings.animateThumb){var n=0;switch(this.settings.currentPagerPosition){case"left":n=0;break;case"middle":n=this.thumbOuterWidth/2-this.settings.thumbWidth/2;break;case"right":n=this.thumbOuterWidth-this.settings.thumbWidth}this.translateX=(this.settings.thumbWidth+this.settings.thumbMargin)*t-1-n,this.translateX>this.thumbTotalWidth-this.thumbOuterWidth&&(this.translateX=this.thumbTotalWidth-this.thumbOuterWidth),this.translateX<0&&(this.translateX=0),this.setTranslate(this.translateX)}},h.prototype.onThumbTouchMove=function(t){return t.newTranslateX=this.translateX,t.isMoved=!0,t.touchMoveTime=new Date().valueOf(),t.newTranslateX-=t.cords.endX-t.cords.startX,t.newTranslateX=this.getPossibleTransformX(t.newTranslateX),this.setTranslate(t.newTranslateX),this.$thumbOuter.addClass("lg-dragging"),t},h.prototype.onThumbTouchEnd=function(t){t.isMoved=!1,t.endTime=new Date,this.$thumbOuter.removeClass("lg-dragging");var n=t.endTime.valueOf()-t.startTime.valueOf(),r=t.cords.endX-t.cords.startX,o=Math.abs(r)/n;return o>.15&&t.endTime.valueOf()-t.touchMoveTime<30?(o+=1,o>2&&(o+=1),o=o+o*(Math.abs(r)/this.thumbOuterWidth),this.$lgThumb.css("transition-duration",Math.min(o-1,2)+"settings"),r=r*o,this.translateX=this.getPossibleTransformX(this.translateX-r),this.setTranslate(this.translateX)):this.translateX=t.newTranslateX,Math.abs(t.cords.endX-t.cords.startX)<this.settings.thumbnailSwipeThreshold&&(this.thumbClickable=!0),t},h.prototype.getThumbHtml=function(t,n,r){var o=this.core.galleryItems[n].__slideVideoInfo||{},l;o.youtube&&this.settings.loadYouTubeThumbnail?l="//img.youtube.com/vi/"+o.youtube[1]+"/"+this.settings.youTubeThumbSize+".jpg":l=t;var c=document.createElement("div");c.setAttribute("data-lg-item-id",n+""),c.className="lg-thumb-item "+(n===this.core.index?"active":""),c.style.cssText="width: "+this.settings.thumbWidth+"px; height: "+this.settings.thumbHeight+"; margin-right: "+this.settings.thumbMargin+"px;";var d=document.createElement("img");return d.alt=r||"",d.setAttribute("data-lg-item-id",n+""),d.src=l,c.appendChild(d),c},h.prototype.setThumbItemHtml=function(t){for(var n=0;n<t.length;n++){var r=this.getThumbHtml(t[n].thumb,n,t[n].alt);this.$lgThumb.append(r)}},h.prototype.setAnimateThumbStyles=function(){this.settings.animateThumb&&this.core.outer.addClass("lg-animate-thumb")},h.prototype.manageActiveClassOnSlideChange=function(){var t=this;this.core.LGel.on(mt.beforeSlide+".thumb",function(n){var r=t.core.outer.find(".lg-thumb-item"),o=n.detail.index;r.removeClass("active"),r.eq(o).addClass("active")})},h.prototype.toggleThumbBar=function(){var t=this;this.settings.toggleThumb&&(this.core.outer.addClass("lg-can-toggle"),this.core.$toolbar.append('<button type="button" aria-label="'+this.settings.thumbnailPluginStrings.toggleThumbnails+'" class="lg-toggle-thumb lg-icon"></button>'),this.core.outer.find(".lg-toggle-thumb").first().on("click.lg",function(){t.core.outer.toggleClass("lg-components-open")}))},h.prototype.thumbKeyPress=function(){var t=this;this.$LG(window).on("keydown.lg.thumb.global"+this.core.lgId,function(n){!t.core.lgOpened||!t.settings.toggleThumb||(n.keyCode===38?(n.preventDefault(),t.core.outer.addClass("lg-components-open")):n.keyCode===40&&(n.preventDefault(),t.core.outer.removeClass("lg-components-open")))})},h.prototype.destroy=function(){this.settings.thumbnail&&(this.$LG(window).off(".lg.thumb.global"+this.core.lgId),this.core.LGel.off(".lg.thumb"),this.core.LGel.off(".thumb"),this.$thumbOuter.remove(),this.core.outer.removeClass("lg-has-thumb"))},h}();/*!
 * lightgallery | 2.8.2 | November 28th 2024
 * http://www.lightgalleryjs.com/
 * Copyright (c) 2020 Sachin Neravath;
 * @license GPLv3
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kt=function(){return kt=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},kt.apply(this,arguments)},on={scale:1,zoom:!0,infiniteZoom:!0,actualSize:!0,showZoomInOutIcons:!1,actualSizeIcons:{zoomIn:"lg-zoom-in",zoomOut:"lg-zoom-out"},enableZoomAfter:300,zoomPluginStrings:{zoomIn:"Zoom in",zoomOut:"Zoom out",viewActualSize:"View actual size"}},tt={containerResize:"lgContainerResize",beforeOpen:"lgBeforeOpen",afterOpen:"lgAfterOpen",slideItemLoad:"lgSlideItemLoad",afterSlide:"lgAfterSlide",rotateLeft:"lgRotateLeft",rotateRight:"lgRotateRight",flipHorizontal:"lgFlipHorizontal",flipVertical:"lgFlipVertical"},Gt=500,an=function(){function h(t,n){return this.core=t,this.$LG=n,this.settings=kt(kt({},on),this.core.settings),this}return h.prototype.buildTemplates=function(){var t=this.settings.showZoomInOutIcons?'<button id="'+this.core.getIdName("lg-zoom-in")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomIn+'" class="lg-zoom-in lg-icon"></button><button id="'+this.core.getIdName("lg-zoom-out")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomOut+'" class="lg-zoom-out lg-icon"></button>':"";this.settings.actualSize&&(t+='<button id="'+this.core.getIdName("lg-actual-size")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.viewActualSize+'" class="'+this.settings.actualSizeIcons.zoomIn+' lg-icon"></button>'),this.core.outer.addClass("lg-use-transition-for-zoom"),this.core.$toolbar.first().append(t)},h.prototype.enableZoom=function(t){var n=this,r=this.settings.enableZoomAfter+t.detail.delay;this.$LG("body").first().hasClass("lg-from-hash")&&t.detail.delay?r=0:this.$LG("body").first().removeClass("lg-from-hash"),this.zoomableTimeout=setTimeout(function(){n.isImageSlide(n.core.index)&&(n.core.getSlideItem(t.detail.index).addClass("lg-zoomable"),t.detail.index===n.core.index&&n.setZoomEssentials())},r+30)},h.prototype.enableZoomOnSlideItemLoad=function(){this.core.LGel.on(tt.slideItemLoad+".zoom",this.enableZoom.bind(this))},h.prototype.getDragCords=function(t){return{x:t.pageX,y:t.pageY}},h.prototype.getSwipeCords=function(t){var n=t.touches[0].pageX,r=t.touches[0].pageY;return{x:n,y:r}},h.prototype.getDragAllowedAxises=function(t,n){if(!this.containerRect)return{allowX:!1,allowY:!1};var r=this.core.getSlideItem(this.core.index).find(".lg-image").first().get(),o=0,l=0,c=r.getBoundingClientRect();t?(o=r.offsetHeight*t,l=r.offsetWidth*t):n?(o=c.height+n*c.height,l=c.width+n*c.width):(o=c.height,l=c.width);var d=o>this.containerRect.height,g=l>this.containerRect.width;return{allowX:g,allowY:d}},h.prototype.setZoomEssentials=function(){this.containerRect=this.core.$content.get().getBoundingClientRect()},h.prototype.zoomImage=function(t,n,r,o){if(!(Math.abs(n)<=0)){var l=this.containerRect.width/2+this.containerRect.left,c=this.containerRect.height/2+this.containerRect.top+this.scrollTop,d,g;t===1&&(this.positionChanged=!1);var b=this.getDragAllowedAxises(0,n),w=b.allowY,m=b.allowX;this.positionChanged&&(d=this.left/(this.scale-n),g=this.top/(this.scale-n),this.pageX=l-d,this.pageY=c-g,this.positionChanged=!1);var f=this.getPossibleSwipeDragCords(n),C,_,T=l-this.pageX,v=c-this.pageY;if(t-n>1){var y=(t-n)/Math.abs(n);T=(n<0?-T:T)+this.left*(y+(n<0?-1:1)),v=(n<0?-v:v)+this.top*(y+(n<0?-1:1)),C=T/y,_=v/y}else{var y=(t-n)*n;C=T*y,_=v*y}r&&(m?this.isBeyondPossibleLeft(C,f.minX)?C=f.minX:this.isBeyondPossibleRight(C,f.maxX)&&(C=f.maxX):t>1&&(C<f.minX?C=f.minX:C>f.maxX&&(C=f.maxX)),w?this.isBeyondPossibleTop(_,f.minY)?_=f.minY:this.isBeyondPossibleBottom(_,f.maxY)&&(_=f.maxY):t>1&&(_<f.minY?_=f.minY:_>f.maxY&&(_=f.maxY))),this.setZoomStyles({x:C,y:_,scale:t}),this.left=C,this.top=_,o&&this.setZoomImageSize()}},h.prototype.resetImageTranslate=function(t){if(this.isImageSlide(t)){var n=this.core.getSlideItem(t).find(".lg-image").first();this.imageReset=!1,n.removeClass("reset-transition reset-transition-y reset-transition-x"),this.core.outer.removeClass("lg-actual-size"),n.css("width","auto").css("height","auto"),setTimeout(function(){n.removeClass("no-transition")},10)}},h.prototype.setZoomImageSize=function(){var t=this,n=this.core.getSlideItem(this.core.index).find(".lg-image").first();setTimeout(function(){var r=t.getCurrentImageActualSizeScale();t.scale>=r&&(n.addClass("no-transition"),t.imageReset=!0)},Gt),setTimeout(function(){var r=t.getCurrentImageActualSizeScale();if(t.scale>=r){var o=t.getDragAllowedAxises(t.scale);n.css("width",n.get().naturalWidth+"px").css("height",n.get().naturalHeight+"px"),t.core.outer.addClass("lg-actual-size"),o.allowX&&o.allowY?n.addClass("reset-transition"):o.allowX&&!o.allowY?n.addClass("reset-transition-x"):!o.allowX&&o.allowY&&n.addClass("reset-transition-y")}},Gt+50)},h.prototype.setZoomStyles=function(t){var n=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),r=this.core.getSlideItem(this.core.index).find(".lg-image").first(),o=this.core.outer.find(".lg-current .lg-dummy-img").first();this.scale=t.scale,r.css("transform","scale3d("+t.scale+", "+t.scale+", 1)"),o.css("transform","scale3d("+t.scale+", "+t.scale+", 1)");var l="translate3d("+t.x+"px, "+t.y+"px, 0)";n.css("transform",l)},h.prototype.setActualSize=function(t,n){var r=this;if(!this.zoomInProgress){this.zoomInProgress=!0;var o=this.core.galleryItems[this.core.index];this.resetImageTranslate(t),setTimeout(function(){if(!(!o.src||r.core.outer.hasClass("lg-first-slide-loading"))){var l=r.getCurrentImageActualSizeScale(),c=r.scale;r.core.outer.hasClass("lg-zoomed")?r.scale=1:r.scale=r.getScale(l),r.setPageCords(n),r.beginZoom(r.scale),r.zoomImage(r.scale,r.scale-c,!0,!0)}},50),setTimeout(function(){r.core.outer.removeClass("lg-grabbing").addClass("lg-grab")},60),setTimeout(function(){r.zoomInProgress=!1},Gt+110)}},h.prototype.getNaturalWidth=function(t){var n=this.core.getSlideItem(t).find(".lg-image").first(),r=this.core.galleryItems[t].width;return r?parseFloat(r):n.get().naturalWidth},h.prototype.getActualSizeScale=function(t,n){var r,o;return t>=n?(r=t/n,o=r||2):o=1,o},h.prototype.getCurrentImageActualSizeScale=function(){var t=this.core.getSlideItem(this.core.index).find(".lg-image").first(),n=t.get().offsetWidth,r=this.getNaturalWidth(this.core.index)||n;return this.getActualSizeScale(r,n)},h.prototype.getPageCords=function(t){var n={};if(t)n.x=t.pageX||t.touches[0].pageX,n.y=t.pageY||t.touches[0].pageY;else{var r=this.core.$content.get().getBoundingClientRect();n.x=r.width/2+r.left,n.y=r.height/2+this.scrollTop+r.top}return n},h.prototype.setPageCords=function(t){var n=this.getPageCords(t);this.pageX=n.x,this.pageY=n.y},h.prototype.manageActualPixelClassNames=function(){var t=this.core.getElementById("lg-actual-size");t.removeClass(this.settings.actualSizeIcons.zoomIn).addClass(this.settings.actualSizeIcons.zoomOut)},h.prototype.beginZoom=function(t){return this.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),t>1?(this.core.outer.addClass("lg-zoomed"),this.manageActualPixelClassNames()):this.resetZoom(),t>1},h.prototype.getScale=function(t){var n=this.getCurrentImageActualSizeScale();return t<1?t=1:t>n&&(t=n),t},h.prototype.init=function(){var t=this;if(this.settings.zoom){this.buildTemplates(),this.enableZoomOnSlideItemLoad();var n=null;this.core.outer.on("dblclick.lg",function(r){t.$LG(r.target).hasClass("lg-image")&&t.setActualSize(t.core.index,r)}),this.core.outer.on("touchstart.lg",function(r){var o=t.$LG(r.target);r.touches.length===1&&o.hasClass("lg-image")&&(n?(clearTimeout(n),n=null,r.preventDefault(),t.setActualSize(t.core.index,r)):n=setTimeout(function(){n=null},300))}),this.core.LGel.on(tt.containerResize+".zoom "+tt.rotateRight+".zoom "+tt.rotateLeft+".zoom "+tt.flipHorizontal+".zoom "+tt.flipVertical+".zoom",function(){if(!(!t.core.lgOpened||!t.isImageSlide(t.core.index)||t.core.touchAction)){var r=t.core.getSlideItem(t.core.index).find(".lg-img-wrap").first();t.top=0,t.left=0,t.setZoomEssentials(),t.setZoomSwipeStyles(r,{x:0,y:0}),t.positionChanged=!0}}),this.$LG(window).on("scroll.lg.zoom.global"+this.core.lgId,function(){t.core.lgOpened&&(t.scrollTop=t.$LG(window).scrollTop())}),this.core.getElementById("lg-zoom-out").on("click.lg",function(){if(t.isImageSlide(t.core.index)){var r=0;t.imageReset&&(t.resetImageTranslate(t.core.index),r=50),setTimeout(function(){var o=t.scale-t.settings.scale;o<1&&(o=1),t.beginZoom(o),t.zoomImage(o,-t.settings.scale,!0,!t.settings.infiniteZoom)},r)}}),this.core.getElementById("lg-zoom-in").on("click.lg",function(){t.zoomIn()}),this.core.getElementById("lg-actual-size").on("click.lg",function(){t.setActualSize(t.core.index)}),this.core.LGel.on(tt.beforeOpen+".zoom",function(){t.core.outer.find(".lg-item").removeClass("lg-zoomable")}),this.core.LGel.on(tt.afterOpen+".zoom",function(){t.scrollTop=t.$LG(window).scrollTop(),t.pageX=t.core.outer.width()/2,t.pageY=t.core.outer.height()/2+t.scrollTop,t.scale=1}),this.core.LGel.on(tt.afterSlide+".zoom",function(r){var o=r.detail.prevIndex;t.scale=1,t.positionChanged=!1,t.zoomInProgress=!1,t.resetZoom(o),t.resetImageTranslate(o),t.isImageSlide(t.core.index)&&t.setZoomEssentials()}),this.zoomDrag(),this.pinchZoom(),this.zoomSwipe(),this.zoomableTimeout=!1,this.positionChanged=!1,this.zoomInProgress=!1}},h.prototype.zoomIn=function(){if(this.isImageSlide(this.core.index)){var t=this.scale+this.settings.scale;this.settings.infiniteZoom||(t=this.getScale(t)),this.beginZoom(t),this.zoomImage(t,Math.min(this.settings.scale,t-this.scale),!0,!this.settings.infiniteZoom)}},h.prototype.resetZoom=function(t){this.core.outer.removeClass("lg-zoomed lg-zoom-drag-transition");var n=this.core.getElementById("lg-actual-size"),r=this.core.getSlideItem(t!==void 0?t:this.core.index);n.removeClass(this.settings.actualSizeIcons.zoomOut).addClass(this.settings.actualSizeIcons.zoomIn),r.find(".lg-img-wrap").first().removeAttr("style"),r.find(".lg-image").first().removeAttr("style"),this.scale=1,this.left=0,this.top=0,this.setPageCords()},h.prototype.getTouchDistance=function(t){return Math.sqrt((t.touches[0].pageX-t.touches[1].pageX)*(t.touches[0].pageX-t.touches[1].pageX)+(t.touches[0].pageY-t.touches[1].pageY)*(t.touches[0].pageY-t.touches[1].pageY))},h.prototype.pinchZoom=function(){var t=this,n=0,r=!1,o=1,l=0,c=this.core.getSlideItem(this.core.index);this.core.outer.on("touchstart.lg",function(d){if(c=t.core.getSlideItem(t.core.index),!!t.isImageSlide(t.core.index)&&d.touches.length===2){if(d.preventDefault(),t.core.outer.hasClass("lg-first-slide-loading"))return;o=t.scale||1,t.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),t.setPageCords(d),t.resetImageTranslate(t.core.index),t.core.touchAction="pinch",n=t.getTouchDistance(d)}}),this.core.$inner.on("touchmove.lg",function(d){if(d.touches.length===2&&t.core.touchAction==="pinch"&&(t.$LG(d.target).hasClass("lg-item")||c.get().contains(d.target))){d.preventDefault();var g=t.getTouchDistance(d),b=n-g;if(!r&&Math.abs(b)>5&&(r=!0),r){l=t.scale;var w=Math.max(1,o+-b*.02);t.scale=Math.round((w+Number.EPSILON)*100)/100;var m=t.scale-l;t.zoomImage(t.scale,Math.round((m+Number.EPSILON)*100)/100,!1,!1)}}}),this.core.$inner.on("touchend.lg",function(d){if(t.core.touchAction==="pinch"&&(t.$LG(d.target).hasClass("lg-item")||c.get().contains(d.target))){if(r=!1,n=0,t.scale<=1)t.resetZoom();else{var g=t.getCurrentImageActualSizeScale();if(t.scale>=g){var b=g-t.scale;b===0&&(b=.01),t.zoomImage(g,b,!1,!0)}t.manageActualPixelClassNames(),t.core.outer.addClass("lg-zoomed")}t.core.touchAction=void 0}})},h.prototype.touchendZoom=function(t,n,r,o,l){var c=n.x-t.x,d=n.y-t.y,g=Math.abs(c)/l+1,b=Math.abs(d)/l+1;g>2&&(g+=1),b>2&&(b+=1),c=c*g,d=d*b;var w=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),m={};m.x=this.left+c,m.y=this.top+d;var f=this.getPossibleSwipeDragCords();(Math.abs(c)>15||Math.abs(d)>15)&&(o&&(this.isBeyondPossibleTop(m.y,f.minY)?m.y=f.minY:this.isBeyondPossibleBottom(m.y,f.maxY)&&(m.y=f.maxY)),r&&(this.isBeyondPossibleLeft(m.x,f.minX)?m.x=f.minX:this.isBeyondPossibleRight(m.x,f.maxX)&&(m.x=f.maxX)),o?this.top=m.y:m.y=this.top,r?this.left=m.x:m.x=this.left,this.setZoomSwipeStyles(w,m),this.positionChanged=!0)},h.prototype.getZoomSwipeCords=function(t,n,r,o,l){var c={};if(o){if(c.y=this.top+(n.y-t.y),this.isBeyondPossibleTop(c.y,l.minY)){var d=l.minY-c.y;c.y=l.minY-d/6}else if(this.isBeyondPossibleBottom(c.y,l.maxY)){var g=c.y-l.maxY;c.y=l.maxY+g/6}}else c.y=this.top;if(r){if(c.x=this.left+(n.x-t.x),this.isBeyondPossibleLeft(c.x,l.minX)){var b=l.minX-c.x;c.x=l.minX-b/6}else if(this.isBeyondPossibleRight(c.x,l.maxX)){var w=c.x-l.maxX;c.x=l.maxX+w/6}}else c.x=this.left;return c},h.prototype.isBeyondPossibleLeft=function(t,n){return t>=n},h.prototype.isBeyondPossibleRight=function(t,n){return t<=n},h.prototype.isBeyondPossibleTop=function(t,n){return t>=n},h.prototype.isBeyondPossibleBottom=function(t,n){return t<=n},h.prototype.isImageSlide=function(t){var n=this.core.galleryItems[t];return this.core.getSlideType(n)==="image"},h.prototype.getPossibleSwipeDragCords=function(t){var n=this.core.getSlideItem(this.core.index).find(".lg-image").first(),r=this.core.mediaContainerPosition.bottom,o=n.get().getBoundingClientRect(),l=o.height,c=o.width;t&&(l=l+t*l,c=c+t*c);var d=(l-this.containerRect.height)/2,g=(this.containerRect.height-l)/2+r,b=(c-this.containerRect.width)/2,w=(this.containerRect.width-c)/2,m={minY:d,maxY:g,minX:b,maxX:w};return m},h.prototype.setZoomSwipeStyles=function(t,n){t.css("transform","translate3d("+n.x+"px, "+n.y+"px, 0)")},h.prototype.zoomSwipe=function(){var t=this,n={},r={},o=!1,l=!1,c=!1,d=new Date,g=new Date,b,w,m=this.core.getSlideItem(this.core.index);this.core.$inner.on("touchstart.lg",function(f){if(t.isImageSlide(t.core.index)&&(m=t.core.getSlideItem(t.core.index),(t.$LG(f.target).hasClass("lg-item")||m.get().contains(f.target))&&f.touches.length===1&&t.core.outer.hasClass("lg-zoomed"))){f.preventDefault(),d=new Date,t.core.touchAction="zoomSwipe",w=t.core.getSlideItem(t.core.index).find(".lg-img-wrap").first();var C=t.getDragAllowedAxises(0);c=C.allowY,l=C.allowX,(l||c)&&(n=t.getSwipeCords(f)),b=t.getPossibleSwipeDragCords(),t.core.outer.addClass("lg-zoom-dragging lg-zoom-drag-transition")}}),this.core.$inner.on("touchmove.lg",function(f){if(f.touches.length===1&&t.core.touchAction==="zoomSwipe"&&(t.$LG(f.target).hasClass("lg-item")||m.get().contains(f.target))){f.preventDefault(),t.core.touchAction="zoomSwipe",r=t.getSwipeCords(f);var C=t.getZoomSwipeCords(n,r,l,c,b);(Math.abs(r.x-n.x)>15||Math.abs(r.y-n.y)>15)&&(o=!0,t.setZoomSwipeStyles(w,C))}}),this.core.$inner.on("touchend.lg",function(f){if(t.core.touchAction==="zoomSwipe"&&(t.$LG(f.target).hasClass("lg-item")||m.get().contains(f.target))){if(f.preventDefault(),t.core.touchAction=void 0,t.core.outer.removeClass("lg-zoom-dragging"),!o)return;o=!1,g=new Date;var C=g.valueOf()-d.valueOf();t.touchendZoom(n,r,l,c,C)}})},h.prototype.zoomDrag=function(){var t=this,n={},r={},o=!1,l=!1,c=!1,d=!1,g,b,w,m;this.core.outer.on("mousedown.lg.zoom",function(f){if(t.isImageSlide(t.core.index)){var C=t.core.getSlideItem(t.core.index);if(t.$LG(f.target).hasClass("lg-item")||C.get().contains(f.target)){g=new Date,m=t.core.getSlideItem(t.core.index).find(".lg-img-wrap").first();var _=t.getDragAllowedAxises(0);d=_.allowY,c=_.allowX,t.core.outer.hasClass("lg-zoomed")&&t.$LG(f.target).hasClass("lg-object")&&(c||d)&&(f.preventDefault(),n=t.getDragCords(f),w=t.getPossibleSwipeDragCords(),o=!0,t.core.outer.removeClass("lg-grab").addClass("lg-grabbing lg-zoom-drag-transition lg-zoom-dragging"))}}}),this.$LG(window).on("mousemove.lg.zoom.global"+this.core.lgId,function(f){if(o){l=!0,r=t.getDragCords(f);var C=t.getZoomSwipeCords(n,r,c,d,w);t.setZoomSwipeStyles(m,C)}}),this.$LG(window).on("mouseup.lg.zoom.global"+this.core.lgId,function(f){if(o){if(b=new Date,o=!1,t.core.outer.removeClass("lg-zoom-dragging"),l&&(n.x!==r.x||n.y!==r.y)){r=t.getDragCords(f);var C=b.valueOf()-g.valueOf();t.touchendZoom(n,r,c,d,C)}l=!1}t.core.outer.removeClass("lg-grabbing").addClass("lg-grab")})},h.prototype.closeGallery=function(){this.resetZoom(),this.zoomInProgress=!1},h.prototype.destroy=function(){this.$LG(window).off(".lg.zoom.global"+this.core.lgId),this.core.LGel.off(".lg.zoom"),this.core.LGel.off(".zoom"),clearTimeout(this.zoomableTimeout),this.zoomableTimeout=!1},h}();const ln={class:"p-4 bg-white rounded-xl border border-slate-200 ticket-details"},hn={class:"flex justify-between items-center gap-1.5 flex-wrap pb-3 border-b border-slate-200"},cn={class:"text-slate-500 text-sm font-normal"},un={class:"flex gap-2 items-center"},dn={class:"text-blue-500 text-sm"},gn={class:"flex justify-between items-center gap-2 flex-wrap pt-3"},fn={class:"flex flex-col gap-1"},pn={class:"text-slate-500 text-sm font-normal"},mn={class:"text-slate-900 text-sm"},vn={class:"flex flex-col gap-1 overflow-auto"},bn={class:"text-slate-500 text-sm font-normal"},yn={class:"text-slate-900 text-sm truncate max-w-60 lg:min-w-60"},wn={class:"flex flex-col gap-1 overflow-hidden mt-3"},Sn={class:"text-slate-500 text-sm font-normal"},Cn={class:"text-slate-900 text-sm truncate w-full"},_n={class:"text-black text-lg font-medium tracking-tight mt-4"},Tn={class:"flex justify-between items-center gap-2 flex-wrap mt-3"},xn={class:"flex flex-col gap-1"},In={class:"text-slate-500 text-sm font-normal"},kn={class:"text-slate-900 text-sm"},On={class:"flex flex-col gap-1"},Pn={class:"text-slate-500 text-sm font-normal"},Ln={class:"text-slate-900 text-sm"},zn={class:"text-black text-lg font-medium tracking-tight mt-4"},En={class:"mt-3 flex flex-wrap gap-2.5",id:"gallery"},An=["href"],Mn=["src"],Dn=["href"],Rn={class:"highlighted mt-6 flex flex-col gap-3"},$n=["innerHTML"],Hn={__name:"SupportTicketDetails",props:{supportTicket:Object,highlightedMessages:Array},setup(h){const t=h,n=l=>l.type!="pdf",r=l=>l.type=="pdf";jt(t,()=>{setTimeout(()=>{var l,c;((c=(l=t.supportTicket)==null?void 0:l.attachments)==null?void 0:c.length)>0&&sn(document.getElementById("gallery"),{plugins:[rn,an],speed:500})},500)});function o(l){var c=/(https?:\/\/[^\s]+)/g,d=l.replace(c,function(g){return'<a href="'+g+'" target="_blank">'+g+"</a>"});return d}return(l,c)=>{var d,g,b,w;return X(),F("div",ln,[L("div",hn,[L("span",cn,N(h.supportTicket.created_at),1),L("div",un,[L("span",dn,"#"+N(h.supportTicket.ticket_no),1),L("span",{class:vt(["px-2 py-1 rounded-xl capitalize text-xs ticketStatus",h.supportTicket.status])},N(h.supportTicket.status),3)])]),L("div",gn,[L("div",fn,[L("div",pn,N(l.$t("Order Number")),1),L("div",mn,N(h.supportTicket.order_number||"N/A"),1)]),L("div",vn,[L("div",bn,N(l.$t("Issue Type")),1),L("div",yn,N(h.supportTicket.issue_type),1)])]),L("div",wn,[L("div",Sn,N(l.$t("Subject")),1),L("div",Cn,N(h.supportTicket.subject),1)]),L("div",_n,N(l.$t("Contact Info")),1),L("div",Tn,[L("div",xn,[L("div",In,N(l.$t("Email")),1),L("div",kn,N(h.supportTicket.email||"N/A"),1)]),L("div",On,[L("div",Pn,N(l.$t("Phone")),1),L("div",Ln,N(h.supportTicket.phone||"N/A"),1)])]),L("div",zn,N(l.$t("File Attachment")),1),L("div",En,[(X(!0),F(Tt,null,xt((g=(d=h.supportTicket)==null?void 0:d.attachments)==null?void 0:g.filter(n),(m,f)=>(X(),F("a",{href:m.src,key:f,class:"w-12 h-12 border border-slate-200 rounded-lg"},[L("img",{src:m.src,class:"w-full h-full object-cover rounded-lg",loading:"lazy"},null,8,Mn)],8,An))),128)),(X(!0),F(Tt,null,xt((w=(b=h.supportTicket)==null?void 0:b.attachments)==null?void 0:w.filter(r),(m,f)=>(X(),F("a",{href:m.src,key:f,class:"w-12 h-12 border border-slate-200 rounded-lg","data-iframe":"true"},c[0]||(c[0]=[L("img",{src:"/assets/images/pdf.png",class:"w-full h-full object-cover rounded-lg",loading:"lazy"},null,-1)]),8,Dn))),128))]),L("div",Rn,[(X(!0),F(Tt,null,xt(h.highlightedMessages,m=>(X(),F("div",{key:m.id,class:"highlighted_item",innerHTML:o(m.message)},null,8,$n))),128))])])}}},Bn=we(Hn,[["__scopeId","data-v-8c88e79c"]]),Nn={class:"message_wrapper h-100"},Xn={class:"message_item_content"},Gn={key:0,class:"message_item_avatar shrink-0"},jn=["src"],Fn=["innerHTML"],Wn={key:1,class:"message_item_avatar shrink-0"},Un=["src"],qn={class:"message_date"},Yn={key:0,class:"reply-form mt-2 mx-3 mb-3"},Vn=["placeholder","disabled"],Zn={__name:"SupportTicketMessages",props:{messages:Array,supportTicket:Object},emits:["messageSubmitted"],setup(h,{emit:t}){const n=Ds(),r=Se(),o=Ce(),l=ht(null),c=h,d=t,g=ht(""),b=ht(!1),w=ht(!1);jt(()=>c.supportTicket,()=>{var _;w.value=!!((_=c.supportTicket)!=null&&_.user_chat)},{deep:!0}),jt(()=>c.messages,()=>{ve(f)},{deep:!0}),_e(()=>{ve(f)});const m=()=>{var _;g.value&&(b.value=!0,axios.post("/support-ticket-message",{message:g.value,ticket_number:(_=c.supportTicket)==null?void 0:_.ticket_no},{headers:{Authorization:o.token}}).then(()=>{g.value="",d("messageSubmitted",!0),b.value=!1}).catch(T=>{b.value=!1,n.error(T.response.data.message,{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"})}))},f=()=>{l.value&&(l.value.scrollTop=l.value.scrollHeight)};function C(_){var T=/(https?:\/\/[^\s]+)/g,v=_.replace(T,function(y){return'<a href="'+y+'" target="_blank">'+y+"</a>"});return v}return(_,T)=>{var v,y,I,E;return X(),F("div",Nn,[L("div",{class:vt(["messages",((v=c.supportTicket)==null?void 0:v.status)=="pending"||((y=c.supportTicket)==null?void 0:y.status)=="confirm"?"runningConversation":""]),ref_key:"messagesBox",ref:l},[(X(!0),F(Tt,null,xt(h.messages,A=>(X(),F("div",{key:A.id,class:vt(["message_item",lt(o).user.id==A.sender_id?"sender":"receiver"])},[L("div",Xn,[lt(o).user.id!=A.sender_id?(X(),F("div",Gn,[L("img",{src:A.profile_photo,alt:"avatar",loading:"lazy"},null,8,jn)])):_t("",!0),L("div",{class:"message_item_text",innerHTML:C(A.message)},null,8,Fn),lt(o).user.id==A.sender_id?(X(),F("div",Wn,[L("img",{src:A.profile_photo,alt:"avatar",loading:"lazy"},null,8,Un)])):_t("",!0)]),L("div",qn,N(A.created_at),1)],2))),128))],2),((I=c.supportTicket)==null?void 0:I.status)=="pending"||((E=c.supportTicket)==null?void 0:E.status)=="confirm"?(X(),F("div",Yn,[L("form",{onSubmit:Bs(m,["prevent"])},[Rs(L("input",{type:"text",placeholder:_.$root.$t("Write a message")+"...",class:vt(["w-full p-3 outline-none focus:ring-1 focus:ring-primary",lt(r).langDirection=="rtl"?"pl-12":"pr-12"]),required:"","onUpdate:modelValue":T[0]||(T[0]=A=>g.value=A),disabled:!w.value||b.value},null,10,Vn),[[$s,g.value]]),w.value?(X(),F("button",{key:0,class:vt(["send-btn bg-primary btn",lt(r).langDirection=="rtl"?"left-[6px]":"right-[6px]"]),type:"submit"},[b.value?(X(),be(Hs,{key:1,color:"text-white"})):(X(),be(lt(qs),{key:0,class:"w-5 h-5 -rotate-45"}))],2)):_t("",!0)],32)])):_t("",!0)])}}},Jn=we(Zn,[["__scopeId","data-v-00b528a0"]]),Kn={class:"h-full flex flex-col"},Qn={class:"bg-white px-3 text-slate-600 flex items-center gap-1 pt-2"},tr={class:"leading-normal"},er={class:"px-2 pt-2 md:px-4 md:pt-4 lg:px-6 lg:pt-6 md:pr-8 lg:pr-16 h-full"},ir={class:"p-3 md:p-4 xl:p-6 bg-white rounded-xl md:rounded-2xl grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-4 h-full"},sr={class:""},hr={__name:"SupportTicketDetails",setup(h){const t=Ce(),n=Ns(),r=Xs(),o=Se(),l=ht({}),c=ht([]),d=ht([]);_e(()=>{g(),new Vs(o.pusher_app_key,{cluster:o.pusher_app_cluster,encrypted:!0}).subscribe("support-ticket-message-channel").bind("support-ticket-message-event",function(m){var f=m.ticket_number;f==n.params.ticketNumber&&g()})});const g=()=>{axios.get("support-ticket/show",{params:{ticket_number:n.params.ticketNumber},headers:{Authorization:t.token}}).then(b=>{l.value=b.data.data.support_ticket,d.value=b.data.data.highlighted_messages,c.value=b.data.data.support_ticket.messages}).catch(b=>{b.response.status===401&&(t.token=null,t.user=null,t.addresses=[],t.favoriteProducts=0,r.push("/"))})};return(b,w)=>{const m=Gs("router-link");return X(),F("div",Kn,[L("div",Qn,[pt(lt(js),{class:"w-5 h-5 md:w-6 md:h-6"}),pt(m,{to:"/support-tickets",class:"leading-normal hover:text-primary"},{default:Fs(()=>[Ws(N(b.$t("Support Ticket")),1)]),_:1}),L("span",tr,"/ "+N(b.$t("Support Ticket Details")),1)]),pt(Us,{title:b.$t("Support Ticket Details")},null,8,["title"]),L("div",er,[L("div",ir,[pt(Bn,{supportTicket:l.value,highlightedMessages:d.value},null,8,["supportTicket","highlightedMessages"]),L("div",sr,[pt(Jn,{messages:c.value,supportTicket:l.value,onMessageSubmitted:w[0]||(w[0]=f=>g())},null,8,["messages","supportTicket"])])])])])}}};export{hr as default};
