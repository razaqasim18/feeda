import{q as E,u as S,d as l,k as M,l as B,c as t,o as e,f as N,a as _,m as d,t as y,S as p,F as w,r as x,b as g}from"./app-RmZLii80.js";import{_ as b}from"./ProductCard-ez34evva.js";const A={class:"main-container pt-8 pb-12"},F={key:0,class:"text-slate-800 text-lg lg:text-3xl font-bold"},H={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 items-stretch mt-6"},V={key:0,class:"col-span-full flex justify-center py-4"},$={key:1,class:"col-span-full text-center py-4 text-slate-800"},j={key:2,class:"col-span-full text-center py-4 text-slate-800"},q={key:2,class:"mt-4 md:mt-8 grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 gap-3 md:gap-6 items-start"},R={__name:"MostPopular",setup(z){const k=E(),P=S(),m=l(1),h=l(12),o=l([]),r=l(!0),n=l(!1),u=l(!1);M(()=>{f(),window.addEventListener("scroll",v)}),B(()=>{window.removeEventListener("scroll",v)});let i=!1;const v=()=>{if(i||n.value||u.value)return;const a=window.innerHeight+window.scrollY,s=document.documentElement.offsetHeight;a>s-200&&(i=!0,L(),setTimeout(()=>{i=!1},500))},L=()=>{m.value+=1,f(!0)},f=async(a=!1)=>{try{a?n.value=!0:r.value=!0;const s=await axios.get("/products",{params:{page:m.value,per_page:h.value,sort_type:"popular_product"},headers:{"Accept-Language":P.locale||"en",Authorization:k.token}});a?o.value=[...o.value,...s.data.data.products]:o.value=s.data.data.products,s.data.data.products.length<h.value&&(u.value=!0)}catch(s){console.error("Error fetching products:",s)}finally{r.value=!1,n.value=!1}};return(a,s)=>(e(),t("div",A,[r.value?(e(),N(p,{key:1,class:"w-48 sm:w-60 md:w-72 lg:w-96 h-12 rounded-lg"})):(e(),t("div",F,y(a.$t("Most Popular")),1)),_("div",H,[(e(!0),t(w,null,x(o.value,c=>(e(),t("div",{key:c.id,class:"w-full"},[g(b,{product:c},null,8,["product"])]))),128)),n.value?(e(),t("div",V,[g(p,{class:"w-full h-[220px] sm:h-[330px]"})])):d("",!0),u.value&&o.value.length>0?(e(),t("div",$)):d("",!0),o.value.length===0&&!r.value?(e(),t("div",j,y(a.$t("No Products Found")),1)):d("",!0)]),r.value?(e(),t("div",q,[(e(),t(w,null,x(6,c=>_("div",{key:c},[g(p,{class:"w-full h-[220px] sm:h-[330px]"})])),64))])):d("",!0)]))}};export{R as default};
