import{q as S,u as B,d as l,k as D,l as N,c as t,o as e,f as b,a as y,m as u,t as w,g as A,S as p,F as x,r as k,b as g}from"./app-CTBXvSfy.js";import{_ as F}from"./ProductCard-Dvp9sORT.js";const H={class:"main-container pt-8 pb-12"},M={key:0,class:"text-slate-800 text-lg lg:text-3xl font-bold"},V={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 items-stretch mt-6"},$={key:0,class:"col-span-full flex justify-center py-4"},j={key:1,class:"col-span-full text-center py-4 text-slate-800"},q={key:2,class:"col-span-full text-center py-4 text-slate-800"},z={key:2,class:"mt-4 md:mt-8 grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 gap-3 md:gap-6 items-start"},U={__name:"DiscountProduct",setup(C){const L=S(),m=B(),P=m.seasonDiscount,f=l(1),h=l(12),o=l([]),r=l(!0),n=l(!1),d=l(!1);D(()=>{_(),window.addEventListener("scroll",v)}),N(()=>{window.removeEventListener("scroll",v)});let i=!1;const v=()=>{if(i||n.value||d.value)return;const a=window.innerHeight+window.scrollY,s=document.documentElement.offsetHeight;a>s-200&&(i=!0,E(),setTimeout(()=>{i=!1},500))},E=()=>{f.value+=1,_(!0)},_=async(a=!1)=>{try{a?n.value=!0:r.value=!0;const s=await axios.get("/discount-products",{params:{page:f.value,per_page:h.value,sort_type:"popular_product"},headers:{"Accept-Language":m.locale||"en",Authorization:L.token}});a?o.value=[...o.value,...s.data.data.products]:o.value=s.data.data.products,s.data.data.products.length<h.value&&(d.value=!0)}catch(s){console.error("Error fetching products:",s)}finally{r.value=!1,n.value=!1}};return(a,s)=>(e(),t("div",H,[r.value?(e(),b(p,{key:1,class:"w-48 sm:w-60 md:w-72 lg:w-96 h-12 rounded-lg"})):(e(),t("div",M,w(a.$t(A(P))),1)),y("div",V,[(e(!0),t(x,null,k(o.value,c=>(e(),t("div",{key:c.id,class:"w-full"},[g(F,{product:c},null,8,["product"])]))),128)),n.value?(e(),t("div",$,[g(p,{class:"w-full h-[220px] sm:h-[330px]"})])):u("",!0),d.value&&o.value.length>0?(e(),t("div",j)):u("",!0),o.value.length===0&&!r.value?(e(),t("div",q,w(a.$t("No Products Found")),1)):u("",!0)]),r.value?(e(),t("div",z,[(e(),t(x,null,k(6,c=>y("div",{key:c},[g(p,{class:"w-full h-[220px] sm:h-[330px]"})])),64))])):u("",!0)]))}};export{U as default};
