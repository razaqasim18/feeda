import{c as i,o as r,a as e,_ as F,p as ie,t,x as k,b as h,g,ci as me,u as ve,d as u,s as P,E as he,q as de,k as ue,v as I,w as U,Y as fe,N as oe,O as ge,ac as ne,a2 as be,B as x,m as T,F as A,r as z,Q as re,h as y,C as N,a7 as _e,V as xe,R as ye,e as we,H as L,f as ke}from"./app-Dj5MePlR.js";function $e(m,w){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})])}function Ce(m,w){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Te(m,w){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),e("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"})])}function je(m,w){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M1.5 4.5a3 3 0 0 1 3-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 0 1-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 0 0 6.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 0 1 1.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 0 1-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5Z","clip-rule":"evenodd"})])}const Me={class:"flex justify-between items-center gap-1.5 flex-wrap pb-3 border-b border-slate-200"},Ve={class:"text-slate-500 text-sm font-normal"},Se={class:"flex gap-2 items-center"},Ue={class:"text-blue-500 text-sm"},Be={class:"flex justify-between items-center gap-2 flex-wrap pt-3"},Ne={class:"flex flex-col gap-1"},Ae={class:"text-slate-500 text-sm font-normal"},ze={class:"text-slate-900 text-sm"},De={class:"flex flex-col gap-1 overflow-auto"},Ie={class:"text-slate-500 text-sm font-normal"},Le={class:"text-slate-900 text-sm truncate max-w-60 lg:min-w-60"},Pe={class:"flex flex-col gap-1 overflow-hidden"},Fe={class:"text-slate-500 text-sm font-normal"},Ee={class:"text-slate-900 text-sm truncate max-w-80 lg:min-w-80"},Oe={class:"h-8 w-8 bg-slate-100 rounded-2xl flex justify-center items-center"},Re={__name:"TicketCard",props:{supportTicket:Object},setup(m){const w=ie(),_=m,b=()=>{w.push({name:"support-ticket-details",params:{ticketNumber:_.supportTicket.ticket_no}})};return(v,$)=>(r(),i("div",{class:"p-4 bg-white rounded-xl border border-slate-200 cursor-pointer",onClick:$[0]||($[0]=S=>b())},[e("div",Me,[e("span",Ve,t(m.supportTicket.created_at),1),e("div",Se,[e("span",Ue,"#"+t(m.supportTicket.ticket_no),1),e("span",{class:k(["px-2 py-1 rounded-xl capitalize text-xs ticketStatus",m.supportTicket.status])},t(m.supportTicket.status),3)])]),e("div",Be,[e("div",Ne,[e("div",Ae,t(v.$t("Order Number")),1),e("div",ze,t(m.supportTicket.order_number||"N/A"),1)]),e("div",De,[e("div",Ie,t(v.$t("Issue Type")),1),e("div",Le,t(m.supportTicket.issue_type),1)]),e("div",Pe,[e("div",Fe,t(v.$t("Subject")),1),e("div",Ee,t(m.supportTicket.subject),1)]),e("div",Oe,[h(g(me),{class:"w-5 h-5 text-slate-600"})])])]))}},Ze=F(Re,[["__scopeId","data-v-66b61d32"]]),He={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Ye={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},qe={class:"text-slate-950 text-2xl font-medium"},Ge={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Qe={for:"name",class:"form-label mb-1"},We={value:"",selected:""},Je=["value"],Ke={key:0,class:"text-red-500 text-sm"},Xe={for:"name",class:"form-label mb-1"},et={value:"",selected:""},tt=["value"],st={key:0,class:"text-red-500 text-sm"},at={class:"grid grid-cols-1 mt-6"},lt={for:"Subject",class:"form-label mb-1"},ot=["placeholder"],nt={key:0,class:"text-red-500 text-sm"},rt={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-6"},it={class:"form-label mb-1"},dt=["placeholder"],ut={key:0,class:"text-red-500 text-sm"},ct={class:"form-label mb-1"},pt={for:"attachment",class:"cursor-pointer px-4 py-3 rounded-lg border border-dashed border-primary-400 flex items-center gap-2 text-primary text-xs"},mt={class:"mt-3 flex flex-wrap gap-2.5"},vt=["src"],ht=["onClick"],ft={class:"text-slate-950 text-lg font-bold mt-5 flex justify-between gap-2 flex-wrap"},gt={class:"flex justify-start items-center gap-3"},bt={class:"flex gap-1.5 items-center"},_t={class:"form-label",for:"email"},xt={class:"flex gap-1.5 items-center"},yt={class:"form-label",for:"phone"},wt={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-3"},kt={class:"relative rounded-md"},$t={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},Ct={class:"text-gray-500 sm:text-sm"},Tt=["placeholder"],jt={key:0,class:"text-red-500 text-sm"},Mt={class:"relative rounded-md"},Vt={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},St={class:"text-gray-500 sm:text-sm"},Ut=["placeholder"],Bt={key:0,class:"text-red-500 text-sm"},Nt={class:"mt-6"},At=["disabled"],zt={key:1,type:"button",class:"py-4 px-5 bg-primary-200 text-primary w-full rounded-xl flex justify-center items-center gap-1 cursor-not-allowed",disabled:""},Dt={__name:"CreateTicketModal",props:{showModal:Boolean},emits:["update:showModal","ticketCreated"],setup(m,{emit:w}){const _=ve(),b=u(!1),v=u(!1),$=w,S=m;P(()=>S.showModal,s=>{b.value=s}),P(()=>b.value,s=>{$("update:showModal",s)});const B=he(),C=de(),j=u([]),o=u({issue_type:"",subject:"",message:"",email:"",phone:"",order_number:""}),f=u([]),l=u({}),M=u([]);ue(()=>{ce(),pe()});const d=s=>{f.value.push({url:URL.createObjectURL(s.target.files[0]),file:s.target.files[0],type:s.target.files[0].type})},c=s=>{f.value.splice(s,1)},V=u(!1),p=()=>{V.value=!0;const s=new FormData;s.append("issue_type",o.value.issue_type),s.append("subject",o.value.subject),s.append("message",o.value.message),s.append("order_number",o.value.order_number?o.value.order_number:""),s.append("email",o.value.email?o.value.email:""),s.append("phone",o.value.phone?o.value.phone:"");for(let a=0;a<f.value.length;a++)s.append("attachments["+a+"]",f.value[a].file);I.post("/support-ticket",s,{headers:{Authorization:C.token}}).then(a=>{V.value=!1,b.value=!1,o.value={},f.value=[],B.success(a.data.message,{position:_.langDirection==="rtl"?"bottom-right":"bottom-left"}),$("ticketCreated",!0)}).catch(a=>{V.value=!1,l.value=a.response.data.errors})},ce=()=>{I.get("/ticket-issue-types",{headers:{Authorization:C.token}}).then(s=>{j.value=s.data.data.issue_types})},pe=async()=>{I.get("/orders",{headers:{Authorization:C.token}}).then(s=>{M.value=s.data.data.orders})};return(s,a)=>(r(),i("div",null,[h(g(ye),{as:"template",show:b.value},{default:U(()=>[h(g(fe),{as:"div",class:"relative z-10",onClose:a[9]||(a[9]=D=>b.value=!1)},{default:U(()=>[h(g(oe),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:U(()=>a[10]||(a[10]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-50 transition-opacity"},null,-1)])),_:1}),e("div",He,[e("div",Ye,[h(g(oe),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:U(()=>[h(g(ge),{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all my-8 md:my-0 w-full md:max-w-3xl"},{default:U(()=>{var D,E,O,R,Z,H,Y,q,G,Q,W,J,K,X,ee,te,se,ae;return[e("div",{class:k(["bg-white p-5 sm:p-8 relative",g(_).langDirection=="rtl"?"text-right":"text-left"])},[e("div",{class:k(["w-9 h-9 bg-slate-100 rounded-[32px] absolute top-4 flex justify-center items-center cursor-pointer",g(_).langDirection=="rtl"?"left-4":"right-4"]),onClick:a[0]||(a[0]=n=>b.value=!1)},[h(g(ne),{class:"w-6 h-6 text-slate-600"})],2),e("div",qe,t(s.$t("Create Support Ticket")),1),e("form",{onSubmit:a[8]||(a[8]=be(n=>p(),["prevent"])),class:"mt-4"},[e("div",Ge,[e("div",null,[e("label",Qe,t(s.$t("Order Number")),1),x(e("select",{"onUpdate:modelValue":a[1]||(a[1]=n=>o.value.order_number=n),class:k(["form-input bg-transparent",l.value&&((D=l.value)!=null&&D.order_number)?"border-red-500":"border-slate-200"])},[e("option",We,t(s.$t("Select order number")),1),(r(!0),i(A,null,z(M.value,n=>(r(),i("option",{key:n.id,value:n.order_code},t(n.order_code),9,Je))),128))],2),[[re,o.value.order_number]]),l.value&&((E=l.value)!=null&&E.order_number)?(r(),i("span",Ke,t((O=l.value)==null?void 0:O.order_number[0]),1)):T("",!0)]),e("div",null,[e("label",Xe,[y(t(s.$t("Issue Type"))+" ",1),a[11]||(a[11]=e("small",{class:"text-red-500"},"*",-1))]),x(e("select",{"onUpdate:modelValue":a[2]||(a[2]=n=>o.value.issue_type=n),class:k(["form-input bg-transparent",l.value&&((R=l.value)!=null&&R.issue_type)?"border-red-500":"border-slate-200"])},[e("option",et,t(s.$t("Select issue type")),1),(r(!0),i(A,null,z(j.value,n=>(r(),i("option",{key:n.id,value:n.name},t(n.name),9,tt))),128))],2),[[re,o.value.issue_type]]),l.value&&((Z=l.value)!=null&&Z.issue_type)?(r(),i("span",st,t((H=l.value)==null?void 0:H.issue_type[0]),1)):T("",!0)])]),e("div",at,[e("div",null,[e("label",lt,t(s.$t("Subject")),1),x(e("input",{type:"text",id:"Subject",placeholder:s.$t("Enter subject"),class:k(["form-input",l.value&&((Y=l.value)!=null&&Y.subject)?"border-red-500":"border-slate-200"]),"onUpdate:modelValue":a[3]||(a[3]=n=>o.value.subject=n)},null,10,ot),[[N,o.value.subject]]),l.value&&((q=l.value)!=null&&q.subject)?(r(),i("span",nt,t((G=l.value)==null?void 0:G.subject[0]),1)):T("",!0)])]),e("div",rt,[e("div",null,[e("label",it,[y(t(s.$t("Message"))+" ",1),a[12]||(a[12]=e("small",{class:"text-red-500"},"*",-1))]),x(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=n=>o.value.message=n),class:k(["form-input",l.value&&((Q=l.value)!=null&&Q.message)?"border-red-500":"border-slate-200"]),rows:"4",placeholder:s.$t("Write your message")+"..."},null,10,dt),[[N,o.value.message]]),l.value&&((W=l.value)!=null&&W.message)?(r(),i("span",ut,t((J=l.value)==null?void 0:J.message[0]),1)):T("",!0)]),e("div",null,[e("label",ct,t(s.$t("File Attachment"))+" (jpg, jpeg, png, pdf) ",1),e("label",pt,[e("input",{type:"file",id:"attachment",class:"hidden",accept:"image/jpeg, image/png, image/jpg, application/pdf",onChange:d},null,32),h(g($e),{class:"w-6 h-6"}),y(" "+t(s.$t("Click to upload or, drag and drop here")),1)]),e("div",mt,[(r(!0),i(A,null,z(f.value,(n,le)=>(r(),i("div",{key:le,class:"w-12 h-12 relative"},[e("img",{src:n.type!="application/pdf"?n.url:"/assets/images/pdf.png",class:"w-full h-full object-cover rounded-lg",loading:"lazy"},null,8,vt),e("button",{type:"button",class:"absolute -top-1 -right-1 bg-red-500 rounded-full w-5 h-5 text-white flex justify-center items-center border-2 border-white",onClick:Qt=>c(le)},[h(g(ne),{class:"w-4 h-4"})],8,ht)]))),128))])])]),e("div",ft,[y(t(s.$t("Contact Info"))+" ",1),e("div",gt,[e("div",bt,[a[13]||(a[13]=e("input",{type:"checkbox",id:"email",class:"form-checkbox",checked:""},null,-1)),e("label",_t,t(s.$t("Email Address")),1)]),e("div",xt,[x(e("input",{type:"checkbox",id:"phone",class:"form-checkbox","onUpdate:modelValue":a[5]||(a[5]=n=>v.value=n)},null,512),[[_e,v.value]]),e("label",yt,t(s.$t("Phone Number")),1)])])]),e("div",wt,[e("div",null,[e("div",kt,[e("div",$t,[e("span",Ct,[h(g(Te),{class:"w-5 h-5"})])]),x(e("input",{type:"email",placeholder:s.$t("Enter email address"),class:k(["form-input",l.value&&((K=l.value)!=null&&K.email)?"border-red-500":"border-slate-200"]),style:{"padding-left":"2.5rem"},"onUpdate:modelValue":a[6]||(a[6]=n=>o.value.email=n)},null,10,Tt),[[N,o.value.email]])]),l.value&&((X=l.value)!=null&&X.email)?(r(),i("span",jt,t((ee=l.value)==null?void 0:ee.email[0]),1)):T("",!0)]),e("div",null,[e("div",Mt,[e("div",Vt,[e("span",St,[h(g(je),{class:"w-5 h-5"})])]),x(e("input",{type:"phone",placeholder:s.$t("Enter phone number"),class:k(["form-input",l.value&&((te=l.value)!=null&&te.phone)?"border-red-500":"border-slate-200"]),style:{"padding-left":"2.5rem"},"onUpdate:modelValue":a[7]||(a[7]=n=>o.value.phone=n)},null,10,Ut),[[N,o.value.phone]])]),l.value&&((se=l.value)!=null&&se.phone)?(r(),i("span",Bt,t((ae=l.value)==null?void 0:ae.phone[0]),1)):T("",!0)])]),e("div",Nt,[V.value?(r(),i("button",zt,[y(t(s.$t("Processing"))+" ",1),h(xe)])):(r(),i("button",{key:0,type:"submit",class:"py-4 px-5 bg-primary text-white w-full rounded-xl",disabled:V.value},t(s.$t("Submit Ticket")),9,At))])],32)],2)]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}},It=F(Dt,[["__scopeId","data-v-d0aac01b"]]),Lt={class:"py-3 px-2 text-slate-800 text-lg md:text-2xl font-medium tracking-tight md:leading-loose bg-white flex justify-between gap-2 flex-wrap items-center md:pr-8 lg:pr-16"},Pt={class:"bg-white px-3 border-t border-slate-100 flex gap-4 md:gap-8 overflow-x-auto"},Ft={class:"statusLinkBtn",for:"Pending"},Et={class:"statusLinkBtn",for:"Confirm"},Ot={class:"statusLinkBtn",for:"Cancelled"},Rt={class:"px-2 pt-2 md:px-4 md:pt-4 lg:px-6 lg:pt-6"},Zt={class:"p-3 md:p-4 xl:p-6 bg-white rounded-xl md:rounded-2xl flex flex-col gap-3 md:gap-4"},Ht={key:0},Yt={key:0,class:"flex justify-between items-center w-full mt-8 gap-4 flex-wrap"},qt={class:"text-slate-800 text-base font-normal leading-normal"},Gt={__name:"SupportTicket",setup(m){const w=ie(),_=de(),b=u(!1),v=u("running"),$=u(0),S=u(0),B=u(0),C=u([]),j=u(10),o=u(10),f=u(1);ue(()=>{M(),window.scrollTo(0,0)}),P(()=>v.value,()=>{f.value=1,M()});const l=d=>{f.value=d,M()},M=()=>{axios.get("/support-tickets",{params:{page:f.value,per_page:o.value,status:v.value},headers:{Authorization:_.token}}).then(d=>{j.value=d.data.data.total,$.value=d.data.data.running,S.value=d.data.data.completed,B.value=d.data.data.cancel,C.value=d.data.data.support_tickets}).catch(d=>{d.response.status===401&&(_.token=null,_.user=null,_.addresses=[],_.favoriteProducts=0,w.push("/"))})};return(d,c)=>{const V=we("vue-awesome-paginate");return r(),i("div",null,[e("div",Lt,[y(t(d.$t("Support Ticket"))+" ",1),e("button",{class:"px-3 py-2.5 bg-primary text-white rounded-lg flex items-center text-sm font-normal gap-1",onClick:c[0]||(c[0]=p=>b.value=!0)},[h(g(Ce),{class:"w-5 h-5"}),y(" "+t(d.$t("Create Ticket")),1)])]),e("div",Pt,[e("label",Ft,[x(e("input",{type:"radio","onUpdate:modelValue":c[1]||(c[1]=p=>v.value=p),name:"status",class:"sr-only",value:"Pending",id:"Pending",checked:""},null,512),[[L,v.value]]),y(" "+t(d.$t("Running"))+" ("+t($.value)+") ",1)]),e("label",Et,[x(e("input",{type:"radio","onUpdate:modelValue":c[2]||(c[2]=p=>v.value=p),name:"status",class:"sr-only",value:"completed",id:"Confirm"},null,512),[[L,v.value]]),y(" "+t(d.$t("Completed"))+" ("+t(S.value)+") ",1)]),e("label",Ot,[x(e("input",{type:"radio","onUpdate:modelValue":c[3]||(c[3]=p=>v.value=p),name:"status",class:"sr-only",value:"cancel",id:"Cancelled"},null,512),[[L,v.value]]),y(" "+t(d.$t("Cancel"))+" ("+t(B.value)+") ",1)])]),e("div",Rt,[e("div",Zt,[(r(!0),i(A,null,z(C.value,p=>(r(),ke(Ze,{key:p.id,supportTicket:p},null,8,["supportTicket"]))),128)),C.value.length==0?(r(),i("div",Ht,[e("p",null,t(d.$t("No Ticket Found")),1)])):T("",!0)]),j.value>o.value?(r(),i("div",Yt,[e("div",qt,t(d.$t("Showing"))+" "+t(o.value*(f.value-1)+1)+" "+t(d.$t("to"))+" "+t(o.value*(f.value-1)+C.value.length)+" "+t(d.$t("of"))+" "+t(j.value)+" "+t(d.$t("results")),1),e("div",null,[h(V,{"total-items":j.value,"items-per-page":o.value,type:"button","max-pages-shown":5,modelValue:f.value,"onUpdate:modelValue":c[4]||(c[4]=p=>f.value=p),"hide-prev-next-when-ends":!0,onClick:l},null,8,["total-items","items-per-page","modelValue"])])])):T("",!0)]),h(It,{showModal:b.value,"onUpdate:showModal":c[5]||(c[5]=p=>b.value=p),onTicketCreated:c[6]||(c[6]=p=>M())},null,8,["showModal"])])}}},Jt=F(Gt,[["__scopeId","data-v-160d1560"]]);export{Jt as default};
