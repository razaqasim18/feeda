import{_ as H,p as E,z as O,u as M,q as U,E as J,d as g,T as Z,k as F,c as h,o as m,a as e,b as v,t,g as a,B as k,C as R,x as T,n as ee,f as te,m as V,U as se,h as q,V as oe,K as ae,F as A,r as B,s as W,e as ne,w as G,W as le,Q as re,H as I,X as ie}from"./app-BaRC1mni.js";import{_ as de}from"./OrderConfirmModal-bzdXZ3SO.js";import{r as ce}from"./TrashIcon-Dtf-AJ5j.js";import{_ as ue}from"./CheckoutShippingAddress-DjT4hQsY.js";import{r as me}from"./HomeIcon-DutRXvkk.js";import"./AddressForm-B3ujWZsA.js";import"./AddressFormModal-JU_sqqd0.js";const pe={class:"p-6 bg-white rounded-2xl border border-slate-200"},he={class:"text-slate-950 text-xl font-medium leading-7"},_e={class:"my-4 flex justify-between gap-4"},fe={class:"text-slate-950 text-base font-normal leading-normal"},ve={class:"text-slate-950 text-base font-normal leading-normal"},ge={class:"my-4 flex justify-between gap-4"},be={class:"text-red-500 text-base font-normal leading-normal"},ye={class:"text-slate-950 text-base font-normal leading-normal"},xe={class:"my-4 flex justify-between gap-4"},we={class:"text-slate-950 text-base font-normal leading-normal"},$e={class:"text-slate-950 text-base font-normal leading-normal"},ke={class:"my-4 flex justify-between gap-4"},Ce={class:"text-slate-950 text-base font-normal leading-normal"},Pe={class:"text-slate-950 text-base font-normal leading-normal"},Se={class:"my-4 flex justify-between gap-4"},Me={class:"text-slate-950 text-base font-normal leading-normal"},De={class:"text-slate-950 text-base font-normal leading-normal"},je={class:"my-4 flex justify-between gap-4"},Ie={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Te={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Ve={class:"p-4 mt-6 bg-slate-100 rounded-xl"},Ae={class:"text-black text-base font-normal leading-normal"},Be={class:"relative mt-2"},Oe=["placeholder"],Ue={class:"absolute top-1/2 -translate-y-1/2 left-3"},Ne={key:1,type:"button",class:"px-6 py-4 w-full mt-4 bg-primary-200 rounded-[10px] text-primary text-base font-semibold flex items-center justify-center gap-2",disabled:""},ze={__name:"CheckoutOrderSummary",props:{note:String,paymentMethod:String,area:String},setup(D){const b=new E,s=O(),r=M(),C=U(),d=J(),l=g(!1);let y=g(0);const p=g(""),c=D,x=Z(()=>c.area?Number(c.area.split("-")[1]):0);F(()=>{p.value=s.coupon_code});const w=()=>{p.value.length>0&&N()},i=()=>{p.value="",l.value=!1,s.coupon_code="",N()},n={component:ae,props:{title:"Order Placed",message:"Your order has been placed successfully."}},$=g(!1),u=()=>{if(!s.address){d.error("Please select shipping address",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"});return}if(c.paymentMethod==null){d.error("Please select payment method",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"});return}s.checkoutProducts.length>0?($.value=!0,axios.post("/place-order",{isbirthdayCoupon:y,shop_ids:s.selectedShopIds,address_id:s.address.id,payment_method:c.paymentMethod,coupon_code:p.value,note:c.note,area:c.area},{headers:{Authorization:C.token}}).then(o=>{s.checkoutProducts=[],s.selectedShopIds=[],s.coupon_code="",s.total_amount=0,s.delivery_charge=0,s.coupon_discount=0,s.payable_amount=0,$.value=!1,s.fetchCart(),d(n,{type:"default",hideProgressBar:!0,icon:!1,position:r.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3});let f=o.data.data.order_payment_url;if(f!=null){j(f);return}else s.showOrderConfirmModal=!0}).catch(()=>{$.value=!1})):d.error("Please select at least one product",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"})},j=o=>{let f=700,P=700,L=screen.width/2-f/2,X=screen.height/2-P/2,K="popup,resizable,height="+P+",width="+f+",top="+X+",left="+L,_=window.open(o,null,K);if(_.title="Payment Window Screen - Make Payment",_.onload=()=>{_.title="Payment Window Screen - Make Payment",_.closed&&console.log("close window")},_.focus(),_.closed){d.error("Payment Canceled",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"}),b.push({name:"home"});return}var S=setInterval(Q,1e3);function Q(){try{if(_.closed||!_){clearInterval(S),_.close(),s.orderPaymentCancelModal=!0,d.error("Payment Canceled",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"}),b.push({name:"home"});return}var z=_.location.pathname.replace(/\/order\/\d+/,"");if(z=="/payment/cancel"){clearInterval(S),setTimeout(()=>{_.close(),s.orderPaymentCancelModal=!0,d.error("Payment Canceled",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"}),b.push({name:"home"})},8e3);return}if(z=="/payment/success"){_.close(),clearInterval(S),s.showOrderConfirmModal=!0;return}}catch{}}setTimeout(()=>{clearInterval(S),_.close()},18e4)},N=()=>{axios.post("/cart/checkout",{shop_ids:s.selectedShopIds,coupon_code:p.value},{headers:{Authorization:C.token}}).then(o=>{l.value=o.data.data.apply_coupon,s.total_amount=o.data.data.checkout.total_amount,s.delivery_charge=o.data.data.checkout.delivery_charge,s.coupon_discount=o.data.data.checkout.coupon_discount,s.payable_amount=o.data.data.checkout.payable_amount,l.value?(d.success(o.data.message,{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"}),s.coupon_code=p.value,y=o.data.data.checkout.is_birthday_coupon):(d.error(o.data.message,{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"}),s.coupon_code="")}).catch(o=>{d.error(o.response.data.message,{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"})})};return(o,f)=>(m(),h("div",null,[e("div",pe,[e("div",he,t(o.$t("Order Summary")),1),e("div",_e,[e("div",fe,t(o.$t("Subtotal")),1),e("div",ve,t(a(r).showCurrency(a(s).total_amount)),1)]),e("div",ge,[e("div",be,t(o.$t("Discount")),1),e("div",ye," -"+t(a(r).showCurrency(a(s).coupon_discount)),1)]),f[1]||(f[1]=e("div",{class:"w-full h-[0px] border-t border-dashed border-slate-400"},null,-1)),e("div",xe,[e("div",we,t(o.$t("Subtotal After Discount")),1),e("div",$e,t(a(r).showCurrency((a(s).total_amount-a(s).coupon_discount).toFixed(2))),1)]),e("div",ke,[e("div",Ce,t(o.$t("Shipping Charge")),1),e("div",Pe,t(a(r).showCurrency(a(s).delivery_charge+x.value)),1)]),e("div",Se,[e("div",Me,t(o.$t("Vat & Tax")),1),e("div",De,t(a(r).showCurrency(a(s).order_tax_amount)),1)]),f[2]||(f[2]=e("div",{class:"w-full h-[0px] border border-slate-500"},null,-1)),e("div",je,[e("div",Ie,t(o.$t("Total Payable")),1),e("div",Te,t(a(r).showCurrency(a(s).payable_amount+x.value)),1)]),e("div",Ve,[e("div",Ae,t(o.$t("Have a coupon"))+"? ",1),e("div",Be,[k(e("input",{type:"text","onUpdate:modelValue":f[0]||(f[0]=P=>p.value=P),class:T(["formInputCoupon pr-14 p-3",l.value?"text-green-500 pl-10":""]),placeholder:o.$t("Enter coupon code")},null,10,Oe),[[R,p.value]]),l.value?(m(),h("button",{key:1,class:"bg-slate-100 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:i},[v(a(ce),{class:"w-6 h-6 text-red-500"})])):(m(),h("button",{key:0,class:"bg-slate-700 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:w},[v(a(ee),{class:"w-6 h-6 text-white"})])),e("span",Ue,[l.value?(m(),te(a(se),{key:0,class:"w-6 h-6 text-green-500"})):V("",!0)])])])]),$.value?(m(),h("button",Ne,[q(t(o.$t("Processing"))+" ",1),v(oe)])):(m(),h("button",{key:0,class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:u},t(o.$t("Place Order")),1)),v(de)]))}},We=H(ze,[["__scopeId","data-v-2033e518"]]),Ge={class:"space-y-4 mt-3 transition duration-300"},He={class:"text-slate-950 text-base font-medium leading-normal"},Ee={class:"space-y-2 divide-y divide-slate-200"},Fe={class:"w-[72px] h-[95px]"},Re=["src"],qe={class:"flex flex-col gap-1 w-full"},Le={class:"text-primary text-xs font-normal leading-none"},Xe={class:"text-slate-950 text-base font-normal leading-normal"},Ke={class:"flex flex-wrap justify-between items-center gap-3"},Qe={class:"flex items-center gap-1"},Ye={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},Je={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},Ze={class:"text-slate-800 text-base font-normal leading-normal"},et={__name:"checkoutProducts",setup(D){U();const b=M(),s=O();return(r,C)=>(m(),h("div",Ge,[(m(!0),h(A,null,B(a(s).checkoutProducts,d=>(m(),h("div",{key:d.shop_id,class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},[e("div",He,t(d.shop_name),1),e("div",Ee,[(m(!0),h(A,null,B(d.products,l=>{var y,p;return m(),h("div",{key:l.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[e("div",Fe,[e("img",{src:l.thumbnail,class:"w-full h-full object-contain"},null,8,Re)]),e("div",qe,[e("div",Le,t(l.brand),1),e("div",Xe,t(l.name),1),e("div",Ke,[e("div",Qe,[e("div",Ye,t((y=l.size)==null?void 0:y.name),1),e("div",Je,t((p=l.color)==null?void 0:p.name),1)]),e("div",Ze,t(l.quantity)+" X "+t(a(b).showCurrency(l.discount_price>0?l.discount_price:l.price)),1)])])])}),128))])]))),128))]))}},tt={class:"main-container"},st={class:"flex items-center gap-2 overflow-hidden pt-4"},ot={class:"grow w-full overflow-hidden"},at={class:"space-x-1 text-slate-600 text-sm font-normal truncate"},nt={class:"grid grid-cols-1 xl:grid-cols-3 my-3 gap-8"},lt={class:"col-span-1 xl:col-span-2"},rt={class:"flex gap-2 justify-between items-center"},it={class:"text-slate-950 text-lg sm:text-3xl font-medium leading-10"},dt={class:"text-primary-600 text-lg font-medium leading-normal tracking-tight"},ct={key:0},ut={class:"mt-6"},mt={class:"text-slate-950 text-base font-medium leading-normal"},pt={value:"الضفة-15"},ht={value:"القدس-30"},_t={value:"الداخل-65"},ft={class:"mt-6"},vt={class:"mb-1"},gt={class:"text-slate-950 text-xl font-medium leading-7"},bt={class:"text-slate-500 text-lg font-normal leading-7 tracking-tight"},yt=["placeholder"],xt={class:"p-6 mt-4 bg-white rounded-2xl border border-slate-200"},wt={class:"text-slate-950 text-xl font-medium leading-7"},$t={class:"mt-4 flex flex-wrap gap-4"},kt={for:"cash",class:"flex items-center gap-4 xl:min-w-80"},Ct={class:"text-slate-500 text-base font-normal leading-normal"},Pt={for:"card",class:"flex items-center gap-4 xl:min-w-80"},St={class:"text-slate-500 text-base font-normal leading-normal"},Mt={key:0,class:"mt-5 border-t border-slate-200"},Dt={class:"text-slate-600 pt-2 block text-md font-medium leading-7"},jt={class:"mt-3 flex flex-wrap gap-4"},It=["for"],Tt=["id","value"],Vt={class:""},At=["src"],Bt={__name:"Checkout",setup(D){const b=U(),s=M(),r=new E,C=M(),d=O(),l=g(!1),y=g(""),p=g("الضفة-15"),c=g("cash"),x=g(null),w=g(null);return F(()=>{window.scrollTo(0,0),d.coupon_code="",x.value=c.value,b.user||r.push({name:"home"}),b.showAddressModal=!1,b.showChangeAddressModal=!1}),W(c,()=>{c.value==="card"?x.value=w.value:x.value=c.value}),W(w,()=>{c.value==="card"&&(x.value=w.value)}),(i,n)=>{const $=ne("router-link");return m(),h("div",tt,[e("div",st,[v($,{to:"/",class:"w-6 h-6"},{default:G(()=>[v(a(me),{class:"w-5 h-5 text-slate-600"})]),_:1}),e("div",ot,[e("div",at,[e("span",null,t(i.$t("Home")),1),n[6]||(n[6]=e("span",null,"/",-1)),e("span",null,t(i.$t("Cart")),1),n[7]||(n[7]=e("span",null,"/",-1)),e("span",null,t(i.$t("Checkout")),1)])])]),e("div",nt,[e("div",lt,[e("div",{class:T(["py-4 border-b tran",l.value?"border-primary":"border-slate-200"])},[e("div",rt,[e("div",it,t(i.$t("Checkout")),1),e("div",{class:"flex items-center gap-2 cursor-pointer",onClick:n[0]||(n[0]=u=>l.value=!l.value)},[e("div",dt," ("+t(a(d).checkoutTotalItems)+" "+t(i.$t("items"))+") ",1),v(a(le),{class:T(["w-5 h-5 text-primary-600 transition duration-300",l.value?"rotate-180":""])},null,8,["class"])])]),l.value?(m(),h("div",ct,[v(et)])):V("",!0)],2),v(ue),e("div",ut,[e("div",null,[e("div",mt,[q(t(i.$t("Select Area"))+" ",1),n[8]||(n[8]=e("small",{class:"text-red-500"},"*",-1))]),k(e("select",{"onUpdate:modelValue":n[1]||(n[1]=u=>p.value=u),class:"w-full mt-1 p-3 rounded bg-transparent border border-gray-300 outline-none focus:border-slate-400"},[e("option",pt,t(i.$t("الضفة")+" - "+a(s).showCurrency(15)),1),e("option",ht,t(i.$t("القدس")+" - "+a(s).showCurrency(30)),1),e("option",_t,t(i.$t("الداخل")+" - "+a(s).showCurrency(65)),1)],512),[[re,p.value]])])]),e("div",ft,[e("div",vt,[e("span",gt,t(i.$t("Note")),1),e("span",bt," ("+t(i.$t("Optional"))+") ",1)]),k(e("textarea",{"onUpdate:modelValue":n[2]||(n[2]=u=>y.value=u),rows:"3",class:"form-input",placeholder:i.$t("Write your note")+"..."},null,8,yt),[[R,y.value]])]),e("div",xt,[e("div",wt,t(i.$t("Payment Method")),1),e("div",$t,[e("label",kt,[k(e("input",{"onUpdate:modelValue":n[3]||(n[3]=u=>c.value=u),id:"cash",name:"payment",type:"radio",class:"radioBtn2",value:"cash",checked:""},null,512),[[I,c.value]]),n[9]||(n[9]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/money-2.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",Ct,t(i.$t("Cash on delivery")),1)]),e("label",Pt,[k(e("input",{"onUpdate:modelValue":n[4]||(n[4]=u=>c.value=u),id:"card",name:"payment",type:"radio",class:"radioBtn2",value:"card"},null,512),[[I,c.value]]),n[10]||(n[10]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/card.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",St,t(i.$t("Credit or Debit Card")),1)])]),v(ie,{"leave-active-class":"transition ease-in duration-300","enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:G(()=>[c.value==="card"?(m(),h("div",Mt,[e("span",Dt,t(i.$t("Available Payment Gateways")),1),e("div",jt,[(m(!0),h(A,null,B(a(C).paymentGateways,u=>(m(),h("label",{key:u.id,for:u.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer"},[k(e("input",{"onUpdate:modelValue":n[5]||(n[5]=j=>w.value=j),id:u.name,name:"paymentGateway",type:"radio",class:"sr-only",value:u.name},null,8,Tt),[[I,w.value]]),e("div",Vt,[e("img",{src:u.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,At)])],8,It))),128))])])):V("",!0)]),_:1})])]),v(We,{note:y.value,area:p.value,paymentMethod:x.value},null,8,["note","area","paymentMethod"])])])}}},Et=H(Bt,[["__scopeId","data-v-d13dc6ba"]]);export{Et as default};
