import{_ as le,p as ae,E as se,u as re,q as ne,d as i,k as de,s as ue,e as ie,c as d,o as u,b as x,a as t,a2 as pe,t as s,m as p,h as H,g as f,a3 as me,B as _,C as $,x as v,Q as ce,V as ve,K as he}from"./app-Dejn29Q7.js";import{_ as fe}from"./AuthPageHeader-BDaWm0Y7.js";const _e={class:"p-3 md:p-4 xl:p-6"},be={class:"max-w-[920px] mx-auto bg-white rounded-xl md:rounded-2xl p-3 md:p-4 xl:p-6"},ge={class:"p-4 bg-slate-50 rounded-xl border border-slate-100"},ye={class:"text-primary text-sm font-medium"},xe={class:"flex flex-col gap-2 justify-center items-center"},$e=["src"],we={class:"flex gap-2"},Pe={for:"upload",class:"text-white text-sm font-normal px-2 py-1 md:px-3 md:py-2 bg-slate-800 rounded-md cursor-pointer"},ke={class:"p-3 bg-white rounded-xl border border-slate-100 mt-3"},Ce={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Ve={for:"name",class:"form-label"},De=["placeholder"],Me={key:0,class:"text-red-500 text-sm"},Ue={for:"name",class:"form-label mb-2"},Ne={key:0,class:"text-red-500 text-sm"},Se={for:"phone",class:"form-label"},Be={class:"flex"},Ee=["placeholder","maxlength"],je={key:0,class:"text-red-500 text-sm"},Le={for:"gender",class:"form-label bg-transparent"},Te={value:"",disabled:"",selected:""},Ae={value:"male"},Fe={value:"female"},Re={value:"other"},ze={key:0,class:"text-red-500 text-sm"},Ie={for:"date",class:"form-label"},Oe={key:0,class:"text-red-500 text-sm"},qe={for:"email",class:"form-label"},Ge={key:0,class:"text-red-500 text-sm"},Ke={key:0,type:"submit",class:"bg-primary px-4 md:px-6 py-2 md:py-4 rounded-lg :md:rounded-[10px] text-white mt-6"},Qe={key:1,type:"button",class:"bg-primary-200 px-4 md:px-6 py-2 md:py-4 rounded-lg :md:rounded-[10px] text-primary mt-6 flex items-center justify-center cursor-not-allowed gap-2",disabled:""},Ye={__name:"MyProfile",setup(He){var k,C,V,D,M,U,N,S;const J=ae(),P=se(),m=re(),r=ne(),l=i(null),b=i(!1),g=i(null),y=i(!1),W=()=>{var e;g.value=(e=r.user)==null?void 0:e.profile_photo,y.value=!1},X=e=>{g.value=URL.createObjectURL(e.target.files[0]),o.value.profile_photo=e.target.files[0],y.value=!0},o=i({name:(k=r.user)==null?void 0:k.name,phone:(C=r.user)==null?void 0:C.phone,gender:(V=r.user)!=null&&V.gender?(D=r.user)==null?void 0:D.gender:"",date_of_birth:(M=r.user)==null?void 0:M.date_of_birth,email:(U=r.user)==null?void 0:U.email,profile_photo:null,phone_code:(N=r.user)==null?void 0:N.phone_code,country:(S=r.user)==null?void 0:S.country}),w=i([]),Z=i(!1);de(()=>{var e,a;r.user&&(g.value=(e=r.user)==null?void 0:e.profile_photo),window.scrollTo(0,0),((a=r.user)==null?void 0:a.email)==="user@readyecommerce.com"&&(Z.value=!0),ee()}),ue(()=>o.value.country,e=>{const a=w.value.find(c=>c.name==e);o.value.phone_code=a==null?void 0:a.phone_code});const ee=()=>{axios.get("/countries").then(e=>{w.value=e.data.data.countries})},te={component:he,props:{title:"Profile Updated",message:"Your profile updated successfully"}},oe=()=>{const e=new FormData;e.append("name",o.value.name),e.append("phone",o.value.phone),e.append("gender",o.value.gender?o.value.gender:""),e.append("date_of_birth",o.value.date_of_birth?o.value.date_of_birth:""),e.append("email",o.value.email?o.value.email:""),e.append("country",o.value.country?o.value.country:""),e.append("phone_code",o.value.phone_code?o.value.phone_code:""),o.value.profile_photo&&e.append("profile_photo",o.value.profile_photo),b.value=!0,axios.post("/update-profile",e,{headers:{Authorization:r.token}}).then(a=>{r.user=a.data.data.user,y.value=!1,b.value=!1,P(te,{type:"default",hideProgressBar:!0,icon:!1,position:m.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),l.value={}}).catch(a=>{var c,h;b.value=!1,a.response.status===401&&(r.logout(),J.push("/")),l.value=a.response.data.errors,(c=l.value)!=null&&c.profile_photo&&P.error((h=l.value)==null?void 0:h.profile_photo[0],{position:m.langDirection==="rtl"?"bottom-right":"bottom-left"})})};return(e,a)=>{var h,B,E,j,L,T,A,F,R,z,I,O,q,G,K,Q,Y;const c=ie("v-select");return u(),d("div",null,[x(fe,{title:e.$t("My Profile")},null,8,["title"]),t("div",_e,[t("form",{onSubmit:a[7]||(a[7]=pe(n=>oe(),["prevent"]))},[t("div",be,[t("div",ge,[t("div",ye,s(e.$t("Profile Picture")),1),t("div",xe,[t("img",{src:g.value,alt:"",class:"w-24 h-24 md:w-36 md:h-36 bg-white rounded-full object-cover"},null,8,$e),t("div",we,[t("label",Pe,[t("input",{type:"file",id:"upload",class:"hidden",onChange:X},null,32),H(" "+s(e.$t("Change Photo")),1)]),y.value?(u(),d("button",{key:0,class:"px-2 py-1 md:px-3 md:py-2 bg-red-500 text-white rounded-md",onClick:W},[x(f(me),{class:"w-5 h-5"})])):p("",!0)])])]),t("div",ke,[t("div",Ce,[t("div",null,[t("label",Ve,s(e.$t("Name")),1),_(t("input",{type:"text",id:"name","onUpdate:modelValue":a[0]||(a[0]=n=>o.value.name=n),placeholder:e.$t("Enter name"),class:v(["form-input",l.value&&((h=l.value)!=null&&h.name)?"border-red-500":"border-slate-200"])},null,10,De),[[$,o.value.name]]),l.value&&((B=l.value)!=null&&B.name)?(u(),d("span",Me,s((E=l.value)==null?void 0:E.name[0]),1)):p("",!0)]),t("div",null,[t("label",Ue,s(e.$t("Country")),1),x(c,{options:w.value,label:"name",reduce:n=>n.name,modelValue:o.value.country,"onUpdate:modelValue":a[1]||(a[1]=n=>o.value.country=n),placeholder:e.$t("Select Country"),dir:f(m).langDirection||"ltr"},null,8,["options","reduce","modelValue","placeholder","dir"]),l.value&&((j=l.value)!=null&&j.country)?(u(),d("span",Ne,s((L=l.value)==null?void 0:L.country[0]),1)):p("",!0)]),t("div",null,[t("label",Se,s(e.$t("Mobile Number")),1),t("div",Be,[t("span",{class:v(["text-slate-700 text-base font-normal leading-normal bg-slate-100 p-2 border-y flex items-center",f(m).langDirection=="rtl"?"border-r rounded-tr-lg rounded-br-lg":"border-l rounded-tl-lg rounded-bl-lg"])}," +"+s(o.value.phone_code||"00"),3),_(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=n=>o.value.phone=n),placeholder:e.$t("Enter phone number"),class:v(["text-base font-normal w-full p-3 placeholder:text-slate-400 border focus:border-primary outline-none",[(T=l.value)!=null&&T.phone?"border-red-500":"border-slate-200",f(m).langDirection=="rtl"?"rounded-tl-lg rounded-bl-lg":"rounded-tr-lg rounded-br-lg"]]),maxlength:f(m).phoneMaxLength,onInput:a[3]||(a[3]=n=>o.value.phone=o.value.phone.replace(/[^\d]/g,""))},null,42,Ee),[[$,o.value.phone]])]),l.value&&((A=l.value)!=null&&A.phone)?(u(),d("span",je,s((F=l.value)==null?void 0:F.phone[0]),1)):p("",!0)]),t("div",null,[t("label",Le,s(e.$t("Gender")),1),_(t("select",{name:"gender",id:"gender","onUpdate:modelValue":a[4]||(a[4]=n=>o.value.gender=n),class:v(["form-input bg-transparent h-[52px]",l.value&&((R=l.value)!=null&&R.gender)?"border-red-500":"border-slate-200"])},[t("option",Te,s(e.$t("Select a gender")),1),t("option",Ae,s(e.$t("Male")),1),t("option",Fe,s(e.$t("Female")),1),t("option",Re,s(e.$t("Other")),1)],2),[[ce,o.value.gender]]),l.value&&((z=l.value)!=null&&z.gender)?(u(),d("span",ze,s((I=l.value)==null?void 0:I.gender[0]),1)):p("",!0)]),t("div",null,[t("label",Ie,s(e.$t("Date of Birth")),1),_(t("input",{type:"date",id:"date","onUpdate:modelValue":a[5]||(a[5]=n=>o.value.date_of_birth=n),class:v(["form-input",l.value&&((O=l.value)!=null&&O.date_of_birth)?"border-red-500":"border-slate-200"])},null,2),[[$,o.value.date_of_birth]]),l.value&&((q=l.value)!=null&&q.date_of_birth)?(u(),d("span",Oe,s((G=l.value)==null?void 0:G.date_of_birth[0]),1)):p("",!0)]),t("div",null,[t("label",qe,s(e.$t("Email Address")),1),_(t("input",{type:"email",id:"email","onUpdate:modelValue":a[6]||(a[6]=n=>o.value.email=n),class:v(["form-input",l.value&&((K=l.value)!=null&&K.email)?"border-red-500":"border-slate-200"]),placeholder:"Enter email"},null,2),[[$,o.value.email]]),l.value&&((Q=l.value)!=null&&Q.email)?(u(),d("span",Ge,s((Y=l.value)==null?void 0:Y.email[0]),1)):p("",!0)])]),b.value?(u(),d("button",Qe,[H(s(e.$t("Processing"))+" ",1),x(ve)])):(u(),d("button",Ke,s(e.$t("Update Profile")),1))])])],32)])])}}},Xe=le(Ye,[["__scopeId","data-v-0a9061da"]]);export{Xe as default};
